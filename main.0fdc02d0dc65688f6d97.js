(self.webpackChunkid_user_generator=self.webpackChunkid_user_generator||[]).push([[179],{8255:We=>{function de(k){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+k+"'");throw E.code="MODULE_NOT_FOUND",E})}de.keys=()=>[],de.resolve=de,de.id=8255,We.exports=de},3018:(We,de,k)=>{"use strict";k.d(de,{deG:()=>us,tb:()=>KD,AFp:()=>mu,ip1:()=>Do,CZH:()=>da,hGG:()=>lw,z2F:()=>Ed,sBO:()=>wS,Sil:()=>xg,_Vd:()=>rf,EJc:()=>K0,SBq:()=>ua,qLn:()=>Xu,vpe:()=>Io,gxx:()=>oc,tBr:()=>Wu,XFs:()=>Pe,OlP:()=>En,zs3:()=>Wt,ZZ4:()=>Ty,aQg:()=>wo,soG:()=>n_,YKP:()=>Ay,v3s:()=>wd,h0i:()=>la,PXZ:()=>aC,R0b:()=>ms,FiY:()=>ks,Lbi:()=>yu,g9A:()=>Af,Qsj:()=>id,FYo:()=>Eo,JOm:()=>p,Tiy:()=>LE,q3G:()=>fn,tp0:()=>zo,EAV:()=>GA,Rgc:()=>cg,dDg:()=>tC,DyG:()=>Go,q4F:()=>sd,GfV:()=>VE,s_b:()=>xy,ifc:()=>st,eFA:()=>_s,G48:()=>kA,X6Q:()=>Q0,_c5:()=>QA,VLi:()=>PA,c2e:()=>ZD,zSh:()=>Qa,wAp:()=>Ye,vHH:()=>me,EiD:()=>ap,mCW:()=>ja,qzn:()=>Qr,JVY:()=>tm,pB0:()=>nm,eBb:()=>M_,L6k:()=>rp,LAX:()=>Ku,cg1:()=>on,Tjo:()=>Co,kL8:()=>Xl,yhl:()=>zu,dqk:()=>Ve,sIi:()=>eu,CqO:()=>Jm,QGY:()=>Gl,F4k:()=>iu,RDi:()=>Mo,AaK:()=>G,z3N:()=>ds,TTD:()=>wu,xp6:()=>Us,uIk:()=>Km,Suo:()=>N0,Xpm:()=>Ze,lG2:()=>xo,Yz7:()=>vt,cJS:()=>xi,oAB:()=>ot,Yjl:()=>bd,Y36:()=>po,_UZ:()=>jh,qZA:()=>ru,TgZ:()=>go,Ikx:()=>Ft,LFG:()=>Rn,$8M:()=>yi,NdJ:()=>hc,CRH:()=>zy,oxw:()=>rE,Q6J:()=>Qm,iGM:()=>x0,LSH:()=>Fs,kYT:()=>Bn,YNc:()=>Zm,_uU:()=>fE,Oqu:()=>ay});var E=k(9765),K=k(5319),P=k(7574),ee=k(6682),Y=k(2441);var oe=k(1307);function Q(){return new E.xQ}function L(r){for(let i in r)if(r[i]===L)return i;throw Error("Could not find renamed property on target object.")}function G(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(G).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function ne(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const pe=L({__forward_ref__:L});function ce(r){return r.__forward_ref__=ce,r.toString=function(){return G(this())},r}function se(r){return function(r){return"function"==typeof r&&r.hasOwnProperty(pe)&&r.__forward_ref__===ce}(r)?r():r}class me extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function xe(r){return"string"==typeof r?r:null==r?"":String(r)}function St(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():xe(r)}function Dt(r,i){const o=i?` in ${i}`:"";throw new me("201",`No provider for ${St(r)} found${o}`)}function bn(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function vt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function xi(r){return{providers:r.providers||[],imports:r.imports||[]}}function en(r){return ai(r,yn)||ai(r,Gr)}function ai(r,i){return r.hasOwnProperty(i)?r[i]:null}function Cn(r){return r&&(r.hasOwnProperty(nn)||r.hasOwnProperty(Ao))?r[nn]:null}const yn=L({\u0275prov:L}),nn=L({\u0275inj:L}),Gr=L({ngInjectableDef:L}),Ao=L({ngInjectorDef:L});var Pe=(()=>((Pe=Pe||{})[Pe.Default=0]="Default",Pe[Pe.Host=1]="Host",Pe[Pe.Self=2]="Self",Pe[Pe.SkipSelf=4]="SkipSelf",Pe[Pe.Optional=8]="Optional",Pe))();let Wr;function ui(r){const i=Wr;return Wr=r,i}function Yt(r,i,o){const u=en(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Pe.Optional?null:void 0!==i?i:void Dt(G(r),"Injector")}function Ge(r){return{toString:r}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),st=(()=>((st=st||{})[st.Emulated=0]="Emulated",st[st.None=2]="None",st[st.ShadowDom=3]="ShadowDom",st))();const Pt="undefined"!=typeof globalThis&&globalThis,Ki="undefined"!=typeof window&&window,Qt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ve=Pt||"undefined"!=typeof global&&global||Ki||Qt,Be={},Te=[],At=L({\u0275cmp:L}),Mt=L({\u0275dir:L}),B=L({\u0275pipe:L}),V=L({\u0275mod:L}),$=L({\u0275loc:L}),re=L({\u0275fac:L}),z=L({__NG_ELEMENT_ID__:L});let Ce=0;function Ze(r){return Ge(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Te,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||st.Emulated,id:"c",styles:r.styles||Te,_:null,setInput:null,schemas:r.schemas||null,tView:null},l=r.directives,d=r.features,g=r.pipes;return u.id+=Ce++,u.inputs=Ni(r.inputs,o),u.outputs=Ni(r.outputs),d&&d.forEach(_=>_(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(Kn):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(ln):null,u})}function Kn(r){return Sn(r)||function(r){return r[Mt]||null}(r)}function ln(r){return function(r){return r[B]||null}(r)}const ci={};function ot(r){return Ge(()=>{const i={type:r.type,bootstrap:r.bootstrap||Te,declarations:r.declarations||Te,imports:r.imports||Te,exports:r.exports||Te,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(ci[r.id]=r.type),i})}function Bn(r,i){return Ge(()=>{const o=jn(r,!0);o.declarations=i.declarations||Te,o.imports=i.imports||Te,o.exports=i.exports||Te})}function Ni(r,i){if(null==r)return Be;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,i&&(i[l]=d)}return o}const xo=Ze;function bd(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Sn(r){return r[At]||null}function jn(r,i){const o=r[V]||null;if(!o&&!0===i)throw new Error(`Type ${G(r)} does not have '\u0275mod' property.`);return o}function Qi(r){return Array.isArray(r)&&"object"==typeof r[1]}function dn(r){return Array.isArray(r)&&!0===r[1]}function Uc(r){return 0!=(8&r.flags)}function Ji(r){return 2==(2&r.flags)}function fa(r){return 1==(1&r.flags)}function Or(r){return null!==r.template}function Td(r){return 0!=(512&r[2])}function sr(r,i){return r.hasOwnProperty(re)?r[re]:null}class hi{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function wu(){return ma}function ma(r){return r.type.prototype.ngOnChanges&&(r.setInput=Od),$f}function $f(){const r=ya(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Be)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Od(r,i,o,u){const l=ya(r)||function(r,i){return r[Gc]=i}(r,{previous:Be,current:null}),d=l.current||(l.current={}),g=l.previous,_=this.declaredInputs[o],w=g[_];d[_]=new hi(w&&w.currentValue,i,g===Be),r[u]=i}wu.ngInherit=!0;const Gc="__ngSimpleChanges__";function ya(r){return r[Gc]||null}let fi;function Mo(r){fi=r}function Ht(r){return!!r.listen}const qc={createRenderer:(r,i)=>void 0!==fi?fi:"undefined"!=typeof document?document:void 0};function rn(r){for(;Array.isArray(r);)r=r[0];return r}function or(r,i){return rn(i[r.index])}function es(r,i){return r.data[i]}function Kt(r,i){const o=i[r];return Qi(o)?o:o[0]}function Du(r){return 4==(4&r[2])}function Zc(r){return 128==(128&r[2])}function kr(r,i){return null==i?null:r[i]}function Tu(r){r[18]=0}function Oo(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const tt={lFrame:Ld(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Js(){return tt.bindingsEnabled}function he(){return tt.lFrame.lView}function bt(){return tt.lFrame.tView}function hn(){let r=Au();for(;null!==r&&64===r.type;)r=r.parent;return r}function Au(){return tt.lFrame.currentTNode}function Fr(r,i){const o=tt.lFrame;o.currentTNode=r,o.isParent=i}function wa(){return tt.lFrame.isParent}function Pi(){return tt.isInCheckNoChangesMode}function ns(r){tt.isInCheckNoChangesMode=r}function Ss(){return tt.lFrame.bindingIndex++}function to(r,i){const o=tt.lFrame;o.bindingIndex=o.bindingRootIndex=r,Lo(i)}function Lo(r){tt.lFrame.currentDirectiveIndex=r}function Ru(){return tt.lFrame.currentQueryIndex}function Fd(r){tt.lFrame.currentQueryIndex=r}function Nu(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Jc(r,i,o){if(o&Pe.SkipSelf){let l=i,d=r;for(;!(l=l.parent,null!==l||o&Pe.Host||(l=Nu(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;i=l,r=d}const u=tt.lFrame=Vo();return u.currentTNode=i,u.lView=r,!0}function Da(r){const i=Vo(),o=r[1];tt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Vo(){const r=tt.lFrame,i=null===r?null:r.child;return null===i?Ld(r):i}function Ld(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Vd(){const r=tt.lFrame;return tt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Ud=Vd;function Ca(){const r=Vd();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function xn(){return tt.lFrame.selectedIndex}function As(r){tt.lFrame.selectedIndex=r}function tn(){const r=tt.lFrame;return es(r.tView,r.selectedIndex)}function Pu(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:w,ngAfterViewChecked:D,ngOnDestroy:A}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),_&&((r.contentHooks||(r.contentHooks=[])).push(o,_),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,_)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),D&&((r.viewHooks||(r.viewHooks=[])).push(o,D),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,D)),null!=A&&(r.destroyHooks||(r.destroyHooks=[])).push(o,A)}}function Ou(r,i,o){Fu(r,i,3,o)}function Uo(r,i,o,u){(3&r[2])===o&&Fu(r,i,o,u)}function ku(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Fu(r,i,o,u){const d=null!=u?u:-1,g=i.length-1;let _=0;for(let w=void 0!==u?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(_=i[w],null!=u&&_>=u)break}else i[w]<0&&(r[18]+=65536),(_<d||-1==d)&&(Bo(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function Bo(r,i,o,u){const l=o[u]<0,d=o[u+1],_=r[l?-o[u]:o[u]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(_)}finally{}}}else try{d.call(_)}finally{}}class Ta{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function no(r,i,o){const u=Ht(r);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const g=o[l++],_=o[l++],w=o[l++];u?r.setAttribute(i,_,w,g):i.setAttributeNS(g,_,w)}else{const g=d,_=o[++l];nl(g)?u&&r.setProperty(i,g,_):u?r.setAttribute(i,g,_):i.setAttribute(g,_),l++}}return l}function $d(r){return 3===r||4===r||6===r}function nl(r){return 64===r.charCodeAt(0)}function jo(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const l=i[u];"number"==typeof l?o=l:0===o||is(r,o,l,null,-1===o||2===o?i[++u]:null)}}return r}function is(r,i,o,u,l){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const _=r[d++];if("number"==typeof _){if(_===i){g=-1;break}if(_>i){g=d-1;break}}}for(;d<r.length;){const _=r[d];if("number"==typeof _)break;if(_===o){if(null===u)return void(null!==l&&(r[d+1]=l));if(u===r[d+1])return void(r[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==l&&r.splice(d++,0,l)}function Vu(r){return-1!==r}function Sa(r){return 32767&r}function Aa(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let Uu=!0;function xa(r){const i=Uu;return Uu=r,i}let ze=0;function os(r,i){const o=ju(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,mr(u.data,r),mr(i,null),mr(u.blueprint,null));const l=mi(r,i),d=r.injectorIndex;if(Vu(l)){const g=Sa(l),_=Aa(l,i),w=_[1].data;for(let D=0;D<8;D++)i[d+D]=_[g+D]|w[g+D]}return i[d+8]=l,d}function mr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function ju(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function mi(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=i;for(;null!==l;){const d=l[1],g=d.type;if(u=2===g?d.declTNode:1===g?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function ar(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(z)&&(u=o[z]),null==u&&(u=o[z]=ze++);const l=255&u;i.data[r+(l>>5)]|=1<<l}(r,i,o)}function Hd(r,i,o){if(o&Pe.Optional)return r;Dt(i,"NodeInjector")}function Gd(r,i,o,u){if(o&Pe.Optional&&void 0===u&&(u=null),0==(o&(Pe.Self|Pe.Host))){const l=r[9],d=ui(void 0);try{return l?l.get(i,u,o&Pe.Optional):Yt(i,u,o&Pe.Optional)}finally{ui(d)}}return Hd(u,i,o)}function ur(r,i,o,u=Pe.Default,l){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(z)?r[z]:void 0;return"number"==typeof i?i>=0?255&i:On:i}(o);if("function"==typeof d){if(!Jc(i,r,u))return u&Pe.Host?Hd(l,o,u):Gd(i,o,u,l);try{const g=d(u);if(null!=g||u&Pe.Optional)return g;Dt(o)}finally{Ud()}}else if("number"==typeof d){let g=null,_=ju(r,i),w=-1,D=u&Pe.Host?i[16][6]:null;for((-1===_||u&Pe.SkipSelf)&&(w=-1===_?mi(r,i):i[_+8],-1!==w&&Ra(u,!1)?(g=i[1],_=Sa(w),i=Aa(w,i)):_=-1);-1!==_;){const A=i[1];if(il(d,_,A.data)){const n=Hu(_,i,o,g,u,D);if(n!==$u)return n}w=i[_+8],-1!==w&&Ra(u,i[1].data[_+8]===D)&&il(d,_,i)?(g=A,_=Sa(w),i=Aa(w,i)):_=-1}}}return Gd(i,o,u,l)}const $u={};function On(){return new Kr(hn(),he())}function Hu(r,i,o,u,l,d){const g=i[1],_=g.data[r+8],A=$o(_,g,o,null==u?Ji(_)&&Uu:u!=g&&0!=(3&_.type),l&Pe.Host&&d===_);return null!==A?io(i,g,A,_):$u}function $o(r,i,o,u,l){const d=r.providerIndexes,g=i.data,_=1048575&d,w=r.directiveStart,A=d>>20,e=l?_+A:r.directiveEnd;for(let t=u?_:_+A;t<e;t++){const s=g[t];if(t<w&&o===s||t>=w&&s.type===o)return t}if(l){const t=g[w];if(t&&Or(t)&&t.type===o)return w}return null}function io(r,i,o,u){let l=r[o];const d=i.data;if(function(r){return r instanceof Ta}(l)){const g=l;g.resolving&&function(r,i){throw new me("200",`Circular dependency in DI detected for ${r}`)}(St(d[o]));const _=xa(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?ui(g.injectImpl):null;Jc(r,u,Pe.Default);try{l=r[o]=g.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=i.type.prototype;if(u){const g=ma(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==w&&ui(w),xa(_),g.resolving=!1,Ud()}}return l}function il(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Ra(r,i){return!(r&Pe.Self||r&Pe.Host&&i)}class Kr{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return ur(this._tNode,this._lView,i,u,o)}}function yi(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if($d(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===i)return o[l+1];l+=2}}}return null}(hn(),r)}const Ns="__parameters__";function as(r,i,o){return Ge(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(i);function l(...d){if(this instanceof l)return u.apply(this,d),this;const g=new l(...d);return _.annotation=g,_;function _(w,D,A){const n=w.hasOwnProperty(Ns)?w[Ns]:Object.defineProperty(w,Ns,{value:[]})[Ns];for(;n.length<=A;)n.push(null);return(n[A]=n[A]||[]).push(g),w}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class En{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=vt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const us=new En("AnalyzeForEntryComponents"),Go=Function;function Yr(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),Yr(u,i)):i!==r&&i.push(u)}return i}function $n(r,i){r.forEach(o=>Array.isArray(o)?$n(o,i):i(o))}function Na(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Ur(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const so={},oo="__NG_DI_FLAG__",_r="ngTempTokenPath",Pa=/\n/gm,al="__source",Jd=L({provide:String,useValue:L});let Os;function Gu(r){const i=Os;return Os=r,i}function D_(r,i=Pe.Default){if(void 0===Os)throw new Error("inject() must be called from an injection context");return null===Os?Yt(r,void 0,i):Os.get(r,i&Pe.Optional?null:void 0,i)}function Rn(r,i=Pe.Default){return(Wr||D_)(se(r),i)}function qo(r){const i=[];for(let o=0;o<r.length;o++){const u=se(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Pe.Default;for(let g=0;g<u.length;g++){const _=u[g],w=C_(_);"number"==typeof w?-1===w?l=_.token:d|=w:l=_}i.push(Rn(l,d))}else i.push(Rn(u))}return i}function ka(r,i){return r[oo]=i,r.prototype[oo]=i,r}function C_(r){return r[oo]}function Jn(r,i,o,u){const l=r[_r];throw i[al]&&l.unshift(i[al]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let l=G(i);if(Array.isArray(i))l=i.map(G).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let _=i[g];d.push(g+":"+("string"==typeof _?JSON.stringify(_):G(_)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(Pa,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[_r]=null,r}const Wu=ka(as("Inject",r=>({token:r})),-1),ks=ka(as("Optional"),8),zo=ka(as("SkipSelf"),4);let Va;function Yo(r){var i;return(null===(i=function(){if(void 0===Va&&(Va=null,Ve.trustedTypes))try{Va=Ve.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Va}())||void 0===i?void 0:i.createHTML(r))||r}class Ba{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class x_ extends Ba{getTypeName(){return"HTML"}}class R_ extends Ba{getTypeName(){return"Style"}}class N_ extends Ba{getTypeName(){return"Script"}}class nh extends Ba{getTypeName(){return"URL"}}class np extends Ba{getTypeName(){return"ResourceURL"}}function ds(r){return r instanceof Ba?r.changingThisBreaksApplicationSecurity:r}function Qr(r,i){const o=zu(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function zu(r){return r instanceof Ba&&r.getTypeName()||null}function tm(r){return new x_(r)}function rp(r){return new R_(r)}function M_(r){return new N_(r)}function Ku(r){return new nh(r)}function nm(r){return new np(r)}class Zu{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Yo(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class im{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Yo(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Yo(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let l=o.length-1;0<l;l--){const g=o.item(l).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const sm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ja(r){return(r=String(r)).match(sm)||r.match(sp)?r:"unsafe:"+r}function Li(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function Yu(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const om=Li("area,br,col,hr,img,wbr"),am=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gl=Li("rp,rt"),rh=Yu(om,Yu(am,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yu(gl,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yu(gl,am)),ml=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yl=Li("srcset"),cm=Yu(ml,yl,Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ih=Li("script,style,template");class sh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!rh.hasOwnProperty(o))return this.sanitizedSomething=!0,!ih.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),g=d.name,_=g.toLowerCase();if(!cm.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let w=d.value;ml[_]&&(w=ja(w)),yl[_]&&(r=w,w=(r=String(r)).split(",").map(i=>ja(i.trim())).join(", ")),this.buf.push(" ",g,'="',lm(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();rh.hasOwnProperty(o)&&!om.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(lm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const O_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_l=/([^\#-~ |!])/g;function lm(r){return r.replace(/&/g,"&amp;").replace(O_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(_l,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vl;function ap(r,i){let o=null;try{vl=vl||function(r){const i=new im(r);return function(){try{return!!(new window.DOMParser).parseFromString(Yo(""),"text/html")}catch(r){return!1}}()?new Zu(i):i}(r);let u=i?String(i):"";o=vl.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=vl.getInertBodyElement(u)}while(u!==d);return Yo((new sh).sanitizeChildren(up(o)||o))}finally{if(o){const u=up(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function up(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var fn=(()=>((fn=fn||{})[fn.NONE=0]="NONE",fn[fn.HTML=1]="HTML",fn[fn.STYLE=2]="STYLE",fn[fn.SCRIPT=3]="SCRIPT",fn[fn.URL=4]="URL",fn[fn.RESOURCE_URL=5]="RESOURCE_URL",fn))();function Fs(r){const i=function(){const r=he();return r&&r[12]}();return i?i.sanitize(fn.URL,r)||"":Qr(r,"URL")?ds(r):ja(xe(r))}const lh="__ngContext__";function Gt(r,i){r[lh]=i}function El(r){const i=function(r){return r[lh]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Ju(r){return r.ngOriginalError}function ph(r,...i){r.error(...i)}class Xu{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),l=(r=i)&&r.ngErrorLogger||ph;var r;l(this._console,"ERROR",i),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(Ju(i)):null}_findOriginalError(i){let o=i&&Ju(i);for(;o&&Ju(o);)o=Ju(o);return o||null}}const yp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ve))();function Vs(r){return r instanceof Function?r():r}var p=(()=>((p=p||{})[p.Important=1]="Important",p[p.DashCase=2]="DashCase",p))();function T(r,i){return undefined(r,i)}function Z(r){const i=r[3];return dn(i)?i[3]:i}function ke(r){return Rt(r[13])}function Ue(r){return Rt(r[4])}function Rt(r){for(;null!==r&&!dn(r);)r=r[4];return r}function Ei(r,i,o,u,l){if(null!=u){let d,g=!1;dn(u)?d=u:Qi(u)&&(g=!0,u=u[0]);const _=rn(u);0===r&&null!==o?null==l?_m(i,o,_):Jo(i,o,_,l||null,!0):1===r&&null!==o?Jo(i,o,_,l||null,!0):2===r?function(r,i,o){const u=Em(r,i);u&&function(r,i,o,u){Ht(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,_,g):3===r&&i.destroyNode(_),null!=d&&function(r,i,o,u,l){const d=o[7];d!==rn(o)&&Ei(i,r,u,d,l);for(let _=10;_<o.length;_++){const w=o[_];Dp(w[1],w,r,i,u,d)}}(i,r,d,o,l)}}function _h(r,i,o){return Ht(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function Eh(r,i){const o=r[9],u=o.indexOf(i),l=i[3];1024&i[2]&&(i[2]&=-1025,Oo(l,-1)),o.splice(u,1)}function Ip(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const l=u[17];null!==l&&l!==r&&Eh(l,u),i>0&&(r[o-1][4]=u[4]);const d=Ur(r,10+i);!function(r,i){Dp(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Ow(r,i){if(!(256&i[2])){const o=i[11];Ht(o)&&o.destroyNode&&Dp(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return ym(r[1],r);for(;i;){let o=null;if(Qi(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)Qi(i)&&ym(i[1],i),i=i[3];null===i&&(i=r),Qi(i)&&ym(i[1],i),o=i&&i[4]}i=o}}(i)}}function ym(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=i[o[u]];if(!(l instanceof Ta)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const _=l[d[g]],w=d[g+1];try{w.call(_)}finally{}}else try{d.call(l)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],_="function"==typeof g?g(i):rn(i[g]),w=u[l=o[d+2]],D=o[d+3];"boolean"==typeof D?_.removeEventListener(o[d],w,D):D>=0?u[l=D]():u[l=-D].unsubscribe(),d+=2}else{const g=u[l=o[d+1]];o[d].call(g)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&Ht(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&dn(i[3])){o!==i[3]&&Eh(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function wi(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const l=r.data[u.directiveStart].encapsulation;if(l===st.None||l===st.Emulated)return null}return or(u,o)}(r,i.parent,o)}function Jo(r,i,o,u,l){Ht(r)?r.insertBefore(i,o,u,l):i.insertBefore(o,u,l)}function _m(r,i,o){Ht(r)?r.appendChild(i,o):i.appendChild(o)}function vm(r,i,o,u,l){null!==u?Jo(r,i,o,u,l):_m(r,i,o)}function Em(r,i){return Ht(r)?r.parentNode(i):i.parentNode}let z_=function(r,i,o){return 40&r.type?or(r,o):null};function bp(r,i,o,u){const l=wi(r,u,i),d=i[11],_=function(r,i,o){return z_(r,i,o)}(u.parent||i[6],u,i);if(null!=l)if(Array.isArray(o))for(let w=0;w<o.length;w++)vm(d,l,o[w],_,!1);else vm(d,l,o,_,!1)}function Ih(r,i){if(null!==i){const o=i.type;if(3&o)return or(i,r);if(4&o)return za(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Ih(r,u);{const l=r[i.index];return dn(l)?za(-1,l):rn(l)}}if(32&o)return T(i,r)()||rn(r[i.index]);{const u=jC(r,i);return null!==u?Array.isArray(u)?u[0]:Ih(Z(r[16]),u):Ih(r,i.next)}}return null}function jC(r,i){return null!==i?r[16][6].projection[i.projection]:null}function za(r,i){const o=10+r+1;if(o<i.length){const u=i[o],l=u[1].firstChild;if(null!==l)return Ih(u,l)}return i[7]}function Q_(r,i,o,u,l,d,g){for(;null!=o;){const _=u[o.index],w=o.type;if(g&&0===i&&(_&&Gt(rn(_),u),o.flags|=4),64!=(64&o.flags))if(8&w)Q_(r,i,o.child,u,l,d,!1),Ei(i,r,l,_,d);else if(32&w){const D=T(o,u);let A;for(;A=D();)Ei(i,r,l,A,d);Ei(i,r,l,_,d)}else 16&w?J_(r,i,u,o,l,d):Ei(i,r,l,_,d);o=g?o.projectionNext:o.next}}function Dp(r,i,o,u,l,d){Q_(o,u,r.firstChild,i,l,d,!1)}function J_(r,i,o,u,l,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let D=0;D<w.length;D++)Ei(i,r,l,w[D],d);else Q_(r,i,w,g[3],l,d,!0)}function Lw(r,i,o){Ht(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function wm(r,i,o){Ht(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function Vw(r,i,o){let u=r.length;for(;;){const l=r.indexOf(i,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const d=i.length;if(l+d===u||r.charCodeAt(l+d)<=32)return l}o=l+1}}const Uw="ng-template";function X_(r,i,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==Vw(l.toLowerCase(),i,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===i)return!0;return!1}}return!1}function Bw(r){return 4===r.type&&r.value!==Uw}function WC(r,i,o){return i===(4!==r.type||o?r.value:Uw)}function jw(r,i,o){let u=4;const l=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if($d(r[i]))return i;return r.length}(l);let g=!1;for(let _=0;_<i.length;_++){const w=i[_];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!WC(r,w,o)||""===w&&1===i.length){if(lo(u))return!1;g=!0}}else{const D=8&u?w:i[++_];if(8&u&&null!==r.attrs){if(!X_(r.attrs,D,o)){if(lo(u))return!1;g=!0}continue}const n=Px(8&u?"class":w,l,Bw(r),o);if(-1===n){if(lo(u))return!1;g=!0;continue}if(""!==D){let e;e=n>d?"":l[n+1].toLowerCase();const t=8&u?e:null;if(t&&-1!==Vw(t,D,0)||2&u&&D!==e){if(lo(u))return!1;g=!0}}}}else{if(!g&&!lo(u)&&!lo(w))return!1;if(g&&lo(w))continue;g=!1,u=w|1&u}}return lo(u)||g}function lo(r){return 0==(1&r)}function Px(r,i,o,u){if(null===i)return-1;let l=0;if(u||!o){let d=!1;for(;l<i.length;){const g=i[l];if(g===r)return l;if(3===g||6===g)d=!0;else{if(1===g||2===g){let _=i[++l];for(;"string"==typeof _;)_=i[++l];continue}if(4===g)break;if(0===g){l+=4;continue}}l+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function $w(r,i,o=!1){for(let u=0;u<i.length;u++)if(jw(r,i[u],o))return!0;return!1}function Hw(r,i){return r?":not("+i.trim()+")":i}function KC(r){let i=r[0],o=1,u=2,l="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&u){const _=r[++o];l+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&u?l+="."+g:4&u&&(l+=" "+g);else""!==l&&!lo(g)&&(i+=Hw(d,l),l=""),u=g,d=d||!lo(u);o++}return""!==l&&(i+=Hw(d,l)),i}const mt={};function Us(r){QC(bt(),he(),xn()+r,Pi())}function QC(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Ou(i,d,o)}else{const d=r.preOrderHooks;null!==d&&Uo(i,d,0,o)}As(o)}function Nm(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const g=r.data[d];Fd(l),g.contentQueries(2,i[d],d)}}}function Sp(r,i,o,u,l,d,g,_,w,D){const A=i.blueprint.slice();return A[0]=l,A[2]=140|u,Tu(A),A[3]=A[15]=r,A[8]=o,A[10]=g||r&&r[10],A[11]=_||r&&r[11],A[12]=w||r&&r[12]||null,A[9]=D||r&&r[9]||null,A[6]=d,A[16]=2==i.type?r[16]:A,A}function Dh(r,i,o,u,l){let d=r.data[i];if(null===d)d=function(r,i,o,u,l){const d=Au(),g=wa(),w=r.data[i]=function(r,i,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,u,l);return null===r.firstChild&&(r.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(r,i,o,u,l),tt.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const g=function(){const r=tt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return Fr(d,!0),d}function Dl(r,i,o,u){if(0===o)return-1;const l=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return l}function xp(r,i,o){Da(i);try{const u=r.viewQuery;null!==u&&Sl(1,u,o);const l=r.template;null!==l&&Th(r,i,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Nm(r,i),r.staticViewQueries&&Sl(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)Um(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Ca()}}function Ch(r,i,o,u){const l=i[2];if(256==(256&l))return;Da(i);const d=Pi();try{Tu(i),function(r){tt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Th(r,i,o,2,u);const g=3==(3&l);if(!d)if(g){const D=r.preOrderCheckHooks;null!==D&&Ou(i,D,null)}else{const D=r.preOrderHooks;null!==D&&Uo(i,D,0,null),ku(i,0)}if(function(r){for(let i=ke(r);null!==i;i=Ue(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&Oo(d,1),l[2]|=1024}}}(i),function(r){for(let i=ke(r);null!==i;i=Ue(i))for(let o=10;o<i.length;o++){const u=i[o],l=u[1];Zc(u)&&Ch(l,u,l.template,u[8])}}(i),null!==r.contentQueries&&Nm(r,i),!d)if(g){const D=r.contentCheckHooks;null!==D&&Ou(i,D)}else{const D=r.contentHooks;null!==D&&Uo(i,D,1),ku(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)As(~l);else{const d=l,g=o[++u],_=o[++u];to(g,d),_(2,i[d])}}}finally{As(-1)}}(r,i);const _=r.components;null!==_&&function(r,i){for(let o=0;o<i.length;o++)dI(r,i[o])}(i,_);const w=r.viewQuery;if(null!==w&&Sl(2,w,u),!d)if(g){const D=r.viewCheckHooks;null!==D&&Ou(i,D)}else{const D=r.viewHooks;null!==D&&Uo(i,D,2),ku(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Oo(i[3],-1))}finally{Ca()}}function ei(r,i,o,u){const l=i[10],d=!Pi(),g=Du(i);try{d&&!g&&l.begin&&l.begin(),g&&xp(r,i,u),Ch(r,i,o,u)}finally{d&&!g&&l.end&&l.end()}}function Th(r,i,o,u,l){const d=xn(),g=2&u;try{As(-1),g&&i.length>20&&QC(r,i,20,Pi()),o(u,l)}finally{As(d)}}function Cl(r,i,o){!Js()||(function(r,i,o,u){const l=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||os(o,i),Gt(u,i);const g=o.initialInputs;for(let _=l;_<d;_++){const w=r.data[_],D=Or(w);D&&uI(i,o,w);const A=io(i,r,_,o);Gt(A,i),null!==g&&gv(0,_-l,A,w,0,g),D&&(Kt(o.index,i)[8]=A)}}(r,i,o,or(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,l=o.directiveEnd,g=o.index,_=tt.lFrame.currentDirectiveIndex;try{As(g);for(let w=u;w<l;w++){const D=r.data[w],A=i[w];Lo(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&hv(D,A)}}finally{As(-1),Lo(_)}}(r,i,o))}function uv(r,i,o=or){const u=i.localNames;if(null!==u){let l=i.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],_=-1===g?o(i,r):r[g];r[l++]=_}}}function Xw(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Tl(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Tl(r,i,o,u,l,d,g,_,w,D){const A=20+u,n=A+l,e=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:mt);return o}(A,n),t="function"==typeof D?D():D;return e[1]={type:r,blueprint:e,template:o,queries:null,viewQuery:_,declTNode:i,data:e.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:n,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:t,incompleteFirstPass:!1}}function km(r,i,o,u){const l=vv(i);null===o?l.push(u):(l.push(o),r.firstCreatePass&&Ah(r).push(u,l.length-1))}function cv(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const l=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,l):o[u]=[i,l]}return o}function Bi(r,i,o,u,l,d,g,_){const w=or(i,o);let A,D=i.inputs;!_&&null!=D&&(A=D[u])?($m(r,o,A,u,l),Ji(i)&&function(r,i){const o=Kt(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=g?g(l,i.value||"",u):l,Ht(d)?d.setProperty(w,u,l):nl(u)||(w.setProperty?w.setProperty(u,l):w[u]=l))}function lr(r,i,o,u){let l=!1;if(Js()){const d=function(r,i,o){const u=r.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];$w(o,g.selectors,!1)&&(l||(l=[]),ar(os(o,i),r,g.type),Or(g)?(oI(r,o),l.unshift(g)):l.push(g))}return l}(r,i,o),g=null===u?null:{"":-1};if(null!==d){l=!0,aI(o,r.data.length,d.length);for(let A=0;A<d.length;A++){const n=d[A];n.providersResolver&&n.providersResolver(n)}let _=!1,w=!1,D=Dl(r,i,d.length,null);for(let A=0;A<d.length;A++){const n=d[A];o.mergedAttrs=jo(o.mergedAttrs,n.hostAttrs),Lm(r,o,i,D,n),pv(D,n,g),null!==n.contentQueries&&(o.flags|=8),(null!==n.hostBindings||null!==n.hostAttrs||0!==n.hostVars)&&(o.flags|=128);const e=n.type.prototype;!_&&(e.ngOnChanges||e.ngOnInit||e.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),_=!0),!w&&(e.ngOnChanges||e.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),D++}!function(r,i){const u=i.directiveEnd,l=r.data,d=i.attrs,g=[];let _=null,w=null;for(let D=i.directiveStart;D<u;D++){const A=l[D],n=A.inputs,e=null===d||Bw(i)?null:mv(n,d);g.push(e),_=cv(n,D,_),w=cv(A.outputs,D,w)}null!==_&&(_.hasOwnProperty("class")&&(i.flags|=16),_.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=_,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const u=r.localNames=[];for(let l=0;l<i.length;l+=2){const d=o[i[l+1]];if(null==d)throw new me("301",`Export of name '${i[l+1]}' not found!`);u.push(i[l],d)}}}(o,u,g)}return o.mergedAttrs=jo(o.mergedAttrs,o.attrs),l}function Rp(r,i,o,u,l,d){const g=d.hostBindings;if(g){let _=r.hostBindingOpCodes;null===_&&(_=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(_)!=w&&_.push(w),_.push(u,l,g)}}function hv(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function oI(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function pv(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Or(i)&&(o[""]=r)}}function aI(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Lm(r,i,o,u,l){r.data[u]=l;const d=l.factory||(l.factory=sr(l.type)),g=new Ta(d,Or(l),null);r.blueprint[u]=g,o[u]=g,Rp(r,i,0,u,Dl(r,o,l.hostVars,mt),l)}function uI(r,i,o){const u=or(i,r),l=Xw(o),d=r[10],g=Bm(r,Sp(r,l,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=g}function na(r,i,o,u,l,d){const g=or(r,i);!function(r,i,o,u,l,d,g){if(null==d)Ht(r)?r.removeAttribute(i,l,o):i.removeAttribute(l);else{const _=null==g?xe(d):g(d,u||"",l);Ht(r)?r.setAttribute(i,l,_,o):o?i.setAttributeNS(o,l,_):i.setAttribute(l,_)}}(i[11],g,d,r.value,o,u,l)}function gv(r,i,o,u,l,d){const g=d[i];if(null!==g){const _=u.setInput;for(let w=0;w<g.length;){const D=g[w++],A=g[w++],n=g[w++];null!==_?u.setInput(o,n,D,A):o[A]=n}}}function mv(r,i){let o=null,u=0;for(;u<i.length;){const l=i[u];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,r[l],i[u+1])),u+=2}else u+=2;else u+=4}return o}function cI(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function dI(r,i){const o=Kt(i,r);if(Zc(o)){const u=o[1];80&o[2]?Ch(u,o,u.template,o[8]):o[5]>0&&Vm(o)}}function Vm(r){for(let u=ke(r);null!==u;u=Ue(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const g=d[1];Ch(g,d,g.template,d[8])}else d[5]>0&&Vm(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=Kt(o[u],r);Zc(l)&&l[5]>0&&Vm(l)}}function Um(r,i){const o=Kt(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),xp(u,o,o[8])}function Bm(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function sc(r){for(;r;){r[2]|=64;const i=Z(r);if(Td(r)&&!i)return r;r=i}return null}function Ya(r,i,o){const u=i[10];u.begin&&u.begin();try{Ch(r,i,r.template,o)}catch(l){throw Ev(i,l),l}finally{u.end&&u.end()}}function _v(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=El(o),l=u[1];ei(l,u,l.template,o)}}(r[8])}function Sl(r,i,o){Fd(0),i(r,o)}const Ii=(()=>Promise.resolve(null))();function vv(r){return r[7]||(r[7]=[])}function Ah(r){return r.cleanup||(r.cleanup=[])}function Ev(r,i){const o=r[9],u=o?o.get(Xu,null):null;u&&u.handleError(i)}function $m(r,i,o,u,l){for(let d=0;d<o.length;){const g=o[d++],_=o[d++],w=i[g],D=r.data[g];null!==D.setInput?D.setInput(w,l,u,_):w[_]=l}}function ra(r,i,o){const u=function(r,i){return rn(i[r])}(i,r);!function(r,i,o){Ht(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function Pp(r,i,o){let u=o?r.styles:null,l=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const _=i[g];"number"==typeof _?d=_:1==d?l=ne(l,_):2==d&&(u=ne(u,_+": "+i[++g]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}const oc=new En("INJECTOR",-1);class kp{get(i,o=so){if(o===so){const u=new Error(`NullInjectorError: No provider for ${G(i)}!`);throw u.name="NullInjectorError",u}return o}}const Qa=new En("Set Injector scope."),xh={},fT={};let Fp;function Lp(){return void 0===Fp&&(Fp=new kp),Fp}function bv(r,i=null,o=null,u){return new pI(r,o,i||Lp(),u)}class pI{constructor(i,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&$n(o,_=>this.processProvider(_,i,o)),$n([i],_=>this.processInjectorType(_,[],d)),this.records.set(oc,Ja(void 0,this));const g=this.records.get(Qa);this.scope=null!=g?g.value:null,this.source=l||("object"==typeof i?null:G(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=so,u=Pe.Default){this.assertNotDestroyed();const l=Gu(this),d=ui(void 0);try{if(!(u&Pe.SkipSelf)){let _=this.records.get(i);if(void 0===_){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof En)&&en(i);_=w&&this.injectableDefInScope(w)?Ja(Hm(i),xh):null,this.records.set(i,_)}if(null!=_)return this.hydrate(i,_)}return(u&Pe.Self?Lp():this.parent).get(i,o=u&Pe.Optional&&o===so?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[_r]=g[_r]||[]).unshift(G(i)),l)throw g;return Jn(g,i,"R3InjectorError",this.source)}throw g}finally{ui(d),Gu(l)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,l)=>i.push(G(l))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=se(i)))return!1;let l=Cn(i);const d=null==l&&i.ngModule||void 0,g=void 0===d?i:d,_=-1!==u.indexOf(g);if(void 0!==d&&(l=Cn(d)),null==l)return!1;if(null!=l.imports&&!_){let A;u.push(g);try{$n(l.imports,n=>{this.processInjectorType(n,o,u)&&(void 0===A&&(A=[]),A.push(n))})}finally{}if(void 0!==A)for(let n=0;n<A.length;n++){const{ngModule:e,providers:t}=A[n];$n(t,s=>this.processProvider(s,e,t||Te))}}this.injectorDefTypes.add(g);const w=sr(g)||(()=>new g);this.records.set(g,Ja(w,xh));const D=l.providers;if(null!=D&&!_){const A=i;$n(D,n=>this.processProvider(n,A,D))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let l=Nh(i=se(i))?i:se(i&&i.provide);const d=Rh(r=i)?Ja(void 0,r.useValue):Ja(function(r,i,o){let u;if(Nh(r)){const l=se(r);return sr(l)||Hm(l)}if(Rh(r))u=()=>se(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...qo(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Rn(se(r.useExisting));else{const l=se(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return sr(l)||Hm(l);u=()=>new l(...qo(r.deps))}return u}(r),xh);var r;if(Nh(i)||!0!==i.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=Ja(void 0,xh,!0),g.factory=()=>qo(g.multi),this.records.set(l,g)),l=i,g.multi.push(i)}this.records.set(l,d)}hydrate(i,o){return o.value===xh&&(o.value=fT,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=se(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Hm(r){const i=en(r),o=null!==i?i.factory:sr(r);if(null!==o)return o;if(r instanceof En)throw new Error(`Token ${G(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${G(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[yn]||r[Gr]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function Ja(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Rh(r){return null!==r&&"object"==typeof r&&Jd in r}function Nh(r){return"function"==typeof r}const ac=function(r,i,o){return function(r,i=null,o=null,u){const l=bv(r,i,o,u);return l._resolveInjectorDefTypes(),l}({name:o},i,r,o)};let Wt=(()=>{class r{static create(o,u){return Array.isArray(o)?ac(o,u,""):ac(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=so,r.NULL=new kp,r.\u0275prov=vt({token:r,providedIn:"any",factory:()=>Rn(oc)}),r.__NG_ELEMENT_ID__=-1,r})();function DT(r,i){Pu(El(r)[1],hn())}let js=null;function Rl(){if(!js){const r=Ve.Symbol;if(r&&r.iterator)js=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(js=u)}}}return js}function eu(r){return!!Bh(r)&&(Array.isArray(r)||!(r instanceof Map)&&Rl()in r)}function Bh(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function hr(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Km(r,i,o,u){const l=he();return hr(l,Ss(),i)&&(bt(),na(tn(),l,r,i,o,u)),Km}function Zm(r,i,o,u,l,d,g,_){const w=he(),D=bt(),A=r+20,n=D.firstCreatePass?function(r,i,o,u,l,d,g,_,w){const D=i.consts,A=Dh(i,r,4,g||null,kr(D,_));lr(i,o,A,kr(D,w)),Pu(i,A);const n=A.tViews=Tl(2,A,u,l,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,D);return null!==i.queries&&(i.queries.template(i,A),n.queries=i.queries.embeddedTView(A)),A}(A,D,w,i,o,u,l,d,g):D.data[A];Fr(n,!1);const e=w[11].createComment("");bp(D,w,e,n),Gt(e,w),Bm(w,w[A]=cI(e,w,e,n)),fa(n)&&Cl(D,w,n),null!=g&&uv(w,n,_)}function po(r,i=Pe.Default){const o=he();return null===o?Rn(r,i):ur(hn(),o,se(r),i)}function Qm(r,i,o){const u=he();return hr(u,Ss(),i)&&Bi(bt(),tn(),u,r,i,u[11],o,!1),Qm}function $l(r,i,o,u,l){const g=l?"class":"style";$m(r,o,i.inputs[g],g,u)}function go(r,i,o,u){const l=he(),d=bt(),g=20+r,_=l[11],w=l[g]=_h(_,i,tt.lFrame.currentNamespace),D=d.firstCreatePass?function(r,i,o,u,l,d,g){const _=i.consts,D=Dh(i,r,2,l,kr(_,d));return lr(i,o,D,kr(_,g)),null!==D.attrs&&Pp(D,D.attrs,!1),null!==D.mergedAttrs&&Pp(D,D.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,D),D}(g,d,l,0,i,o,u):d.data[g];Fr(D,!0);const A=D.mergedAttrs;null!==A&&no(_,w,A);const n=D.classes;null!==n&&wm(_,w,n);const e=D.styles;null!==e&&Lw(_,w,e),64!=(64&D.flags)&&bp(d,l,w,D),0===tt.lFrame.elementDepthCount&&Gt(w,l),tt.lFrame.elementDepthCount++,fa(D)&&(Cl(d,l,D),function(r,i,o){if(Uc(i)){const l=i.directiveEnd;for(let d=i.directiveStart;d<l;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,D,l)),null!==u&&uv(l,D)}function ru(){let r=hn();wa()?tt.lFrame.isParent=!1:(r=r.parent,Fr(r,!1));const i=r;tt.lFrame.elementDepthCount--;const o=bt();o.firstCreatePass&&(Pu(o,r),Uc(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&$l(o,i,he(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&$l(o,i,he(),i.stylesWithoutHost,!1)}function jh(r,i,o,u){go(r,i,o,u),ru()}function Gl(r){return!!r&&"function"==typeof r.then}function iu(r){return!!r&&"function"==typeof r.subscribe}const Jm=iu;function hc(r,i,o,u){const l=he(),d=bt(),g=hn();return function(r,i,o,u,l,d,g,_){const w=fa(u),A=r.firstCreatePass&&Ah(r),n=i[8],e=vv(i);let t=!0;if(3&u.type||_){const c=or(u,i),f=_?_(c):c,m=e.length,I=_?C=>_(rn(C[u.index])):u.index;if(Ht(o)){let C=null;if(!_&&w&&(C=function(r,i,o,u){const l=r.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const g=l[d];if(g===o&&l[d+1]===u){const _=i[7],w=l[d+2];return _.length>w?_[w]:null}"string"==typeof g&&(d+=2)}return null}(r,i,l,u.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=d,C.__ngLastListenerFn__=d,t=!1;else{d=ty(u,i,n,d,!1);const R=o.listen(f,l,d);e.push(d,R),A&&A.push(l,I,m,m+1)}}else d=ty(u,i,n,d,!0),f.addEventListener(l,d,g),e.push(d),A&&A.push(l,I,m,g)}else d=ty(u,i,n,d,!1);const s=u.outputs;let a;if(t&&null!==s&&(a=s[l])){const c=a.length;if(c)for(let f=0;f<c;f+=2){const M=i[a[f]][a[f+1]].subscribe(d),j=e.length;e.push(d,M),A&&A.push(l,u.index,j,-(j+1))}}}(d,l,l[11],g,r,i,!!o,u),hc}function $h(r,i,o,u){try{return!1!==o(u)}catch(l){return Ev(r,l),!1}}function ty(r,i,o,u,l){return function d(g){if(g===Function)return u;const _=2&r.flags?Kt(r.index,i):i;0==(32&i[2])&&sc(_);let w=$h(i,0,u,g),D=d.__ngNextListenerFn__;for(;D;)w=$h(i,0,D,g)&&w,D=D.__ngNextListenerFn__;return l&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function rE(r=1){return function(r){return(tt.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,tt.lFrame.contextLView))[8]}(r)}function fE(r,i=""){const o=he(),u=bt(),l=r+20,d=u.firstCreatePass?Dh(u,l,1,i,null):u.data[l],g=o[l]=function(r,i){return Ht(r)?r.createText(i):r.createTextNode(i)}(o[11],i);bp(u,o,g,d),Fr(d,!1)}function ay(r){return pE("",r,""),ay}function pE(r,i,o){const u=he(),l=function(r,i,o,u){return hr(r,Ss(),o)?i+xe(o)+u:mt}(u,r,i,o);return l!==mt&&ra(u,xn(),l),pE}function Ft(r,i,o){const u=he();return hr(u,Ss(),i)&&Bi(bt(),tn(),u,r,i,u[11],o,!0),Ft}const mc=void 0;var qn=["en",[["a","p"],["AM","PM"],mc],[["AM","PM"],mc,mc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mc,"{1} 'at' {0}",mc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let ou={};function on(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=ob(i);if(o)return o;const u=i.split("-")[0];if(o=ob(u),o)return o;if("en"===u)return qn;throw new Error(`Missing locale data for the locale "${r}".`)}function Xl(r){return on(r)[Ye.PluralCase]}function ob(r){return r in ou||(ou[r]=Ve.ng&&Ve.ng.common&&Ve.ng.common.locales&&Ve.ng.common.locales[r]),ou[r]}var Ye=(()=>((Ye=Ye||{})[Ye.LocaleId=0]="LocaleId",Ye[Ye.DayPeriodsFormat=1]="DayPeriodsFormat",Ye[Ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ye[Ye.DaysFormat=3]="DaysFormat",Ye[Ye.DaysStandalone=4]="DaysStandalone",Ye[Ye.MonthsFormat=5]="MonthsFormat",Ye[Ye.MonthsStandalone=6]="MonthsStandalone",Ye[Ye.Eras=7]="Eras",Ye[Ye.FirstDayOfWeek=8]="FirstDayOfWeek",Ye[Ye.WeekendRange=9]="WeekendRange",Ye[Ye.DateFormat=10]="DateFormat",Ye[Ye.TimeFormat=11]="TimeFormat",Ye[Ye.DateTimeFormat=12]="DateTimeFormat",Ye[Ye.NumberSymbols=13]="NumberSymbols",Ye[Ye.NumberFormats=14]="NumberFormats",Ye[Ye.CurrencyCode=15]="CurrencyCode",Ye[Ye.CurrencySymbol=16]="CurrencySymbol",Ye[Ye.CurrencyName=17]="CurrencyName",Ye[Ye.Currencies=18]="Currencies",Ye[Ye.Directionality=19]="Directionality",Ye[Ye.PluralCase=20]="PluralCase",Ye[Ye.ExtraData=21]="ExtraData",Ye))();const dy="en-US";let tg=dy;function py(r){bn(r,"Expected localeId to be defined"),"string"==typeof r&&(tg=r.toLowerCase().replace(/_/g,"-"))}class nf{}const Ey="ngComponent";class kb{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${G(r)}. Did you add it to @NgModule.entryComponents?`);return i[Ey]=r,i}(i)}}let rf=(()=>{class r{}return r.NULL=new kb,r})();function sf(...r){}function Ws(r,i){return new ua(or(r,i))}const mS=function(){return Ws(hn(),he())};let ua=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=mS,r})();function Fb(r){return r instanceof ua?r.nativeElement:r}class Eo{}let id=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>yS(),r})();const yS=function(){const r=he(),o=Kt(hn().index,r);return function(r){return r[11]}(Qi(o)?o:r)};let LE=(()=>{class r{}return r.\u0275prov=vt({token:r,providedIn:"root",factory:()=>null}),r})();class VE{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const sd=new VE("12.2.16");class ag{constructor(){}supports(i){return eu(i)}create(i){return new Hi(i)}}const by=(r,i)=>i;class Hi{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||by}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<UE(u,l,d)?o:u,_=UE(g,l,d),w=g.currentIndex;if(g===u)l--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)l++;else{d||(d=[]);const D=_-l,A=w-l;if(D!=A){for(let e=0;e<D;e++){const t=e<d.length?d[e]:d[e]=0,s=t+e;A<=s&&s<D&&(d[e]=t+1)}d[g.previousIndex]=A-D}}_!==w&&i(g,_,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!eu(i))throw new Error(`Error trying to diff '${G(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l,d,g,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let _=0;_<this.length;_++)d=i[_],g=this._trackByFn(_,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,_)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,_),u=!0),o=o._next}else l=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Rl()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,_=>{g=this._trackByFn(l,_),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,_,g,l)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,g,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,l){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,l)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,l)):i=this._addAfter(new Vb(o,u),d,l),i}_verifyReinsertion(i,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,l):i.currentIndex!=l&&(i.currentIndex=l,this._addToMoves(i,l)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const l=i._prevRemoved,d=i._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const l=null===o?this._itHead:o._next;return i._next=l,i._prev=o,null===l?this._itTail=i:l._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Cy),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cy),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class Vb{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dy{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Cy{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new Dy,this.map.set(o,u)),u.add(i)}get(i,o){const l=this.map.get(i);return l?l.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UE(r,i,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+i+l}class du{constructor(){}supports(i){return i instanceof Map||Bh(i)}create(){return new af}}class af{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Bh(i)))throw new Error(`Error trying to diff '${G(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const l=this._records.get(i);this._maybeAddToChanges(l,o);const d=l._prev,g=l._next;return d&&(d._next=g),g&&(g._prev=d),l._next=null,l._prev=null,l}const u=new Ub(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class Ub{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vc(){return new Ty([new ag])}let Ty=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||vc()),deps:[[r,new zo,new ks]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=vt({token:r,providedIn:"root",factory:vc}),r})();function BE(){return new wo([new du])}let wo=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||BE()),deps:[[r,new zo,new ks]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=vt({token:r,providedIn:"root",factory:BE}),r})();function ca(r,i,o,u,l=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(rn(d)),dn(d))for(let _=10;_<d.length;_++){const w=d[_],D=w[1].firstChild;null!==D&&ca(w[1],w,D,u)}const g=o.type;if(8&g)ca(r,i,o.child,u);else if(32&g){const _=T(o,i);let w;for(;w=_();)u.push(w)}else if(16&g){const _=jC(i,o);if(Array.isArray(_))u.push(..._);else{const w=Z(i[16]);ca(w[1],w,_,u,!0)}}o=l?o.projectionNext:o.next}return u}class od{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return ca(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(dn(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Ip(i,u),Ur(o,u))}this._attachedToViewContainer=!1}Ow(this._lView[1],this._lView)}onDestroy(i){km(this._lView[1],this._lView,null,i)}markForCheck(){sc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ya(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){ns(!0);try{Ya(r,i,o)}finally{ns(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Dp(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class Bb extends od{constructor(i){super(i),this._view=i}detectChanges(){_v(this._view)}checkNoChanges(){!function(r){ns(!0);try{_v(r)}finally{ns(!1)}}(this._view)}get context(){return null}}const ES=function(r){return function(r,i,o){if(Ji(r)&&!o){const u=Kt(r.index,i);return new od(u,u)}return 47&r.type?new od(i[16],i):null}(hn(),he(),16==(16&r))};let wS=(()=>{class r{}return r.__NG_ELEMENT_ID__=ES,r})();const IS=[new du],$b=new Ty([new ag]),ad=new wo(IS),Hb=function(){return Ec(hn(),he())};let cg=(()=>{class r{}return r.__NG_ELEMENT_ID__=Hb,r})();const Gb=cg,jE=class extends Gb{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Sp(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),xp(o,u,i),new od(u)}};function Ec(r,i){return 4&r.type?new jE(i,r,Ws(r,i)):null}class la{}class Ay{}const qb=function(){return Yb(hn(),he())};let xy=(()=>{class r{}return r.__NG_ELEMENT_ID__=qb,r})();const Kb=xy,Ry=class extends Kb{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Ws(this._hostTNode,this._hostLView)}get injector(){return new Kr(this._hostTNode,this._hostLView)}get parentInjector(){const i=mi(this._hostTNode,this._hostLView);if(Vu(i)){const o=Aa(i,this._hostLView),u=Sa(i);return new Kr(o[1].data[u+8],o)}return new Kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Zb(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const l=i.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(i,o,u,l,d){const g=u||this.parentInjector;if(!d&&null==i.ngModule&&g){const w=g.get(la,null);w&&(d=w)}const _=i.create(g,l,void 0,d);return this.insert(_.hostView,o),_}insert(i,o){const u=i._lView,l=u[1];if(dn(u[3])){const A=this.indexOf(i);if(-1!==A)this.detach(A);else{const n=u[3],e=new Ry(n,n[6],n[3]);e.detach(e.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=i),u<d-10?(i[4]=o[l],Na(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const _=i[19];null!==_&&_.insertView(r),i[2]|=128}(l,u,g,d);const _=za(d,g),w=u[11],D=Em(w,g[7]);return null!==D&&function(r,i,o,u,l,d){u[0]=l,u[6]=i,Dp(r,u,o,1,l,d)}(l,g[6],w,u,D,_),i.attachToViewContainerRef(),Na(Ny(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Zb(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Ip(this._lContainer,o);u&&(Ur(Ny(this._lContainer),o),Ow(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=Ip(this._lContainer,o);return u&&null!=Ur(Ny(this._lContainer),o)?new od(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function Zb(r){return r[8]}function Ny(r){return r[8]||(r[8]=[])}function Yb(r,i){let o;const u=i[r.index];if(dn(u))o=u;else{let l;if(8&r.type)l=rn(u);else{const d=i[11];l=d.createComment("");const g=or(r,i);Jo(d,Em(d,g),l,function(r,i){return Ht(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=cI(u,i,l,r),Bm(i,o)}return new Ry(o,r,i)}const vf={};class vD extends rf{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Sn(i);return new ID(o,this.ngModule)}}function By(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const h0=new En("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yp});class ID extends nf{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(KC).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return By(this.componentDef.inputs)}get outputs(){return By(this.componentDef.outputs)}create(i,o,u,l){const d=(l=l||this.ngModule)?function(r,i){return{get:(o,u,l)=>{const d=r.get(o,vf,l);return d!==vf||u===vf?d:i.get(o,u,l)}}}(i,l.injector):i,g=d.get(Eo,qc),_=d.get(LE,null),w=g.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",A=u?function(r,i,o){if(Ht(r))return r.selectRootElement(i,o===st.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(w,u,this.componentDef.encapsulation):_h(g.createRenderer(null,this.componentDef),D,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(D)),n=this.componentDef.onPush?576:528,e=function(r,i){return{components:[],scheduler:r||yp,clean:Ii,playerHandler:i||null,flags:0}}(),t=Tl(0,null,null,1,0,null,null,null,null,null),s=Sp(null,t,e,n,null,null,g,w,_,d);let a,c;Da(s);try{const f=function(r,i,o,u,l,d){const g=o[1];o[20]=r;const w=Dh(g,20,2,"#host",null),D=w.mergedAttrs=i.hostAttrs;null!==D&&(Pp(w,D,!0),null!==r&&(no(l,r,D),null!==w.classes&&wm(l,r,w.classes),null!==w.styles&&Lw(l,r,w.styles)));const A=u.createRenderer(r,i),n=Sp(o,Xw(i),null,i.onPush?64:16,o[20],w,u,A,d||null,null);return g.firstCreatePass&&(ar(os(w,o),g,i.type),oI(g,w),aI(w,o.length,1)),Bm(o,n),o[20]=n}(A,this.componentDef,s,g,w);if(A)if(u)no(w,A,["ng-version",sd.full]);else{const{attrs:m,classes:I}=function(r){const i=[],o=[];let u=1,l=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===l?""!==d&&i.push(d,r[++u]):8===l&&o.push(d);else{if(!lo(l))break;l=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);m&&no(w,A,m),I&&I.length>0&&wm(w,A,I.join(" "))}if(c=es(t,20),void 0!==o){const m=c.projection=[];for(let I=0;I<this.ngContentSelectors.length;I++){const C=o[I];m.push(null!=C?Array.from(C):null)}}a=function(r,i,o,u,l){const d=o[1],g=function(r,i,o){const u=hn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Lm(r,u,i,Dl(r,i,1,null),o));const l=io(i,r,u.directiveStart,u);Gt(l,i);const d=or(u,i);return d&&Gt(d,i),l}(d,o,i);if(u.components.push(g),r[8]=g,l&&l.forEach(w=>w(g,i)),i.contentQueries){const w=hn();i.contentQueries(1,g,w.directiveStart)}const _=hn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(As(_.index),Rp(o[1],_,0,_.directiveStart,_.directiveEnd,i),hv(i,g)),g}(f,this.componentDef,s,e,[DT]),xp(t,s,null)}finally{Ca()}return new p0(this.componentType,a,Ws(c,s),s,c)}}class p0 extends class{}{constructor(i,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new Bb(l),this.componentType=i}get injector(){return new Kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Ac=new Map;class DD extends la{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vD(this);const u=jn(i),l=i[$]||null;l&&py(l),this._bootstrapComponents=Vs(u.bootstrap),this._r3Injector=bv(i,o,[{provide:la,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],G(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Wt.THROW_IF_NOT_FOUND,u=Pe.Default){return i===Wt||i===la||i===oc?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class bg extends Ay{constructor(i){super(),this.moduleType=i,null!==jn(i)&&function(r){const i=new Set;!function o(u){const l=jn(u,!0),d=l.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${G(i)} vs ${G(i.name)}`)}(d,Ac.get(d),u),Ac.set(d,u));const g=Vs(l.imports);for(const _ of g)i.has(_)||(i.add(_),o(_))}(r)}(i)}create(i){return new DD(this.moduleType,i)}}function Gy(r){return i=>{setTimeout(r,void 0,i)}}const Io=class extends E.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var l,d,g;let _=i,w=o||(()=>null),D=u;if(i&&"object"==typeof i){const n=i;_=null===(l=n.next)||void 0===l?void 0:l.bind(n),w=null===(d=n.error)||void 0===d?void 0:d.bind(n),D=null===(g=n.complete)||void 0===g?void 0:g.bind(n)}this.__isAsync&&(w=Gy(w),_&&(_=Gy(_)),D&&(D=Gy(D)));const A=super.subscribe({next:_,error:w,complete:D});return i instanceof K.w&&i.add(A),A}};function JS(){return this._results[Rl()]()}class Ef{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Rl(),u=Ef.prototype;u[o]||(u[o]=JS)}get changes(){return this._changes||(this._changes=new Io)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const l=Yr(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let l=r[u],d=i[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class D0{constructor(i){this.queryList=i,this.matches=null}clone(){return new D0(this.queryList)}setDirty(){this.queryList.setDirty()}}class C0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);l.push(this.queries[g.indexInDeclarationView].clone())}return new C0(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==MD(i,o).matches&&this.queries[o].setDirty()}}class xD{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class qy{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new qy(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Dg{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Dg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(i,o,RD(o,d)),this.matchTNodeWithReadOption(i,o,$o(o,i,d,!1,!1))}else u===cg?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,$o(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===ua||l===xy||l===cg&&4&o.type)this.addMatch(o.index,-2);else{const d=$o(o,i,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function RD(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function S0(r,i,o,u){return-1===o?function(r,i){return 11&r.type?Ws(r,i):4&r.type?Ec(r,i):null}(i,r):-2===o?function(r,i,o){return o===ua?Ws(i,r):o===cg?Ec(i,r):o===xy?Yb(i,r):void 0}(r,i,u):io(r,r[1],o,i)}function Cg(r,i,o,u){const l=i[19].queries[u];if(null===l.matches){const d=r.data,g=o.matches,_=[];for(let w=0;w<g.length;w+=2){const D=g[w];_.push(D<0?null:S0(i,d[D],g[w+1],o.metadata.read))}l.matches=_}return l.matches}function Tg(r,i,o,u){const l=r.queries.getByIndex(o),d=l.matches;if(null!==d){const g=Cg(r,i,l,o);for(let _=0;_<d.length;_+=2){const w=d[_];if(w>0)u.push(g[_/2]);else{const D=d[_+1],A=i[-w];for(let n=10;n<A.length;n++){const e=A[n];e[17]===e[3]&&Tg(e[1],e,D,u)}if(null!==A[9]){const n=A[9];for(let e=0;e<n.length;e++){const t=n[e];Tg(t[1],t,D,u)}}}}}return u}function x0(r){const i=he(),o=bt(),u=Ru();Fd(u+1);const l=MD(o,u);if(r.dirty&&Du(i)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const d=l.crossesNgTemplate?Tg(o,i,u,[]):Cg(o,i,l,u);r.reset(d,Fb),r.notifyOnChanges()}return!0}return!1}function N0(r,i,o,u){const l=bt();if(l.firstCreatePass){const d=hn();(function(r,i,o){null===r.queries&&(r.queries=new qy),r.queries.track(new Dg(i,o))})(l,new xD(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(l,r),2==(2&o)&&(l.staticContentQueries=!0)}!function(r,i,o){const u=new Ef(4==(4&o));km(r,i,u,u.destroy),null===i[19]&&(i[19]=new C0),i[19].queries.push(new D0(u))}(l,he(),o)}function zy(){return r=he(),i=Ru(),r[19].queries[i].queryList;var r,i}function MD(r,i){return r.queries.getByIndex(i)}const Do=new En("Application Initializer");let da=(()=>{class r{constructor(o){this.appInits=o,this.resolve=sf,this.reject=sf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(Gl(d))o.push(d);else if(Jm(d)){const g=new Promise((_,w)=>{d.subscribe({complete:_,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Rn(Do,8))},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();const mu=new En("AppId"),zD={provide:mu,useFactory:function(){return`${t_()}${t_()}${t_()}`},deps:[]};function t_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Af=new En("Platform Initializer"),yu=new En("Platform ID"),KD=new En("appBootstrapListener");let ZD=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();const n_=new En("LocaleId"),K0=new En("DefaultCurrencyCode");class IA{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const r_=function(r){return new bg(r)},YD=r_,i_=function(r){return Promise.resolve(r_(r))},Z0=function(r){const i=r_(r),u=Vs(jn(r).declarations).reduce((l,d)=>{const g=Sn(d);return g&&l.push(new ID(g)),l},[]);return new IA(i,u)},xc=Z0,CA=function(r){return Promise.resolve(Z0(r))};let xg=(()=>{class r{constructor(){this.compileModuleSync=YD,this.compileModuleAsync=i_,this.compileModuleAndAllComponentsSync=xc,this.compileModuleAndAllComponentsAsync=CA}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();const AA=(()=>Promise.resolve(0))();function s_(r){"undefined"==typeof Zone?AA.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class ms{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let r=Ve.requestAnimationFrame,i=Ve.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Ve,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Rg(r),r.isCheckStableRunning=!0,o_(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Rg(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,g,_)=>{try{return XD(r),o.invokeTask(l,d,g,_)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),eC(r)}},onInvoke:(o,u,l,d,g,_,w)=>{try{return XD(r),o.invoke(l,d,g,_,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),eC(r)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,Rg(r),o_(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ms.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ms.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,l){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+l,i,xA,sf,sf);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const xA={};function o_(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Rg(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function XD(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function eC(r){r._nesting--,o_(r)}class NA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,l){return i.apply(o,u)}}let tC=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ms.assertNotInAngularZone(),s_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())s_(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)(Rn(ms))},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})(),nC=(()=>{class r{constructor(){this._applications=new Map,rC.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return rC.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();class MA{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function PA(r){rC=r}let rC=new MA,OA=!0,Y0=!1;function Q0(){return Y0=!0,OA}function kA(){if(Y0)throw new Error("Cannot enable prod mode after platform setup.");OA=!1}let ys;const X0=new En("AllowMultipleToken");class aC{constructor(i,o){this.name=i,this.token=o}}function _s(r,i,o=[]){const u=`Platform: ${i}`,l=new En(u);return(d=[])=>{let g=ew();if(!g||g.injector.get(X0,!1))if(r)r(o.concat(d).concat({provide:l,useValue:!0}));else{const _=o.concat(d).concat({provide:l,useValue:!0},{provide:Qa,useValue:"platform"});!function(r){if(ys&&!ys.destroyed&&!ys.injector.get(X0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ys=r.get(Nf);const i=r.get(Af,null);i&&i.forEach(o=>o())}(Wt.create({providers:_,name:u}))}return function(r){const i=ew();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(l)}}function ew(){return ys&&!ys.destroyed?ys:null}let Nf=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const _=function(r,i){let o;return o="noop"===r?new NA:("zone.js"===r?void 0:r)||new ms({enableLongStackTrace:Q0(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:ms,useValue:_}];return _.run(()=>{const D=Wt.create({providers:w,parent:this.injector,name:o.moduleType.name}),A=o.create(D),n=A.injector.get(Xu,null);if(!n)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const e=_.onError.subscribe({next:t=>{n.handleError(t)}});A.onDestroy(()=>{Rc(this._modules,A),e.unsubscribe()})}),function(r,i,o){try{const u=o();return Gl(u)?u.catch(l=>{throw i.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(n,_,()=>{const e=A.injector.get(da);return e.runInitializers(),e.donePromise.then(()=>(py(A.injector.get(n_,dy)||dy),this._moduleDoBootstrap(A),A))})})}bootstrapModule(o,u=[]){const l=uC({},u);return function(r,i,o){const u=new bg(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(Ed);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${G(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Rn(Wt))},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();function uC(r,i){return Array.isArray(i)?i.reduce(uC,r):Object.assign(Object.assign({},r),i)}let Ed=(()=>{class r{constructor(o,u,l,d,g){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),w=new P.y(D=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ms.assertNotInAngularZone(),s_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{A.unsubscribe(),n.unsubscribe()}});this.isStable=(0,ee.T)(_,w.pipe(r=>(0,oe.x)()(function(r,i){return function(u){let l;l="function"==typeof r?r:function(){return r};const d=Object.create(u,Y.N);return d.source=u,d.subjectFactory=l,d}}(Q)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof nf?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(r){return r.isBoundToModule}(l)?void 0:this._injector.get(la),_=l.create(Wt.NULL,[],u||l.selector,d),w=_.location.nativeElement,D=_.injector.get(tC,null),A=D&&_.injector.get(nC);return D&&A&&A.registerApplication(w,D),_.onDestroy(()=>{this.detachView(_.hostView),Rc(this.components,_),A&&A.unregisterApplication(w)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Rc(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(KD,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Rn(ms),Rn(Wt),Rn(Xu),Rn(rf),Rn(da))},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();function Rc(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class wd{}class $A{}const HA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let GA=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||HA}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),k(8255)(u).then(d=>d[l]).then(d=>nw(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),k(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[l+d]).then(g=>nw(g,u,l))}}return r.\u0275fac=function(o){return new(o||r)(Rn(xg),Rn($A,8))},r.\u0275prov=vt({token:r,factory:r.\u0275fac}),r})();function nw(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const Co=function(r){return null},QA=_s(null,"core",[{provide:yu,useValue:"unknown"},{provide:Nf,deps:[Wt]},{provide:nC,deps:[]},{provide:ZD,deps:[]}]),gC=[{provide:Ed,useClass:Ed,deps:[ms,Wt,Xu,rf,da]},{provide:h0,deps:[ms],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:da,useClass:da,deps:[[new ks,Do]]},{provide:xg,useClass:xg,deps:[]},zD,{provide:Ty,useFactory:function(){return $b},deps:[]},{provide:wo,useFactory:function(){return ad},deps:[]},{provide:n_,useFactory:function(r){return py(r=r||"undefined"!=typeof $localize&&$localize.locale||dy),r},deps:[[new Wu(n_),new ks,new zo]]},{provide:K0,useValue:"USD"}];let lw=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Rn(Ed))},r.\u0275mod=ot({type:r}),r.\u0275inj=xi({providers:gC}),r})()},8939:(We,de,k)=>{"use strict";k.d(de,{hO:()=>G,xv:()=>Q,Dh:()=>oe,GT:()=>X,cc:()=>ne,on:()=>O,pX:()=>Y});var E=k(3018),K=k(7841),P=k(7247);We=k.hmd(We);const ee=["ngOnDestroy"],Y=(ve,De,me,Fe={})=>new Proxy(ve,{get:(qe,xe)=>me.runOutsideAngular(()=>{var St;if(ve[xe])return(null===(St=null==Fe?void 0:Fe.spy)||void 0===St?void 0:St.get)&&Fe.spy.get(xe,ve[xe]),ve[xe];if(ee.indexOf(xe)>-1)return()=>{};const yt=De.toPromise().then(un=>{const _t=un&&un[xe];return"function"==typeof _t?_t.bind(un):_t&&_t.then?_t.then(Dt=>me.run(()=>Dt)):me.run(()=>_t)});return new Proxy(()=>{},{get:(un,_t)=>yt[_t],apply:(un,_t,Dt)=>yt.then(rt=>{var it;const Lt=rt&&rt(...Dt);return(null===(it=null==Fe?void 0:Fe.spy)||void 0===it?void 0:it.apply)&&Fe.spy.apply(xe,Dt,Lt),Lt})})})}),X=(ve,De)=>{De.forEach(me=>{Object.getOwnPropertyNames(me.prototype||me).forEach(Fe=>{Object.defineProperty(ve.prototype,Fe,Object.getOwnPropertyDescriptor(me.prototype||me,Fe))})})};class le{constructor(De){return De}}const oe=new E.OlP("angularfire2.app.options"),Q=new E.OlP("angularfire2.app.name");function O(ve,De,me){const qe="object"==typeof me&&me||{};qe.name=qe.name||"string"==typeof me&&me||"[DEFAULT]";const St=K.Z.apps.filter(yt=>yt&&yt.name===qe.name)[0]||De.runOutsideAngular(()=>K.Z.initializeApp(ve,qe));try{JSON.stringify(ve)!==JSON.stringify(St.options)&&L("error",`${St.name} Firebase App already initialized with different options${We.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(yt){}return new le(St)}const L=(ve,...De)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[ve](...De)},q={provide:le,useFactory:O,deps:[oe,E.R0b,[new E.FiY,Q]]};let G=(()=>{class ve{constructor(me){K.Z.registerVersion("angularfire",P.q4.full,"core"),K.Z.registerVersion("angularfire",P.q4.full,"app-compat"),K.Z.registerVersion("angular",E.q4F.full,me.toString())}static initializeApp(me,Fe){return{ngModule:ve,providers:[{provide:oe,useValue:me},{provide:Q,useValue:Fe}]}}}return ve.\u0275fac=function(me){return new(me||ve)(E.LFG(E.Lbi))},ve.\u0275mod=E.oAB({type:ve}),ve.\u0275inj=E.cJS({providers:[q]}),ve})();function ne(ve,De,me,Fe,qe){const[,xe,St]=globalThis.\u0275AngularfireInstanceCache.find(yt=>yt[0]===ve)||[];if(xe)return function(ve,De){try{return ve.toString()===De.toString()}catch(me){return ve===De}}(qe,St)||(se("error",`${De} was already initialized on the ${me} Firebase App with different settings.${ce?" You may need to reload as Firebase is not HMR aware.":""}`),se("warn",{is:qe,was:St})),xe;{const yt=Fe();return globalThis.\u0275AngularfireInstanceCache.push([ve,yt,qe]),yt}}const ce=!!We.hot,se=(ve,...De)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[ve](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7247:(We,de,k)=>{"use strict";k.d(de,{q4:()=>zg,iC:()=>ki,HU:()=>Yr,vb:()=>Go,JM:()=>kn});var E=k(3018),K=k(2329),P=k(8239),ee=k(8026),Y=k(3854),X=k(3910),le=k(5422);const oe="@firebase/installations",Q="0.5.8",L=`w:${Q}`,q="FIS_v2",ve=new Y.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(b){return b instanceof Y.ZR&&b.code.includes("request-failed")}function me({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Fe(b){return{token:b.token,requestStatus:2,expiresIn:Dt(b.expiresIn),creationTime:Date.now()}}function qe(b,S){return xe.apply(this,arguments)}function xe(){return(xe=(0,P.Z)(function*(b,S){const F=(yield S.json()).error;return ve.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function St({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function yt(b,{refreshToken:S}){const N=St(b);return N.append("Authorization",function(b){return`${q} ${b}`}(S)),N}function un(b){return _t.apply(this,arguments)}function _t(){return(_t=(0,P.Z)(function*(b){const S=yield b();return S.status>=500&&S.status<600?b():S})).apply(this,arguments)}function Dt(b){return Number(b.replace("s","000"))}function it(b,S){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:S},{fid:N}){const F=me(b),H=St(b),J=S.getImmediate({optional:!0});if(J){const Qe=yield J.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Me={method:"POST",headers:H,body:JSON.stringify({fid:N,authVersion:q,appId:b.appId,sdkVersion:L})},Ke=yield un(()=>fetch(F,Me));if(Ke.ok){const Qe=yield Ke.json();return{fid:Qe.fid||N,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:Fe(Qe.authToken)}}throw yield qe("Create Installation",Ke)})).apply(this,arguments)}function je(b){return new Promise(S=>{setTimeout(S,b)})}const kc=/^[cdef][\w-]{21}$/;function _u(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const N=function(b){return function(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return kc.test(N)?N:""}catch(b){return""}}function cn(b){return`${b.appName}!${b.appId}`}const vs=new Map;function ha(b,S){const N=cn(b);Nt(N,S),function(b,S){const N=(!xr&&"BroadcastChannel"in self&&(xr=new BroadcastChannel("[Firebase] FID Change"),xr.onmessage=b=>{Nt(b.data.key,b.data.fid)}),xr);N&&N.postMessage({key:b,fid:S}),0===vs.size&&xr&&(xr.close(),xr=null)}(N,S)}function Nt(b,S){const N=vs.get(b);if(N)for(const F of N)F(S)}let xr=null;const en="firebase-installations-store";let ai=null;function Ee(){return ai||(ai=(0,Y.X3)("firebase-installations-database",1,(b,S)=>{switch(S){case 0:b.createObjectStore(en)}})),ai}function Nn(b,S){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)(function*(b,S){const N=cn(b),H=(yield Ee()).transaction(en,"readwrite"),J=H.objectStore(en),_e=yield J.get(N);return yield J.put(S,N),yield H.complete,(!_e||_e.fid!==S.fid)&&ha(b,S.fid),S})).apply(this,arguments)}function yn(b){return nn.apply(this,arguments)}function nn(){return(nn=(0,P.Z)(function*(b){const S=cn(b),F=(yield Ee()).transaction(en,"readwrite");yield F.objectStore(en).delete(S),yield F.complete})).apply(this,arguments)}function Gr(b,S){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,P.Z)(function*(b,S){const N=cn(b),H=(yield Ee()).transaction(en,"readwrite"),J=H.objectStore(en),_e=yield J.get(N),Me=S(_e);return void 0===Me?yield J.delete(N):yield J.put(Me,N),yield H.complete,Me&&(!_e||_e.fid!==Me.fid)&&ha(b,Me.fid),Me})).apply(this,arguments)}function Pe(b){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(b){let S;const N=yield Gr(b.appConfig,F=>{const H=Ri(F),J=ui(b,H);return S=J.registrationPromise,J.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function Ri(b){return Nr(b||{fid:_u(),registrationStatus:0})}function ui(b,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ve.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:N,registrationPromise:function(b,S){return He.apply(this,arguments)}(b,N)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Ge(b)}:{installationEntry:S}}function He(){return(He=(0,P.Z)(function*(b,S){try{const N=yield it(b,S);return Nn(b.appConfig,N)}catch(N){throw De(N)&&409===N.customData.serverCode?yield yn(b.appConfig):yield Nn(b.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Ge(b){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,P.Z)(function*(b){let S=yield Es(b.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield Es(b.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield Pe(b);return F||N}return S})).apply(this,arguments)}function Es(b){return Gr(b,S=>{if(!S)throw ve.create("installation-not-found");return Nr(S)})}function Nr(b){return function(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Pt(b,S){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:S},N){const F=Qt(b,N),H=yt(b,N),J=S.getImmediate({optional:!0});if(J){const Qe=yield J.getHeartbeatsHeader();Qe&&H.append("x-firebase-client",Qe)}const Me={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:L,appId:b.appId}})},Ke=yield un(()=>fetch(F,Me));if(Ke.ok)return Fe(yield Ke.json());throw yield qe("Generate Auth Token",Ke)})).apply(this,arguments)}function Qt(b,{fid:S}){return`${me(b)}/${S}/authTokens:generate`}function Mr(b){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(b,S=!1){let N;const F=yield Gr(b.appConfig,J=>{if(!Mt(J))throw ve.create("not-registered");const _e=J.authToken;if(!S&&B(_e))return J;if(1===_e.requestStatus)return N=Oe(b,S),J;{if(!navigator.onLine)throw ve.create("app-offline");const Me=$(J);return N=Te(b,Me),Me}});return N?yield N:F.authToken})).apply(this,arguments)}function Oe(b,S){return fe.apply(this,arguments)}function fe(){return(fe=(0,P.Z)(function*(b,S){let N=yield Be(b.appConfig);for(;1===N.authToken.requestStatus;)yield je(100),N=yield Be(b.appConfig);const F=N.authToken;return 0===F.requestStatus?Mr(b,S):F})).apply(this,arguments)}function Be(b){return Gr(b,S=>{if(!Mt(S))throw ve.create("not-registered");return function(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Te(b,S){return At.apply(this,arguments)}function At(){return(At=(0,P.Z)(function*(b,S){try{const N=yield Pt(b,S),F=Object.assign(Object.assign({},S),{authToken:N});return yield Nn(b.appConfig,F),N}catch(N){if(!De(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Nn(b.appConfig,F)}else yield yn(b.appConfig);throw N}})).apply(this,arguments)}function Mt(b){return void 0!==b&&2===b.registrationStatus}function B(b){return 2===b.requestStatus&&!function(b){const S=Date.now();return S<b.creationTime||b.creationTime+b.expiresIn<S+36e5}(b)}function $(b){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:S})}function Ce(){return(Ce=(0,P.Z)(function*(b){const S=b,{installationEntry:N,registrationPromise:F}=yield Pe(S);return F?F.catch(console.error):Mr(S).catch(console.error),N.fid})).apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(b,S=!1){const N=b;return yield Kn(N),(yield Mr(N,S)).token})).apply(this,arguments)}function Kn(b){return ln.apply(this,arguments)}function ln(){return(ln=(0,P.Z)(function*(b){const{registrationPromise:S}=yield Pe(b);S&&(yield S)})).apply(this,arguments)}function Zi(b){return ve.create("missing-app-config-values",{valueName:b})}const jn="installations";(0,ee._registerComponent)(new X.wA(jn,b=>{const S=b.getProvider("app").getImmediate();return{app:S,appConfig:function(b){if(!b||!b.options)throw Zi("App Configuration");if(!b.name)throw Zi("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!b.options[N])throw Zi(N);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(S),heartbeatServiceProvider:(0,ee._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ee._registerComponent)(new X.wA("installations-internal",b=>{const S=b.getProvider("app").getImmediate(),N=(0,ee._getProvider)(S,jn).getImmediate();return{getId:()=>function(b){return Ce.apply(this,arguments)}(N),getToken:H=>function(b){return Vt.apply(this,arguments)}(N,H)}},"PRIVATE")),(0,ee.registerVersion)(oe,Q),(0,ee.registerVersion)(oe,Q,"esm2017");const jt="@firebase/remote-config",pt=new Y.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yn{constructor(S,N,F,H){this.client=S,this.storage=N,this.storageCache=F,this.logger=H}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,H=F<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${H}.`),H}fetch(S){var N=this;return(0,P.Z)(function*(){const[F,H]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(H&&N.isCachedDataFresh(S.cacheMaxAgeMillis,F))return H;S.eTag=H&&H.eTag;const J=yield N.client.fetch(S),_e=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&_e.push(N.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(_e),J})()}}function Cd(b=navigator){return b.languages&&b.languages[0]||b.language}class Qi{constructor(S,N,F,H,J,_e){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=F,this.projectId=H,this.apiKey=J,this.appId=_e}fetch(S){var N=this;return(0,P.Z)(function*(){const[F,H]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Me={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ke={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:H,app_id:N.appId,language_code:Cd()},Qe={method:"POST",headers:Me,body:JSON.stringify(Ke)},kt=fetch(_e,Qe),Je=new Promise((_r,Wo)=>{S.signal.addEventListener(()=>{const Pa=new Error("The operation was aborted.");Pa.name="AbortError",Wo(Pa)})});let yr;try{yield Promise.race([kt,Je]),yr=yield kt}catch(_r){let Wo="fetch-client-network";throw"AbortError"===_r.name&&(Wo="fetch-timeout"),pt.create(Wo,{originalErrorMessage:_r.message})}let sn=yr.status;const Ma=yr.headers.get("ETag")||void 0;let so,oo;if(200===yr.status){let _r;try{_r=yield yr.json()}catch(Wo){throw pt.create("fetch-client-parse",{originalErrorMessage:Wo.message})}so=_r.entries,oo=_r.state}if("INSTANCE_STATE_UNSPECIFIED"===oo?sn=500:"NO_CHANGE"===oo?sn=304:("NO_TEMPLATE"===oo||"EMPTY_CONFIG"===oo)&&(so={}),304!==sn&&200!==sn)throw pt.create("fetch-status",{httpStatus:sn});return{status:sn,eTag:Ma,config:so}})()}}class Ji{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,P.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,F)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:F}){var H=this;return(0,P.Z)(function*(){yield function(b,S){return new Promise((N,F)=>{const H=Math.max(S-Date.now(),0),J=setTimeout(N,H);b.addEventListener(()=>{clearTimeout(J),F(pt.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const J=yield H.client.fetch(S);return yield H.storage.deleteThrottleMetadata(),J}catch(J){if(!function(b){if(!(b instanceof Y.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(J))throw J;const _e={throttleEndTimeMillis:Date.now()+(0,Y.$s)(F),backoffCount:F+1};return yield H.storage.setThrottleMetadata(_e),H.attemptFetch(S,_e)}})()}}class Td{constructor(S,N,F,H,J){this.app=S,this._client=N,this._storageCache=F,this._storage=H,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pa(b,S){const N=b.target.error||void 0;return pt.create(S,{originalErrorMessage:N&&N.message})}const Zs="app_namespace_store";class jc{constructor(S,N,F,H=function(){return new Promise((b,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{S(pa(F,"storage-open"))},N.onsuccess=F=>{b(F.target.result)},N.onupgradeneeded=F=>{const H=F.target.result;switch(F.oldVersion){case 0:H.createObjectStore(Zs,{keyPath:"compositeKey"})}}}catch(N){S(pt.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=F,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((H,J)=>{const Me=F.transaction([Zs],"readonly").objectStore(Zs),Ke=N.createCompositeKey(S);try{const Qe=Me.get(Ke);Qe.onerror=kt=>{J(pa(kt,"storage-get"))},Qe.onsuccess=kt=>{const Je=kt.target.result;H(Je?Je.value:void 0)}}catch(Qe){J(pt.create("storage-get",{originalErrorMessage:Qe&&Qe.message}))}})})()}set(S,N){var F=this;return(0,P.Z)(function*(){const H=yield F.openDbPromise;return new Promise((J,_e)=>{const Ke=H.transaction([Zs],"readwrite").objectStore(Zs),Qe=F.createCompositeKey(S);try{const kt=Ke.put({compositeKey:Qe,value:N});kt.onerror=Je=>{_e(pa(Je,"storage-set"))},kt.onsuccess=()=>{J()}}catch(kt){_e(pt.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(S){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((H,J)=>{const Me=F.transaction([Zs],"readwrite").objectStore(Zs),Ke=N.createCompositeKey(S);try{const Qe=Me.delete(Ke);Qe.onerror=kt=>{J(pa(kt,"storage-delete"))},Qe.onsuccess=()=>{H()}}catch(Qe){J(pt.create("storage-delete",{originalErrorMessage:Qe&&Qe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ad{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,P.Z)(function*(){const N=S.storage.getLastFetchStatus(),F=S.storage.getLastSuccessfulFetchTimestampMillis(),H=S.storage.getActiveConfig(),J=yield N;J&&(S.lastFetchStatus=J);const _e=yield F;_e&&(S.lastSuccessfulFetchTimestampMillis=_e);const Me=yield H;Me&&(S.activeConfig=Me)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Rd(){return $c.apply(this,arguments)}function $c(){return($c=(0,P.Z)(function*(){if(!(0,Y.hl)())return!1;try{return yield(0,Y.eu)()}catch(b){return!1}})).apply(this,arguments)}(0,ee._registerComponent)(new X.wA("remote-config",function(S,{instanceIdentifier:N}){const F=S.getProvider("app").getImmediate(),H=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw pt.create("registration-window");if(!(0,Y.hl)())throw pt.create("indexed-db-unavailable");const{projectId:J,apiKey:_e,appId:Me}=F.options;if(!J)throw pt.create("registration-project-id");if(!_e)throw pt.create("registration-api-key");if(!Me)throw pt.create("registration-app-id");const Ke=new jc(Me,F.name,N=N||"firebase"),Qe=new Ad(Ke),kt=new le.Yd(jt);kt.logLevel=le.in.ERROR;const Je=new Qi(H,ee.SDK_VERSION,N,J,_e,Me),yr=new Ji(Je,Ke),sn=new Yn(yr,Ke,Qe,kt),Ma=new Td(F,sn,Qe,Ke,kt);return function(b){const S=(0,Y.m9)(b);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ma),Ma},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(jt,"0.3.7"),(0,ee.registerVersion)(jt,"0.3.7","esm2017");const Nd="/firebase-messaging-sw.js",$g="/firebase-cloud-messaging-push-scope",Hc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ga="google.c.a.c_id",Pd="google.c.a.c_l",vu="google.c.a.ts",Eu="google.c.a.e";var Ys=(()=>{return(b=Ys||(Ys={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Ys;var b})();function sr(b){const S=new Uint8Array(b);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hi(b){const N=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),H=new Uint8Array(F.length);for(let J=0;J<F.length;++J)H[J]=F.charCodeAt(J);return H}const wu="fcm_token_details_db",$f="fcm_token_object_Store";function Od(b){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(wu))return null;let S=null;return(yield(0,Y.X3)(wu,5,function(){var F=(0,P.Z)(function*(H,J,_e,Me){var Ke;if(J<2||!H.objectStoreNames.contains($f))return;const Qe=Me.objectStore($f),kt=yield Qe.index("fcmSenderId").get(b);if(yield Qe.clear(),kt)if(2===J){const Je=kt;if(!Je.auth||!Je.p256dh||!Je.endpoint)return;S={token:Je.fcmToken,createTime:null!==(Ke=Je.createTime)&&void 0!==Ke?Ke:Date.now(),subscriptionOptions:{auth:Je.auth,p256dh:Je.p256dh,endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:"string"==typeof Je.vapidKey?Je.vapidKey:sr(Je.vapidKey)}}}else if(3===J){const Je=kt;S={token:Je.fcmToken,createTime:Je.createTime,subscriptionOptions:{auth:sr(Je.auth),p256dh:sr(Je.p256dh),endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:sr(Je.vapidKey)}}}else if(4===J){const Je=kt;S={token:Je.fcmToken,createTime:Je.createTime,subscriptionOptions:{auth:sr(Je.auth),p256dh:sr(Je.p256dh),endpoint:Je.endpoint,swScope:Je.swScope,vapidKey:sr(Je.vapidKey)}}}});return function(H,J,_e,Me){return F.apply(this,arguments)}}())).close(),yield(0,Y.Lj)(wu),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),ya(S)?S:null})).apply(this,arguments)}function ya(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:S}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Xi="firebase-messaging-store";let Mn=null;function bu(){return Mn||(Mn=(0,Y.X3)("firebase-messaging-database",1,(b,S)=>{switch(S){case 0:b.createObjectStore(Xi)}})),Mn}function Wc(b){return fi.apply(this,arguments)}function fi(){return(fi=(0,P.Z)(function*(b){const S=Ds(b),F=yield(yield bu()).transaction(Xi).objectStore(Xi).get(S);if(F)return F;{const H=yield Od(b.appConfig.senderId);if(H)return yield Mo(b,H),H}})).apply(this,arguments)}function Mo(b,S){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,P.Z)(function*(b,S){const N=Ds(b),H=(yield bu()).transaction(Xi,"readwrite");return yield H.objectStore(Xi).put(S,N),yield H.complete,S})).apply(this,arguments)}function pi(b){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,P.Z)(function*(b){const S=Ds(b),F=(yield bu()).transaction(Xi,"readwrite");yield F.objectStore(Xi).delete(S),yield F.complete})).apply(this,arguments)}function Ds({appConfig:b}){return b.appId}const Fn=new Y.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rn(b,S){return zc.apply(this,arguments)}function zc(){return(zc=(0,P.Z)(function*(b,S){const N=yield ts(b),F=Du(S),H={method:"POST",headers:N,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(es(b.appConfig),H)).json()}catch(_e){throw Fn.create("token-subscribe-failed",{errorInfo:_e})}if(J.error)throw Fn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Fn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function _a(b,S){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(b,S){const N=yield ts(b),F=Du(S.subscriptionOptions),H={method:"PATCH",headers:N,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(`${es(b.appConfig)}/${S.token}`,H)).json()}catch(_e){throw Fn.create("token-update-failed",{errorInfo:_e})}if(J.error)throw Fn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Fn.create("token-update-no-token");return J.token})).apply(this,arguments)}function or(b,S){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,P.Z)(function*(b,S){const F={method:"DELETE",headers:yield ts(b)};try{const J=yield(yield fetch(`${es(b.appConfig)}/${S}`,F)).json();if(J.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(H){throw Fn.create("token-unsubscribe-failed",{errorInfo:H})}})).apply(this,arguments)}function es({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function ts(b){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,P.Z)(function*({appConfig:b,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Du({p256dh:b,auth:S,endpoint:N,vapidKey:F}){const H={web:{endpoint:N,auth:S,p256dh:b}};return F!==Hc&&(H.web.applicationPubKey=F),H}const Zc=6048e5;function Cu(b){return kr.apply(this,arguments)}function kr(){return(kr=(0,P.Z)(function*(b){const S=yield ko(b.swRegistration,b.vapidKey),N={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:S.endpoint,auth:sr(S.getKey("auth")),p256dh:sr(S.getKey("p256dh"))},F=yield Wc(b.firebaseDependencies);if(F){if(Fo(F.subscriptionOptions,N))return Date.now()>=F.createTime+Zc?tt(b,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield or(b.firebaseDependencies,F.token)}catch(H){console.warn(H)}return Cs(b.firebaseDependencies,N)}return Cs(b.firebaseDependencies,N)})).apply(this,arguments)}function Tu(b){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(b){const S=yield Wc(b.firebaseDependencies);S&&(yield or(b.firebaseDependencies,S.token),yield pi(b.firebaseDependencies));const N=yield b.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function tt(b,S){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(b,S){try{const N=yield _a(b.firebaseDependencies,S),F=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield Mo(b.firebaseDependencies,F),N}catch(N){throw yield Tu(b),N}})).apply(this,arguments)}function Cs(b,S){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*(b,S){const F={token:yield rn(b,S),createTime:Date.now(),subscriptionOptions:S};return yield Mo(b,F),F.token})).apply(this,arguments)}function ko(b,S){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(b,S){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hi(S)})})).apply(this,arguments)}function Fo(b,S){return S.vapidKey===b.vapidKey&&S.endpoint===b.endpoint&&S.auth===b.auth&&S.p256dh===b.p256dh}function va(b){const S={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function(b,S){if(!S.notification)return;b.notification={};const N=S.notification.title;N&&(b.notification.title=N);const F=S.notification.body;F&&(b.notification.body=F);const H=S.notification.image;H&&(b.notification.image=H)}(S,b),function(b,S){!S.data||(b.data=S.data)}(S,b),function(b,S){if(!S.fcmOptions)return;b.fcmOptions={};const N=S.fcmOptions.link;N&&(b.fcmOptions.link=N);const F=S.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(S,b),S}function hn(b){return"object"==typeof b&&!!b&&ga in b}function Au(b,S){const N=[];for(let F=0;F<b.length;F++)N.push(b.charAt(F)),F<S.length&&N.push(S.charAt(F));return N.join("")}function Fr(b){return Fn.create("missing-app-config-values",{valueName:b})}Au("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Au("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wa{constructor(S,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function(b){if(!b||!b.options)throw Fr("App Configuration Object");if(!b.name)throw Fr("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=b;for(const F of S)if(!N[F])throw Fr(F);return{appName:b.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:H,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function eo(b){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Nd,{scope:$g}),b.swRegistration.update().catch(()=>{})}catch(S){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Hg(b,S){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,P.Z)(function*(b,S){if(!S&&!b.swRegistration&&(yield eo(b)),S||!b.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");b.swRegistration=S}})).apply(this,arguments)}function ns(b,S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,P.Z)(function*(b,S){S?b.vapidKey=S:b.vapidKey||(b.vapidKey=Hc)})).apply(this,arguments)}function ba(){return(ba=(0,P.Z)(function*(b,S){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield ns(b,null==S?void 0:S.vapidKey),yield Hg(b,null==S?void 0:S.serviceWorkerRegistration),Cu(b)})).apply(this,arguments)}function Ss(b,S,N){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(b,S,N){const F=Yc(S);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[ga],message_name:N[Pd],message_time:N[vu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yc(b){switch(b){case Ys.NOTIFICATION_CLICKED:return"notification_open";case Ys.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function to(){return(to=(0,P.Z)(function*(b,S){const N=S.data;if(!N.isFirebaseMessaging)return;b.onMessageHandler&&N.messageType===Ys.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(va(N)):b.onMessageHandler.next(va(N)));const F=N.data;hn(F)&&"1"===F[Eu]&&(yield Ss(b,N.messageType,F))})).apply(this,arguments)}const xu="@firebase/messaging";function Nu(){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,P.Z)(function*(){try{yield(0,Y.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,Y.hl)()&&(0,Y.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ee._registerComponent)(new X.wA("messaging",b=>{const S=new wa(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function(b,S){return to.apply(this,arguments)}(S,N)),S},"PUBLIC")),(0,ee._registerComponent)(new X.wA("messaging-internal",b=>{const S=b.getProvider("messaging").getImmediate();return{getToken:F=>function(b,S){return ba.apply(this,arguments)}(S,F)}},"PRIVATE")),(0,ee.registerVersion)(xu,"0.9.12"),(0,ee.registerVersion)(xu,"0.9.12","esm2017");const xn="analytics",As="firebase_id",el="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mu="https://www.googletagmanager.com/gtag/js",Pn=new le.Yd("@firebase/analytics");function Bd(b){return Promise.all(b.map(S=>S.catch(N=>N)))}function tl(b,S){const N=document.createElement("script");N.src=`${Mu}?l=${b}&id=${S}`,N.async=!0,document.head.appendChild(N)}function Ou(b,S,N,F,H,J){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,P.Z)(function*(b,S,N,F,H,J){const _e=F[H];try{if(_e)yield S[_e];else{const Ke=(yield Bd(N)).find(Qe=>Qe.measurementId===H);Ke&&(yield S[Ke.appId])}}catch(Me){Pn.error(Me)}b("config",H,J)})).apply(this,arguments)}function ku(b,S,N,F,H){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,P.Z)(function*(b,S,N,F,H){try{let J=[];if(H&&H.send_to){let _e=H.send_to;Array.isArray(_e)||(_e=[_e]);const Me=yield Bd(N);for(const Ke of _e){const Qe=Me.find(Je=>Je.measurementId===Ke),kt=Qe&&S[Qe.appId];if(!kt){J=[];break}J.push(kt)}}0===J.length&&(J=Object.values(S)),yield Promise.all(J),b("event",F,H||{})}catch(J){Pn.error(J)}})).apply(this,arguments)}function Ta(){const b=window.document.getElementsByTagName("script");for(const S of Object.values(b))if(S.src&&S.src.includes(Mu))return S;return null}const Lr=new Y.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xs=new class{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function I_(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function b_(b){return no.apply(this,arguments)}function no(){return(no=(0,P.Z)(function*(b){var S;const{appId:N,apiKey:F}=b,H={method:"GET",headers:I_(F)},J=el.replace("{app-id}",N),_e=yield fetch(J,H);if(200!==_e.status&&304!==_e.status){let Me="";try{const Ke=yield _e.json();(null===(S=Ke.error)||void 0===S?void 0:S.message)&&(Me=Ke.error.message)}catch(Ke){}throw Lr.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Me})}return _e.json()})).apply(this,arguments)}function $d(b){return nl.apply(this,arguments)}function nl(){return(nl=(0,P.Z)(function*(b,S=xs,N){const{appId:F,apiKey:H,measurementId:J}=b.options;if(!F)throw Lr.create("no-app-id");if(!H){if(J)return{measurementId:J,appId:F};throw Lr.create("no-api-key")}const _e=S.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new Wf;return setTimeout((0,P.Z)(function*(){Me.abort()}),void 0!==N?N:6e4),jo({appId:F,apiKey:H,measurementId:J},_e,Me,S)})).apply(this,arguments)}function jo(b,S,N){return is.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(b,{throttleEndTimeMillis:S,backoffCount:N},F,H=xs){const{appId:J,measurementId:_e}=b;try{yield Vu(F,S)}catch(Me){if(_e)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:J,measurementId:_e};throw Me}try{const Me=yield b_(b);return H.deleteThrottleMetadata(J),Me}catch(Me){if(!Sa(Me)){if(H.deleteThrottleMetadata(J),_e)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Me.message}]`),{appId:J,measurementId:_e};throw Me}const Ke=503===Number(Me.customData.httpStatus)?(0,Y.$s)(N,H.intervalMillis,30):(0,Y.$s)(N,H.intervalMillis),Qe={throttleEndTimeMillis:Date.now()+Ke,backoffCount:N+1};return H.setThrottleMetadata(J,Qe),Pn.debug(`Calling attemptFetch again in ${Ke} millis`),jo(b,Qe,F,H)}})).apply(this,arguments)}function Vu(b,S){return new Promise((N,F)=>{const H=Math.max(S-Date.now(),0),J=setTimeout(N,H);b.addEventListener(()=>{clearTimeout(J),F(Lr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Sa(b){if(!(b instanceof Y.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Wf{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Aa(){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,P.Z)(function*(){if(!(0,Y.hl)())return Pn.warn(Lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Y.eu)()}catch(b){return Pn.warn(Lr.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Bu(){return(Bu=(0,P.Z)(function*(b,S,N,F,H,J,_e){var Me;const Ke=$d(b);Ke.then(sn=>{N[sn.measurementId]=sn.appId,b.options.measurementId&&sn.measurementId!==b.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sn=>Pn.error(sn)),S.push(Ke);const Qe=Aa().then(sn=>{if(sn)return F.getId()}),[kt,Je]=yield Promise.all([Ke,Qe]);Ta()||tl(J,kt.measurementId),H("js",new Date);const yr=null!==(Me=null==_e?void 0:_e.config)&&void 0!==Me?Me:{};return yr.origin="firebase",yr.update=!0,null!=Je&&(yr[As]=Je),H("config",kt.measurementId,yr),kt.measurementId})).apply(this,arguments)}class qf{constructor(S){this.app=S}_delete(){return delete Ot[this.app.options.appId],Promise.resolve()}}let Ot={},ze=[];const ss={};let ju,mi,os="dataLayer",ar=!1;function Gd(b,S,N){!function(){const b=[];if((0,Y.ru)()&&b.push("This is a browser extension environment."),(0,Y.zI)()||b.push("Cookies are not available."),b.length>0){const S=b.map((F,H)=>`(${H+1}) ${F}`).join(" "),N=Lr.create("invalid-analytics-context",{errorInfo:S});Pn.warn(N.message)}}();const F=b.options.appId;if(!F)throw Lr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Lr.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ot[F])throw Lr.create("already-exists",{id:F});if(!ar){!function(b){let S=[];Array.isArray(window[b])?S=window[b]:window[b]=S}(os);const{wrappedGtag:J,gtagCore:_e}=function(b,S,N,F,H){let J=function(..._e){window[F].push(arguments)};return window[H]&&"function"==typeof window[H]&&(J=window[H]),window[H]=function(b,S,N,F){function J(){return(J=(0,P.Z)(function*(_e,Me,Ke){try{"event"===_e?yield ku(b,S,N,Me,Ke):"config"===_e?yield Ou(b,S,N,F,Me,Ke):b("set",Me)}catch(Qe){Pn.error(Qe)}})).apply(this,arguments)}return function(_e,Me,Ke){return J.apply(this,arguments)}}(J,b,S,N),{gtagCore:J,wrappedGtag:window[H]}}(Ot,ze,ss,os,"gtag");mi=J,ju=_e,ar=!0}return Ot[F]=function(b,S,N,F,H,J,_e){return Bu.apply(this,arguments)}(b,ze,ss,S,ju,os,N),new qf(b)}function $u(){return($u=(0,P.Z)(function*(b,S,N,F,H){if(H&&H.global)b("event",N,F);else{const J=yield S;b("event",N,Object.assign(Object.assign({},F),{send_to:J}))}})).apply(this,arguments)}function yi(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(){if((0,Y.ru)()||!(0,Y.zI)()||!(0,Y.hl)())return!1;try{return yield(0,Y.eu)()}catch(b){return!1}})).apply(this,arguments)}const zf="@firebase/analytics";(0,ee._registerComponent)(new X.wA(xn,(S,{options:N})=>Gd(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ee._registerComponent)(new X.wA("analytics-internal",function(S){try{const N=S.getProvider(xn).getImmediate();return{logEvent:(F,H,J)=>function(b,S,N,F){b=(0,Y.m9)(b),function(b,S,N,F,H){return $u.apply(this,arguments)}(mi,Ot[b.app.options.appId],S,N,F).catch(H=>Pn.error(H))}(N,F,H,J)}}catch(N){throw Lr.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ee.registerVersion)(zf,"0.7.8"),(0,ee.registerVersion)(zf,"0.7.8","esm2017");var qd=k(7771),Kf=k(3637),En=k(3342),us=k(3101),Ho=k(309);const zg=new E.GfV("7.3.0"),zd="__angularfire_symbol__analyticsIsSupportedValue",Zr="__angularfire_symbol__analyticsIsSupported",Kd="__angularfire_symbol__remoteConfigIsSupportedValue",ol="__angularfire_symbol__remoteConfigIsSupported",cs="__angularfire_symbol__messagingIsSupportedValue",Zd="__angularfire_symbol__messagingIsSupported";function kn(b,S,N){if(S){if(1===S.length)return S[0];const J=S.filter(_e=>_e.app===N);if(1===J.length)return J[0]}return N.container.getProvider(b).getImmediate({optional:!0})}globalThis[Zr]||(globalThis[Zr]=yi().then(b=>globalThis[zd]=b).catch(()=>globalThis[zd]=!1)),globalThis[Zd]||(globalThis[Zd]=Nu().then(b=>globalThis[cs]=b).catch(()=>globalThis[cs]=!1)),globalThis[ol]||(globalThis[ol]=Rd().then(b=>globalThis[Kd]=b).catch(()=>globalThis[Kd]=!1));const Go=(b,S)=>{const N=S?[S]:(0,K.C6)(),F=[];return N.forEach(H=>{H.container.getProvider(b).instances.forEach(_e=>{F.includes(_e)||F.push(_e)})}),F};function Oi(){}class Yf{constructor(S,N=qd.N){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,F){const H=this.zone;return this.delegate.schedule(function(_e){H.runGuarded(()=>{S.apply(this,[_e])})},N,F)}}class Qf{constructor(S){this.zone=S,this.task=null}call(S,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oi,{},Oi,Oi)),N.pipe((0,En.b)({next:F,complete:F,error:F})).subscribe(S).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Yr=(()=>{class b{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Yf(Zone.current)),this.insideAngular=N.run(()=>new Yf(Zone.current,Kf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(N){return new(N||b)(E.LFG(E.R0b))},b.\u0275prov=E.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function $n(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ki(b){return $n(),function(b){return function(N){return(N=N.lift(new Qf(b.ngZone))).pipe((0,us.R)(b.outsideAngular),(0,Ho.QV)(b.insideAngular))}}($n())(b)}},3854:(We,de,k)=>{"use strict";k.d(de,{BH:()=>ne,LL:()=>rr,ZR:()=>je,zI:()=>rt,US:()=>le,tV:()=>O,L:()=>Q,$s:()=>st,r3:()=>Nt,Sg:()=>pe,ne:()=>Nn,vZ:()=>vt,ZB:()=>q,Lj:()=>At,pd:()=>ai,m9:()=>Qt,z$:()=>ce,jU:()=>De,ru:()=>me,d:()=>qe,xb:()=>xr,w1:()=>xe,hl:()=>_t,uI:()=>se,UG:()=>ve,b$:()=>Fe,G6:()=>un,Mn:()=>St,X3:()=>Te,xO:()=>xi,zd:()=>en,eu:()=>Dt});var E=k(8239);const Y=function(B){const V=[];let $=0;for(let re=0;re<B.length;re++){let z=B.charCodeAt(re);z<128?V[$++]=z:z<2048?(V[$++]=z>>6|192,V[$++]=63&z|128):55296==(64512&z)&&re+1<B.length&&56320==(64512&B.charCodeAt(re+1))?(z=65536+((1023&z)<<10)+(1023&B.charCodeAt(++re)),V[$++]=z>>18|240,V[$++]=z>>12&63|128,V[$++]=z>>6&63|128,V[$++]=63&z|128):(V[$++]=z>>12|224,V[$++]=z>>6&63|128,V[$++]=63&z|128)}return V},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,re=[];for(let z=0;z<B.length;z+=3){const Ce=B[z],Ze=z+1<B.length,Vt=Ze?B[z+1]:0,Kn=z+2<B.length,ln=Kn?B[z+2]:0;let Bn=(15&Vt)<<2|ln>>6,Ni=63&ln;Kn||(Ni=64,Ze||(Bn=64)),re.push($[Ce>>2],$[(3&Ce)<<4|Vt>>4],$[Bn],$[Ni])}return re.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(Y(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let $=0,re=0;for(;$<B.length;){const z=B[$++];if(z<128)V[re++]=String.fromCharCode(z);else if(z>191&&z<224){const Ce=B[$++];V[re++]=String.fromCharCode((31&z)<<6|63&Ce)}else if(z>239&&z<365){const Kn=((7&z)<<18|(63&B[$++])<<12|(63&B[$++])<<6|63&B[$++])-65536;V[re++]=String.fromCharCode(55296+(Kn>>10)),V[re++]=String.fromCharCode(56320+(1023&Kn))}else{const Ce=B[$++],Ze=B[$++];V[re++]=String.fromCharCode((15&z)<<12|(63&Ce)<<6|63&Ze)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const $=V?this.charToByteMapWebSafe_:this.charToByteMap_,re=[];for(let z=0;z<B.length;){const Ce=$[B.charAt(z++)],Vt=z<B.length?$[B.charAt(z)]:0;++z;const ln=z<B.length?$[B.charAt(z)]:64;++z;const ot=z<B.length?$[B.charAt(z)]:64;if(++z,null==Ce||null==Vt||null==ln||null==ot)throw Error();re.push(Ce<<2|Vt>>4),64!==ln&&(re.push(Vt<<4&240|ln>>2),64!==ot&&re.push(ln<<6&192|ot))}return re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},Q=function(B){return function(B){const V=Y(B);return le.encodeByteArray(V,!0)}(B).replace(/\./g,"")},O=function(B){try{return le.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function q(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const $ in V)!V.hasOwnProperty($)||!G($)||(B[$]=q(B[$],V[$]));return B}function G(B){return"__proto__"!==B}class ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,$)=>{this.resolve=V,this.reject=$})}wrapCallback(V){return($,re)=>{$?this.reject($):this.resolve(re),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V($):V($,re))}}}function pe(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const re=V||"demo-project",z=B.iat||0,Ce=B.sub||B.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${re}`,aud:re,iat:z,exp:z+3600,auth_time:z,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},B);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(Ze)),""].join(".")}function ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function se(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ce())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function De(){return"object"==typeof self&&self.self===self}function me(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){return ce().indexOf("Electron/")>=0}function xe(){const B=ce();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function St(){return ce().indexOf("MSAppHost/")>=0}function un(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _t(){return"object"==typeof indexedDB}function Dt(){return new Promise((B,V)=>{try{let $=!0;const re="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(re);z.onsuccess=()=>{z.result.close(),$||self.indexedDB.deleteDatabase(re),B(!0)},z.onupgradeneeded=()=>{$=!1},z.onerror=()=>{var Ce;V((null===(Ce=z.error)||void 0===Ce?void 0:Ce.message)||"")}}catch($){V($)}})}function rt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class je extends Error{constructor(V,$,re){super($),this.code=V,this.customData=re,this.name="FirebaseError",Object.setPrototypeOf(this,je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}}class rr{constructor(V,$,re){this.service=V,this.serviceName=$,this.errors=re}create(V,...$){const re=$[0]||{},z=`${this.service}/${V}`,Ce=this.errors[V],Ze=Ce?function(B,V){return B.replace(Sr,($,re)=>{const z=V[re];return null!=z?String(z):`<${re}?>`})}(Ce,re):"Error";return new je(z,`${this.serviceName}: ${Ze} (${z}).`,re)}}const Sr=/\{\$([^}]+)}/g;function Nt(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function xr(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function vt(B,V){if(B===V)return!0;const $=Object.keys(B),re=Object.keys(V);for(const z of $){if(!re.includes(z))return!1;const Ce=B[z],Ze=V[z];if(Dn(Ce)&&Dn(Ze)){if(!vt(Ce,Ze))return!1}else if(Ce!==Ze)return!1}for(const z of re)if(!$.includes(z))return!1;return!0}function Dn(B){return null!==B&&"object"==typeof B}function xi(B){const V=[];for(const[$,re]of Object.entries(B))Array.isArray(re)?re.forEach(z=>{V.push(encodeURIComponent($)+"="+encodeURIComponent(z))}):V.push(encodeURIComponent($)+"="+encodeURIComponent(re));return V.length?"&"+V.join("&"):""}function en(B){const V={};return B.replace(/^\?/,"").split("&").forEach(re=>{if(re){const[z,Ce]=re.split("=");V[decodeURIComponent(z)]=decodeURIComponent(Ce)}}),V}function ai(B){const V=B.indexOf("?");if(!V)return"";const $=B.indexOf("#",V);return B.substring(V,$>0?$:void 0)}function Nn(B,V){const $=new Cn(B,V);return $.subscribe.bind($)}class Cn{constructor(V,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{V(this)}).catch(re=>{this.error(re)})}next(V){this.forEachObserver($=>{$.next(V)})}error(V){this.forEachObserver($=>{$.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,$,re){let z;if(void 0===V&&void 0===$&&void 0===re)throw new Error("Missing Observer.");z=function(B,V){if("object"!=typeof B||null===B)return!1;for(const $ of["next","error","complete"])if($ in B&&"function"==typeof B[$])return!0;return!1}(V)?V:{next:V,error:$,complete:re},void 0===z.next&&(z.next=Gr),void 0===z.error&&(z.error=Gr),void 0===z.complete&&(z.complete=Gr);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch(Ze){}}),this.observers.push(z),Ce}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,V)}sendOne(V,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{$(this.observers[V])}catch(re){"undefined"!=typeof console&&console.error&&console.error(re)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gr(){}function st(B,V=1e3,$=2){const re=V*Math.pow($,B),z=Math.round(.5*re*(Math.random()-.5)*2);return Math.min(144e5,re+z)}function Qt(B){return B&&B._delegate?B._delegate:B}function Mr(B,V){return new Promise(($,re)=>{B.onsuccess=z=>{$(z.target.result)},B.onerror=z=>{var Ce;re(`${V}: ${null===(Ce=z.target.error)||void 0===Ce?void 0:Ce.message}`)}})}class Ve{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,$="readonly"){return new Oe(this._db.transaction.call(this._db,V,$))}createObjectStore(V,$){return new fe(this._db.createObjectStore(V,$))}close(){this._db.close()}}class Oe{constructor(V){this._transaction=V,this.complete=new Promise(($,re)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{re(this._transaction.error)},this._transaction.onabort=()=>{re(this._transaction.error)}})}objectStore(V){return new fe(this._transaction.objectStore(V))}}class fe{constructor(V){this._store=V}index(V){return new Be(this._store.index(V))}createIndex(V,$,re){return new Be(this._store.createIndex(V,$,re))}get(V){return Mr(this._store.get(V),"Error reading from IndexedDB")}put(V,$){return Mr(this._store.put(V,$),"Error writing to IndexedDB")}delete(V){return Mr(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return Mr(this._store.clear(),"Error clearing IndexedDB object store")}}class Be{constructor(V){this._index=V}get(V){return Mr(this._index.get(V),"Error reading from IndexedDB")}}function Te(B,V,$){return new Promise((re,z)=>{try{const Ce=indexedDB.open(B,V);Ce.onsuccess=Ze=>{re(new Ve(Ze.target.result))},Ce.onerror=Ze=>{var Vt;z(`Error opening indexedDB: ${null===(Vt=Ze.target.error)||void 0===Vt?void 0:Vt.message}`)},Ce.onupgradeneeded=Ze=>{$(new Ve(Ce.result),Ze.oldVersion,Ze.newVersion,new Oe(Ce.transaction))}}catch(Ce){z(`Error opening indexedDB: ${Ce.message}`)}})}function At(B){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,E.Z)(function*(B){return new Promise((V,$)=>{try{const re=indexedDB.deleteDatabase(B);re.onsuccess=()=>{V()},re.onerror=z=>{var Ce;$(`Error deleting indexedDB database "${B}": ${null===(Ce=z.target.error)||void 0===Ce?void 0:Ce.message}`)}}catch(re){$(`Error deleting indexedDB database "${B}": ${re.message}`)}})})).apply(this,arguments)}},2329:(We,de,k)=>{"use strict";k.d(de,{Mq:()=>E.getApp,C6:()=>E.getApps});var E=k(8026);(0,E.registerVersion)("firebase","9.7.0","app")},7841:(We,de,k)=>{"use strict";k.d(de,{Z:()=>E.Z});var E=k(3394);E.Z.registerVersion("firebase","9.7.0","app-compat")},3259:(We,de,k)=>{"use strict";k.r(de);var E=k(8239),K=k(3394),P=k(3854),ee=k(8026);function oe(y,h){var p={};for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&h.indexOf(v)<0&&(p[v]=y[v]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(v=Object.getOwnPropertySymbols(y);T<v.length;T++)h.indexOf(v[T])<0&&Object.prototype.propertyIsEnumerable.call(y,v[T])&&(p[v[T]]=y[v[T]])}return p}var je=k(5422),rr=k(3910);const zi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},bn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Nt=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xr=new je.Yd("@firebase/auth");function Rr(y,...h){xr.logLevel<=je.in.ERROR&&xr.error(`Auth (${ee.SDK_VERSION}): ${y}`,...h)}function vt(y,...h){throw ai(y,...h)}function Dn(y,...h){return ai(y,...h)}function xi(y,h,p){const v=Object.assign(Object.assign({},bn()),{[h]:p});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function en(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&vt(y,"argument-error"),xi(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ai(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return Nt.create(y,...h)}function Ee(y,h,...p){if(!y)throw ai(h,...p)}function Nn(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Rr(h),new Error(h)}function Cn(y,h){y||Nn(h)}const yn=new Map;function nn(y){Cn(y instanceof Function,"Expected a class definition");let h=yn.get(y);return h?(Cn(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,yn.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wr(){return"http:"===Ri()||"https:"===Ri()}function Ri(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class He{constructor(h,p){this.shortDelay=h,this.longDelay=p,Cn(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wr()||(0,P.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ge(y,h){Cn(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Tn{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Es={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Nr=new He(3e4,6e4);function st(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Pt(y,h,p,v){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,E.Z)(function*(y,h,p,v,T={}){return Qt(y,T,(0,E.Z)(function*(){let x={},U={};v&&("GET"===h?U=v:x={body:JSON.stringify(v)});const Z=(0,P.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Ie=yield y._getAdditionalHeaders();return Ie["Content-Type"]="application/json",y.languageCode&&(Ie["X-Firebase-Locale"]=y.languageCode),Tn.fetch()(fe(y,y.config.apiHost,p,Z),Object.assign({method:h,headers:Ie,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Qt(y,h,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,E.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Es),h);try{const T=new Be(y),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const U=yield x.json();if("needConfirmation"in U)throw Te(y,"account-exists-with-different-credential",U);if(x.ok&&!("errorMessage"in U))return U;{const Z=x.ok?U.errorMessage:U.error.message,[Ie,ye]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ie)throw Te(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Ie)throw Te(y,"email-already-in-use",U);const ke=v[Ie]||Ie.toLowerCase().replace(/[_\s]+/g,"-");if(ye)throw xi(y,ke,ye);vt(y,ke)}}catch(T){if(T instanceof P.ZR)throw T;vt(y,"network-request-failed")}})).apply(this,arguments)}function Ve(y,h,p,v){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,E.Z)(function*(y,h,p,v,T={}){const x=yield Pt(y,h,p,v,T);return"mfaPendingCredential"in x&&vt(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function fe(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?Ge(y.config,T):`${y.config.apiScheme}://${T}`}class Be{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(Dn(this.auth,"network-request-failed")),Nr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Te(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=Dn(y,h,v);return T.customData._tokenResponse=p,T}function Mt(){return(Mt=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function B(y,h){return V.apply(this,arguments)}function V(){return(V=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $(y,h){return re.apply(this,arguments)}function re(){return(re=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function z(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Vt(){return(Vt=(0,E.Z)(function*(y,h=!1){const p=(0,P.m9)(y),v=yield p.getIdToken(h),T=ln(v);Ee(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,U=null==x?void 0:x.sign_in_provider;return{claims:T,token:v,authTime:z(Kn(T.auth_time)),issuedAtTime:z(Kn(T.iat)),expirationTime:z(Kn(T.exp)),signInProvider:U||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Kn(y){return 1e3*Number(y)}function ln(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(Rr("Failed to decode base64 JWT payload"),null)}catch(T){return Rr("Caught error parsing JWT payload as JSON",T),null}}function ot(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,E.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Ni(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ni({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xo{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,E.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,E.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class bd{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(y){return li.apply(this,arguments)}function li(){return(li=(0,E.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield ot(y,$(p,{idToken:v}));Ee(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const U=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?qr(x.providerUserInfo):[],Z=Bf(y.providerData,U),ke=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==Z?void 0:Z.length)),Ue={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Z,metadata:new bd(x.createdAt,x.lastLoginAt),isAnonymous:ke};Object.assign(y,Ue)})).apply(this,arguments)}function jn(){return(jn=(0,E.Z)(function*(y){const h=(0,P.m9)(y);yield Sn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Bf(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function qr(y){return y.map(h=>{var{providerId:p}=h,v=oe(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ct(){return(ct=(0,E.Z)(function*(y,h){const p=yield Qt(y,{},(0,E.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,U=fe(y,T,"/v1/token",`key=${x}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",Tn.fetch()(U,{method:"POST",headers:Z,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Ee(h.idToken,"internal-error"),Ee(void 0!==h.idToken,"internal-error"),Ee(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(y){const h=ln(y);return Ee(h,"internal-error"),Ee(void 0!==h.exp,"internal-error"),Ee(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,E.Z)(function*(){return Ee(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,E.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:U}=yield function(y,h){return ct.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,x,Number(U))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:x}=p,U=new jt;return v&&(Ee("string"==typeof v,"internal-error",{appName:h}),U.refreshToken=v),T&&(Ee("string"==typeof T,"internal-error",{appName:h}),U.accessToken=T),x&&(Ee("number"==typeof x,"internal-error",{appName:h}),U.expirationTime=x),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return Nn("not implemented")}}function _n(y,h){Ee("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Pr{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,x=oe(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new bd(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,E.Z)(function*(){const v=yield ot(p,p.stsTokenManager.getToken(p.auth,h));return Ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function(y){return Vt.apply(this,arguments)}(this,h)}reload(){return function(y){return jn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Ee(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,E.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Sn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,E.Z)(function*(){const p=yield h.getIdToken();return yield ot(h,function(y,h){return Mt.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,x,U,Z,Ie,ye,ke;const Ue=null!==(v=p.displayName)&&void 0!==v?v:void 0,Rt=null!==(T=p.email)&&void 0!==T?T:void 0,cr=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Ei=null!==(U=p.photoURL)&&void 0!==U?U:void 0,tc=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,nc=null!==(Ie=p._redirectEventId)&&void 0!==Ie?Ie:void 0,mm=null!==(ye=p.createdAt)&&void 0!==ye?ye:void 0,_h=null!==(ke=p.lastLoginAt)&&void 0!==ke?ke:void 0,{uid:vp,emailVerified:vh,isAnonymous:Ep,providerData:wp,stsTokenManager:qa}=p;Ee(vp&&qa,h,"internal-error");const W_=jt.fromJSON(this.name,qa);Ee("string"==typeof vp,h,"internal-error"),_n(Ue,h.name),_n(Rt,h.name),Ee("boolean"==typeof vh,h,"internal-error"),Ee("boolean"==typeof Ep,h,"internal-error"),_n(cr,h.name),_n(Ei,h.name),_n(tc,h.name),_n(nc,h.name),_n(mm,h.name),_n(_h,h.name);const Eh=new Pr({uid:vp,auth:h,email:Rt,emailVerified:vh,displayName:Ue,isAnonymous:Ep,photoURL:Ei,phoneNumber:cr,tenantId:tc,stsTokenManager:W_,createdAt:mm,lastLoginAt:_h});return wp&&Array.isArray(wp)&&(Eh.providerData=wp.map(Ip=>Object.assign({},Ip))),nc&&(Eh._redirectEventId=nc),Eh}static _fromIdTokenResponse(h,p,v=!1){return(0,E.Z)(function*(){const T=new jt;T.updateFromServerResponse(p);const x=new Pr({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Sn(x),x})()}}const ir=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,E.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,E.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,E.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function pt(y,h,p){return`firebase:${y}:${h}:${p}`}class Mi{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:x}=this.auth;this.fullUserKey=pt(this.userKey,T.apiKey,x),this.fullPersistenceKey=pt("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,E.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Pr._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,E.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,E.Z)(function*(){if(!p.length)return new Mi(nn(ir),h,v);const T=(yield Promise.all(p.map(function(){var ye=(0,E.Z)(function*(ke){if(yield ke._isAvailable())return ke});return function(ke){return ye.apply(this,arguments)}}()))).filter(ye=>ye);let x=T[0]||nn(ir);const U=pt(v,h.config.apiKey,h.name);let Z=null;for(const ye of p)try{const ke=yield ye._get(U);if(ke){const Ue=Pr._fromJSON(h,ke);ye!==x&&(Z=Ue),x=ye;break}}catch(ke){}const Ie=T.filter(ye=>ye._shouldAllowMigration);return x._shouldAllowMigration&&Ie.length?(x=Ie[0],Z&&(yield x._set(U,Z.toJSON())),yield Promise.all(p.map(function(){var ye=(0,E.Z)(function*(ke){if(ke!==x)try{yield ke._remove(U)}catch(Ue){}});return function(ke){return ye.apply(this,arguments)}}())),new Mi(x,h,v)):new Mi(x,h,v)})()}}function Ro(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(No(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(lt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Zn(h))return"Blackberry";if(ws(h))return"Webos";if(qs(h))return"Safari";if((h.includes("chrome/")||zs(h))&&!h.includes("edge/"))return"Chrome";if(Yi(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function lt(y=(0,P.z$)()){return/firefox\//i.test(y)}function qs(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function zs(y=(0,P.z$)()){return/crios\//i.test(y)}function No(y=(0,P.z$)()){return/iemobile/i.test(y)}function Yi(y=(0,P.z$)()){return/android/i.test(y)}function Zn(y=(0,P.z$)()){return/blackberry/i.test(y)}function ws(y=(0,P.z$)()){return/webos/i.test(y)}function zr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function Fc(y=(0,P.z$)()){return zr(y)||Yi(y)||ws(y)||Zn(y)||/windows phone/i.test(y)||No(y)}function Vc(y,h=[]){let p;switch(y){case"Browser":p=Ro((0,P.z$)());break;case"Worker":p=`${Ro((0,P.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ee.SDK_VERSION}/${v}`}class Ks{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Is(this),this.idTokenSubscription=new Is(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=nn(p)),this._initializationPromise=this.queue((0,E.Z)(function*(){var T,x;if(!v._deleted&&(v.persistenceManager=yield Mi.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(U){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,E.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,E.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const x=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,U=null==T?void 0:T._redirectEventId,Z=yield p.tryRedirectSignIn(h);(!x||x===U)&&(null==Z?void 0:Z.user)&&(T=Z.user)}return T?T._redirectEventId?(Ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,E.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,E.Z)(function*(){try{yield Sn(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,E.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,E.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&Ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,E.Z)(function*(){if(!p._deleted)return h&&Ee(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,E.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,E.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,E.Z)(function*(){yield p.assertedPersistence.setPersistence(nn(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,E.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,E.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&nn(h)||p._popupRedirectResolver;Ee(v,p,"argument-error"),p.redirectPersistenceManager=yield Mi.create(p,[nn(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,E.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,E.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,E.Z)(function*(){if(h===p.currentUser)return p.queue((0,E.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Ee(U,this,"internal-error"),U.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,E.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Vc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,E.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function vn(y){return(0,P.m9)(y)}class Is{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cd(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function dn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Ji{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Nn("not implemented")}_getIdTokenResponse(h){return Nn("not implemented")}_linkToIdToken(h,p){return Nn("not implemented")}_getReauthenticationResolver(h){return Nn("not implemented")}}function fa(y,h){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:resetPassword",st(y,h))})).apply(this,arguments)}function Td(y,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zs(y,h){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:update",st(y,h))})).apply(this,arguments)}function Sd(){return(Sd=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithPassword",st(y,h))})).apply(this,arguments)}function jc(y,h){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:sendOobCode",st(y,h))})).apply(this,arguments)}function jg(y,h){return jf.apply(this,arguments)}function jf(){return(jf=(0,E.Z)(function*(y,h){return jc(y,h)})).apply(this,arguments)}function xd(y,h){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,E.Z)(function*(y,h){return jc(y,h)})).apply(this,arguments)}function $c(y,h){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,E.Z)(function*(y,h){return jc(y,h)})).apply(this,arguments)}function $g(y,h){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,E.Z)(function*(y,h){return jc(y,h)})).apply(this,arguments)}function ga(){return(ga=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithEmailLink",st(y,h))})).apply(this,arguments)}function vu(){return(vu=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithEmailLink",st(y,h))})).apply(this,arguments)}class Eu extends Ji{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Eu(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Eu(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,E.Z)(function*(){switch(p.signInMethod){case"password":return function(y,h){return Sd.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(y,h){return ga.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:vt(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,E.Z)(function*(){switch(v.signInMethod){case"password":return Td(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(y,h){return vu.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:vt(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function bs(y,h){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithIdp",st(y,h))})).apply(this,arguments)}class hi extends Ji{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):vt("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,x=oe(p,["providerId","signInMethod"]);if(!v||!T)return null;const U=new hi(v,T);return U.idToken=x.idToken||void 0,U.accessToken=x.accessToken||void 0,U.secret=x.secret,U.nonce=x.nonce,U.pendingToken=x.pendingToken||null,U}_getIdTokenResponse(h){return bs(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,bs(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,bs(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function wu(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:sendVerificationCode",st(y,h))})).apply(this,arguments)}function Od(){return(Od=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithPhoneNumber",st(y,h))})).apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(y,h){const p=yield Ve(y,"POST","/v1/accounts:signInWithPhoneNumber",st(y,h));if(p.temporaryProof)throw Te(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Hf={USER_NOT_FOUND:"user-not-found"};function Xi(){return(Xi=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithPhoneNumber",st(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Hf)})).apply(this,arguments)}class Mn extends Ji{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Mn({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Mn({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function(y,h){return Od.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function(y,h){return ya.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(y,h){return Xi.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}=h;return v||p||T||x?new Mn({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}):null}}class fi{constructor(h){var p,v,T,x,U,Z;const Ie=(0,P.zd)((0,P.pd)(h)),ye=null!==(p=Ie.apiKey)&&void 0!==p?p:null,ke=null!==(v=Ie.oobCode)&&void 0!==v?v:null,Ue=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ie.mode)&&void 0!==T?T:null);Ee(ye&&ke&&Ue,"argument-error"),this.apiKey=ye,this.operation=Ue,this.code=ke,this.continueUrl=null!==(x=Ie.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(U=Ie.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Z=Ie.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const p=function(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||p||h||y}(h);try{return new fi(p)}catch(v){return null}}}let Qs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Eu._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=fi.parseLink(v);return Ee(T,"argument-error"),Eu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class pi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ht extends pi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ds extends Ht{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return Ee("providerId"in p&&"signInMethod"in p,"argument-error"),hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Ee(h.idToken||h.accessToken,"argument-error"),hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ds.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ds.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:U,providerId:Z}=h;if(!v&&!T&&!p&&!x||!Z)return null;try{return new Ds(Z)._credential({idToken:p,accessToken:v,nonce:U,pendingToken:x})}catch(Ie){return null}}}let qc=(()=>{class y extends Ht{constructor(){super("facebook.com")}static credential(p){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Fn=(()=>{class y extends Ht{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),rn=(()=>{class y extends Ht{constructor(){super("github.com")}static credential(p){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class _a extends Ji{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return bs(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,bs(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,bs(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:x}=p;return v&&T&&x&&v===T?new _a(v,x):null}static _create(h,p){return new _a(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class or extends pi{constructor(h){Ee(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return or.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return or.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=_a.fromJSON(h);return Ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return _a._create(v,p)}catch(T){return null}}}let Kc=(()=>{class y extends Ht{constructor(){super("twitter.com")}static credential(p,v){return hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function es(y,h){return ts.apply(this,arguments)}function ts(){return(ts=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signUp",st(y,h))})).apply(this,arguments)}class Kt{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,E.Z)(function*(){const x=yield Pr._fromIdTokenResponse(h,v,T),U=Du(v);return new Kt({user:x,providerId:U,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,E.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Du(v);return new Kt({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Du(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Cu(){return(Cu=(0,E.Z)(function*(y){var h;const p=vn(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Kt({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield es(p,{returnSecureToken:!0}),T=yield Kt._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class kr extends P.ZR{constructor(h,p,v,T){var x;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,kr.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new kr(h,p,v,T)}}function Tu(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?kr._fromErrorAndOperation(y,x,h,v):x})}function Oo(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Su(){return(Su=(0,E.Z)(function*(y,h){const p=(0,P.m9)(y);yield ko(!0,p,h);const{providerUserInfo:v}=yield B(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Oo(v||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Cs(y,h){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,E.Z)(function*(y,h,p=!1){const v=yield ot(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Kt._forOperation(y,"link",v)})).apply(this,arguments)}function ko(y,h,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,E.Z)(function*(y,h,p){yield Sn(h);const T=!1===y?"provider-already-linked":"no-such-provider";Ee(Oo(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Fo(y,h){return va.apply(this,arguments)}function va(){return(va=(0,E.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const x=yield ot(y,Tu(v,T,h,y),p);Ee(x.idToken,v,"internal-error");const U=ln(x.idToken);Ee(U,v,"internal-error");const{sub:Z}=U;return Ee(y.uid===Z,v,"user-mismatch"),Kt._forOperation(y,T,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&vt(v,"user-mismatch"),x}})).apply(this,arguments)}function he(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,E.Z)(function*(y,h,p=!1){const v="signIn",T=yield Tu(y,v,h),x=yield Kt._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Ea(y,h){return hn.apply(this,arguments)}function hn(){return(hn=(0,E.Z)(function*(y,h){return he(vn(y),h)})).apply(this,arguments)}function Au(y,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,E.Z)(function*(y,h){const p=(0,P.m9)(y);return yield ko(!1,p,h.providerId),Cs(p,h)})).apply(this,arguments)}function Fr(y,h){return wa.apply(this,arguments)}function wa(){return(wa=(0,E.Z)(function*(y,h){return Fo((0,P.m9)(y),h)})).apply(this,arguments)}function eo(y,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(y,h){return Ve(y,"POST","/v1/accounts:signInWithCustomToken",st(y,h))})).apply(this,arguments)}function Pi(){return(Pi=(0,E.Z)(function*(y,h){const p=vn(y),v=yield eo(p,{token:h,returnSecureToken:!0}),T=yield Kt._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ns{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ln._fromServerResponse(h,p):vt(h,"internal-error")}}class Ln extends ns{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ln(p)}}function gr(y,h,p){var v;Ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),Ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(Ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Ss(){return(Ss=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&gr(v,T,p),yield xd(v,T)})).apply(this,arguments)}function Yc(){return(Yc=(0,E.Z)(function*(y,h,p){yield fa((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function to(){return(to=(0,E.Z)(function*(y,h){yield Zs((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function xu(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,E.Z)(function*(y,h){const p=(0,P.m9)(y),v=yield fa(p,{oobCode:h}),T=v.requestType;switch(Ee(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ee(v.mfaInfo,p,"internal-error");default:Ee(v.email,p,"internal-error")}let x=null;return v.mfaInfo&&(x=ns._fromServerResponse(vn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Ru(){return(Ru=(0,E.Z)(function*(y,h){const{data:p}=yield xu((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function Nu(){return(Nu=(0,E.Z)(function*(y,h,p){const v=vn(y),T=yield es(v,{returnSecureToken:!0,email:h,password:p}),x=yield Kt._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function Vo(){return(Vo=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};Ee(p.handleCodeInApp,v,"argument-error"),p&&gr(v,T,p),yield $c(v,T)})).apply(this,arguments)}function Ud(){return(Ud=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=Qs.credentialWithLink(h,p||Pe());return Ee(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Ea(v,T)})).apply(this,arguments)}function Ca(y,h){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:createAuthUri",st(y,h))})).apply(this,arguments)}function xn(){return(xn=(0,E.Z)(function*(y,h){const v={identifier:h,continueUri:Wr()?Pe():"http://localhost"},{signinMethods:T}=yield Ca((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function tn(){return(tn=(0,E.Z)(function*(y,h){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&gr(p.auth,T,h);const{email:x}=yield jg(p.auth,T);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function el(){return(el=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&gr(v.auth,x,p);const{email:U}=yield $g(v.auth,x);U!==y.email&&(yield y.reload())})).apply(this,arguments)}function Mu(y,h){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(y,h){return Pt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function tl(){return(tl=(0,E.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,P.m9)(y),x={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},U=yield ot(v,Mu(v.auth,x));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const Z=v.providerData.find(({providerId:Ie})=>"password"===Ie);Z&&(Z.displayName=v.displayName,Z.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)})).apply(this,arguments)}function Uo(y,h,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,E.Z)(function*(y,h,p){const{auth:v}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const U=yield ot(y,Td(v,x));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class Bo{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class rs extends Bo{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Ta extends Bo{constructor(h,p){super(h,"facebook.com",p)}}class Gg extends rs{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Lr extends Bo{constructor(h,p){super(h,"google.com",p)}}class Lu extends rs{constructor(h,p,v){super(h,"twitter.com",p,v)}}function jd(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const U=null===(p=null===(h=ln(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new Bo(x,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new Ta(x,T);case"github.com":return new Gg(x,T);case"google.com":return new Lr(x,T);case"twitter.com":return new Lu(x,T,y.screenName||null);case"custom":case"anonymous":return new Bo(x,null);default:return new Bo(x,v,T)}}(p)}class is{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new is("enroll",h)}static _fromMfaPendingCredential(h){return new is("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return is._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return is._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Vu{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=vn(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(Z=>ns._fromServerResponse(v,Z));Ee(T.mfaPendingCredential,v,"internal-error");const U=is._fromMfaPendingCredential(T.mfaPendingCredential);return new Vu(U,x,function(){var Z=(0,E.Z)(function*(Ie){const ye=yield Ie._process(v,U);delete T.mfaInfo,delete T.mfaPendingCredential;const ke=Object.assign(Object.assign({},T),{idToken:ye.idToken,refreshToken:ye.refreshToken});switch(p.operationType){case"signIn":const Ue=yield Kt._fromIdTokenResponse(v,p.operationType,ke);return yield v._updateCurrentUser(Ue.user),Ue;case"reauthenticate":return Ee(p.user,v,"internal-error"),Kt._forOperation(p.user,p.operationType,ke);default:vt(v,"internal-error")}});return function(Ie){return Z.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,E.Z)(function*(){return p.signInResolver(h)})()}}function Wf(y,h){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",st(y,h))}class xa{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>ns._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new xa(h)}getSession(){var h=this;return(0,E.Z)(function*(){return is._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,E.Z)(function*(){const T=h,x=yield v.getSession(),U=yield ot(v.user,T._process(v.user.auth,x,p));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(h){var p=this;return(0,E.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),x=yield ot(p.user,function(y,h){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",st(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==v),yield p.user._updateTokensIfNecessary(x);try{yield p.user.reload()}catch(U){if("auth/user-token-expired"!==U.code)throw U}})()}}const Bu=new WeakMap,Ot="__sak";class ze{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ot,"1"),this.storage.removeItem(Ot),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const mi=(()=>{class y extends ze{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,P.z$)();return qs(y)||zr(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Fc(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),x=this.localCache[v];T!==x&&p(v,x,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Z,Ie,ye)=>{this.notifyListeners(Z,ye)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const x=()=>{const Z=this.storage.getItem(T);!v&&this.localCache[T]===Z||this.notifyListeners(T,Z)},U=this.storage.getItem(T);(0,P.w1)()&&10===document.documentMode&&U!==p.newValue&&p.newValue!==p.oldValue?setTimeout(x,10):x()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,x=this;return(0,E.Z)(function*(){yield T().call(x,p,v),x.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,E.Z)(function*(){const x=yield v().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var v=()=>super._remove,T=this;return(0,E.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),ro=(()=>{class y extends ze{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let Gd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(x=>x.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,E.Z)(function*(){const T=p,{eventId:x,eventType:U,data:Z}=T.data,Ie=v.handlersMap[U];if(!(null==Ie?void 0:Ie.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:U});const ye=Array.from(Ie).map(function(){var Ue=(0,E.Z)(function*(Rt){return Rt(T.origin,Z)});return function(Rt){return Ue.apply(this,arguments)}}()),ke=yield function(y){return Promise.all(y.map(function(){var h=(0,E.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(ye);T.ports[0].postMessage({status:"done",eventId:x,eventType:U,response:ke})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ur(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class $u{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,E.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let U,Z;return new Promise((Ie,ye)=>{const ke=ur("",20);x.port1.start();const Ue=setTimeout(()=>{ye(new Error("unsupported_event"))},v);Z={messageChannel:x,onMessage(Rt){const cr=Rt;if(cr.data.eventId===ke)switch(cr.data.status){case"ack":clearTimeout(Ue),U=setTimeout(()=>{ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Ie(cr.data.response);break;default:clearTimeout(Ue),clearTimeout(U),ye(new Error("invalid_response"))}}},T.handlers.add(Z),x.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:h,eventId:ke,data:p},[x.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function On(){return window}function $o(){return void 0!==On().WorkerGlobalScope&&"function"==typeof On().importScripts}function rl(){return(rl=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Kr="firebaseLocalStorageDb",Rs="firebaseLocalStorage",yi="fbase_key";class Vr{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ns(y,h){return y.transaction([Rs],h?"readwrite":"readonly").objectStore(Rs)}function _i(){const y=indexedDB.open(Kr,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Rs,{keyPath:yi})}catch(T){p(T)}}),y.addEventListener("success",(0,E.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Rs)?h(v):(v.close(),yield function(){const y=indexedDB.deleteDatabase(Kr);return new Vr(y).toPromise()}(),h(yield _i()))}))})}function Vn(y,h,p){return as.apply(this,arguments)}function as(){return(as=(0,E.Z)(function*(y,h,p){const v=Ns(y,!0).put({[yi]:h,value:p});return new Vr(v).toPromise()})).apply(this,arguments)}function Wd(){return(Wd=(0,E.Z)(function*(y,h){const p=Ns(y,!1).get(h),v=yield new Vr(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function sl(y,h){const p=Ns(y,!0).delete(h);return new Vr(p).toPromise()}const us=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,E.Z)(function*(){return p.db||(p.db=yield _i()),p.db})()}_withRetries(p){var v=this;return(0,E.Z)(function*(){let T=0;for(;;)try{const x=yield v._openDb();return yield p(x)}catch(x){if(T++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,E.Z)(function*(){return $o()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,E.Z)(function*(){p.receiver=Gd._getInstance($o()?self:null),p.receiver._subscribe("keyChanged",function(){var v=(0,E.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,E.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,E.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function(){return rl.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new $u(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,E.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const p=yield _i();return yield Vn(p,Ot,"1"),yield sl(p,Ot),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,E.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,E.Z)(function*(){return T._withPendingWrite((0,E.Z)(function*(){return yield T._withRetries(x=>Vn(x,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,E.Z)(function*(){const T=yield v._withRetries(x=>function(y,h){return Wd.apply(this,arguments)}(x,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,E.Z)(function*(){return v._withPendingWrite((0,E.Z)(function*(){return yield v._withRetries(T=>sl(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,E.Z)(function*(){const v=yield p._withRetries(U=>{const Z=Ns(U,!1).getAll();return new Vr(Z).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:U,value:Z}of v)x.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(Z)&&(p.notifyListeners(U,Z),T.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!x.has(U)&&(p.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ho(y,h){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",st(y,h))}function Zr(){return(Zr=(0,E.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ol(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const x=Dn("internal-error");x.customData=T,p(x)},v.type="text/javascript",v.charset="UTF-8",function(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function cs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Qn=1e12;class Ms{constructor(h){this.auth=h,this.counter=Qn,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Zf(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Qn;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Qn))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,E.Z)(function*(){var v;return null===(v=p._widgets.get(h||Qn))||void 0===v||v.execute(),""})()}}class Zf{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;Ee(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<50;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}();const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Go=cs("rcb"),Oi=new He(3e4,6e4);class Qf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!On().grecaptcha}load(h,p=""){return Ee((y=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(On().grecaptcha):new Promise((v,T)=>{const x=On().setTimeout(()=>{T(Dn(h,"network-request-failed"))},Oi.get());On()[Go]=()=>{On().clearTimeout(x),delete On()[Go];const Z=On().grecaptcha;if(!Z)return void T(Dn(h,"internal-error"));const Ie=Z.render;Z.render=(ye,ke)=>{const Ue=Ie(ye,ke);return this.counter++,Ue},this.hostLanguage=p,v(Z)},ol(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Go,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(Dn(h,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!On().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $n{load(h){return(0,E.Z)(function*(){return new Ms(h)})()}clearedOneInstance(){}}const Na="recaptcha",Ur={theme:"light",type:"image"};class Ps{constructor(h,p=Object.assign({},Ur),v){this.parameters=p,this.type=Na,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(v),this.isInvisible="invisible"===this.parameters.size,Ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;Ee(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $n:new Qf,this.validateStartingState()}verify(){var h=this;return(0,E.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(x=>{const U=Z=>{!Z||(h.tokenChangeListeners.delete(U),x(Z))};h.tokenChangeListeners.add(U),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Ee(!this.parameters.sitekey,this.auth,"argument-error"),Ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=On()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){Ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,E.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,E.Z)(function*(){Ee(Wr()&&!$o(),h.auth,"internal-error"),yield function(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function(y){return Zr.apply(this,arguments)}(h.auth);Ee(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return Ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ki{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Mn._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Qd(){return(Qd=(0,E.Z)(function*(y,h,p){const v=vn(y),T=yield F(v,h,(0,P.m9)(p));return new ki(T,x=>Ea(v,x))})).apply(this,arguments)}function b(){return(b=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y);yield ko(!1,v,"phone");const T=yield F(v.auth,h,(0,P.m9)(p));return new ki(T,x=>Au(v,x))})).apply(this,arguments)}function N(){return(N=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=yield F(v.auth,h,(0,P.m9)(p));return new ki(T,x=>Fr(v,x))})).apply(this,arguments)}function F(y,h,p){return H.apply(this,arguments)}function H(){return(H=(0,E.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let x;if(Ee("string"==typeof T,y,"argument-error"),Ee(p.type===Na,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const U=x.session;if("phoneNumber"in x)return Ee("enroll"===U.type,y,"internal-error"),(yield Wf(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Ee("signin"===U.type,y,"internal-error");const Z=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return Ee(Z,y,"missing-multi-factor-info"),(yield Ho(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield wu(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return U}}finally{p._reset()}})).apply(this,arguments)}function _e(){return(_e=(0,E.Z)(function*(y,h){yield Cs((0,P.m9)(y),h)})).apply(this,arguments)}let Me=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=vn(p)}verifyPhoneNumber(p,v){return F(this.auth,p,(0,P.m9)(v))}static credential(p,v){return Mn._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Mn._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ke(y,h){return h?nn(h):(Ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Qe extends Ji{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return bs(h,this._buildIdpRequest())}_linkToIdToken(h,p){return bs(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return bs(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function kt(y){return he(y.auth,new Qe(y),y.bypassAuthState)}function Je(y){const{auth:h,user:p}=y;return Ee(p,h,"internal-error"),Fo(p,new Qe(y),y.bypassAuthState)}function yr(y){return sn.apply(this,arguments)}function sn(){return(sn=(0,E.Z)(function*(y){const{auth:h,user:p}=y;return Ee(p,h,"internal-error"),Cs(p,new Qe(y),y.bypassAuthState)})).apply(this,arguments)}class Ma{constructor(h,p,v,T,x=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,E.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,E.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:x,tenantId:U,error:Z,type:Ie}=h;if(Z)return void p.reject(Z);const ye={auth:p.auth,requestUri:v,sessionId:T,tenantId:U||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ie)(ye))}catch(ke){p.reject(ke)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return kt;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return Je;default:vt(this.auth,"internal-error")}}resolve(h){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const so=new He(2e3,1e4);function _r(){return(_r=(0,E.Z)(function*(y,h,p){const v=vn(y);en(y,h,pi);const T=Ke(v,p);return new Oa(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Pa(){return(Pa=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y);en(v.auth,h,pi);const T=Ke(v.auth,p);return new Oa(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function al(){return(al=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y);en(v.auth,h,pi);const T=Ke(v.auth,p);return new Oa(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Oa=(()=>{class y extends Ma{constructor(p,v,T,x,U){super(p,v,x,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,E.Z)(function*(){const v=yield p.execute();return Ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,E.Z)(function*(){Cn(1===p.filter.length,"Popup operations only handle one event");const v=ur();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Dn(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,so.get())};p()}}return y.currentPopupAction=null,y})();const Os=new Map;class Gu extends Ma{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,E.Z)(function*(){let v=Os.get(p.auth._key());if(!v){try{const x=(yield function(y,h){return Rn.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(x)}catch(T){v=()=>Promise.reject(T)}Os.set(p.auth._key(),v)}return p.bypassAuthState||Os.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,E.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Rn(){return(Rn=(0,E.Z)(function*(y,h){const p=C_(h),v=ka(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function vi(y,h){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,E.Z)(function*(y,h){return ka(y)._set(C_(h),"true")})).apply(this,arguments)}function ka(y){return nn(y._redirectPersistence)}function C_(y){return pt("pendingRedirect",y.config.apiKey,y.name)}function Zg(){return(Zg=(0,E.Z)(function*(y,h,p){const v=vn(y);en(y,h,pi);const T=Ke(v,p);return yield vi(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Fa(){return(Fa=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y);en(v.auth,h,pi);const T=Ke(v.auth,p);yield vi(T,v.auth);const x=yield xt(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Xd(){return(Xd=(0,E.Z)(function*(y,h,p){const v=(0,P.m9)(y);en(v.auth,h,pi);const T=Ke(v.auth,p);yield ko(!1,v,h.providerId),yield vi(T,v.auth);const x=yield xt(v);return T._openRedirect(v.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function La(){return(La=(0,E.Z)(function*(y,h){return yield vn(y)._initializationPromise,Ko(y,h,!1)})).apply(this,arguments)}function Ko(y,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,E.Z)(function*(y,h,p=!1){const v=vn(y),T=Ke(v,h),U=yield new Gu(v,T,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,h)),U})).apply(this,arguments)}function xt(y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,E.Z)(function*(y){const h=ur(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Zo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cl(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!cl(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(Dn(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(T_(h))}saveEventToCache(h){this.cachedEventUids.add(T_(h)),this.lastProcessedEventTime=Date.now()}}function T_(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function cl({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function S_(y){return qu.apply(this,arguments)}function qu(){return(qu=(0,E.Z)(function*(y,h={}){return Pt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jg=/^https?/;function dl(){return(dl=(0,E.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield S_(y);for(const p of h)try{if(Yo(p))return}catch(v){}vt(y,"unauthorized-domain")})).apply(this,arguments)}function Yo(y){const h=Pe(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===v}if(!Jg.test(p))return!1;if(ll.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const th=new He(3e4,6e4);function ep(){const y=On().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ua=null;function tp(y){return Ua=Ua||function(y){return new Promise((h,p)=>{var v,T,x;function U(){ep(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ep(),p(Dn(y,"network-request-failed"))},timeout:th.get()})}if(null===(T=null===(v=On().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=On().gapi)||void 0===x?void 0:x.load)){const Z=cs("iframefcb");return On()[Z]=()=>{gapi.load?U():p(Dn(y,"network-request-failed"))},ol(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Ie=>p(Ie))}U()}}).catch(h=>{throw Ua=null,h})}(y),Ua}const Xg=new He(5e3,15e3),Ba={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R_(y){const h=y.config;Ee(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Ge(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ee.SDK_VERSION},T=x_.get(y.config.apiHost);T&&(v.eid=T);const x=y._getFrameworks();return x.length&&(v.fw=x.join(",")),`${p}?${(0,P.xO)(v).slice(1)}`}function nh(){return(nh=(0,E.Z)(function*(y){const h=yield tp(y),p=On().gapi;return Ee(p,y,"internal-error"),h.open({where:document.body,url:R_(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ba,dontclear:!0},v=>new Promise(function(){var T=(0,E.Z)(function*(x,U){yield v.restyle({setHideOnLeave:!1});const Z=Dn(y,"network-request-failed"),Ie=On().setTimeout(()=>{U(Z)},Xg.get());function ye(){On().clearTimeout(Ie),x(v)}v.ping(ye).then(ye,()=>{U(Z)})});return function(x,U){return T.apply(this,arguments)}}()))})).apply(this,arguments)}const np={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rp{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Zu(y,h,p,v,T,x){Ee(y.config.authDomain,y,"auth-domain-config-required"),Ee(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ee.SDK_VERSION,eventId:T};if(h instanceof pi){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ie,ye]of Object.entries(x||{}))U[Ie]=ye}if(h instanceof Ht){const Ie=h.getScopes().filter(ye=>""!==ye);Ie.length>0&&(U.scopes=Ie.join(","))}y.tenantId&&(U.tid=y.tenantId);const Z=U;for(const Ie of Object.keys(Z))void 0===Z[Ie]&&delete Z[Ie];return`${function({config:y}){return y.emulator?Ge(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(Z).slice(1)}`}const fl="webStorageSupport";class ja extends class{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return Nn("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ja(h)}_finalizeEnroll(h,p,v){return function(y,h){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",st(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function(y,h){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",st(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pl=(()=>{class y{constructor(){}static assertion(p){return ja._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var y,Li="@firebase/auth",Yu="0.19.12";class om{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,E.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qo(){return window}function ml(){return(ml=(0,E.Z)(function*(y,h,p){var v;const{BuildInfo:T}=Qo();Cn(h.sessionId,"AuthEvent did not contain a session ID");const x=yield O_(h.sessionId),U={};return zr()?U.ibi=T.packageName:Yi()?U.apn=T.packageName:vt(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=x,Zu(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,U)})).apply(this,arguments)}function um(){return(um=(0,E.Z)(function*(y){const{BuildInfo:h}=Qo(),p={};zr()?p.iosBundleId=h.packageName:Yi()?p.androidPackageName=h.packageName:vt(y,"operation-not-supported-in-this-environment"),yield S_(y,p)})).apply(this,arguments)}function ih(){return(ih=(0,E.Z)(function*(y,h,p){const{cordova:v}=Qo();let T=()=>{};try{yield new Promise((x,U)=>{let Z=null;function Ie(){var Ue;x();const Rt=null===(Ue=v.plugins.browsertab)||void 0===Ue?void 0:Ue.close;"function"==typeof Rt&&Rt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function ye(){Z||(Z=window.setTimeout(()=>{U(Dn(y,"redirect-cancelled-by-user"))},2e3))}function ke(){"visible"===(null==document?void 0:document.visibilityState)&&ye()}h.addPassiveListener(Ie),document.addEventListener("resume",ye,!1),Yi()&&document.addEventListener("visibilitychange",ke,!1),T=()=>{h.removePassiveListener(Ie),document.removeEventListener("resume",ye,!1),document.removeEventListener("visibilitychange",ke,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function O_(y){return _l.apply(this,arguments)}function _l(){return(_l=(0,E.Z)(function*(y){const h=lm(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lm(y){if(Cn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}y="Browser",(0,ee._registerComponent)(new rr.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:x,authDomain:U}=v.options;return((Z,Ie)=>{Ee(x&&!x.includes(":"),"invalid-api-key",{appName:Z.name}),Ee(!(null==U?void 0:U.includes(":")),"argument-error",{appName:Z.name});const ye={apiKey:x,authDomain:U,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vc(y)},ke=new Ks(Z,Ie,ye);return function(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(nn);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ke,p),ke})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new rr.wA("auth-internal",h=>{const p=vn(h.getProvider("auth").getImmediate());return new om(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Li,Yu,void 0),(0,ee.registerVersion)(Li,Yu,"esm2017");class ap extends Zo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,E.Z)(function*(){yield h.initPromise})()}}function fn(y){return cp.apply(this,arguments)}function cp(){return(cp=(0,E.Z)(function*(y){const h=yield oh()._get(uo(y));return h&&(yield oh()._remove(uo(y))),h})).apply(this,arguments)}function Fs(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function oh(){return nn(mi)}function uo(y){return pt("authEvent",y.config.apiKey,y.name)}function ah(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function $a(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dn("no-auth-event")}}function Gt(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function El(y=(0,P.z$)()){return!("file:"!==Gt()&&"ionic:"!==Gt()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function hp(){try{const y=self.localStorage,h=ur();if(y)return y.setItem(h,"1"),y.removeItem(h),!function(y=(0,P.z$)()){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return fp()&&(0,P.hl)()}return!1}function fp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ha(){return("http:"===Gt()||"https:"===Gt()||(0,P.ru)()||El())&&!((0,P.b$)()||(0,P.UG)())&&hp()&&!fp()}function pp(){return El()&&"undefined"!=typeof document}function Ga(){return(Ga=(0,E.Z)(function*(){return!!pp()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Xn={LOCAL:"local",NONE:"none",SESSION:"session"},Wa=Ee,pm="persistence";function fh(y){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,E.Z)(function*(y){yield y._initializationPromise;const h=ph(),p=pt(pm,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function ph(){var y;try{return(null===(y="undefined"!=typeof window?window:null)||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Xu=Ee;class co{constructor(){this.browserResolver=nn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=Ko}_openPopup(h,p,v,T){var x=this;return(0,E.Z)(function*(){var U;Cn(null===(U=x.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Z=Zu(h,p,v,Pe(),T);return function(y,h,p,v=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let Z="";const Ie=Object.assign(Object.assign({},np),{width:v.toString(),height:T.toString(),top:x,left:U}),ye=(0,P.z$)().toLowerCase();p&&(Z=zs(ye)?"_blank":p),lt(ye)&&(h=h||"http://localhost",Ie.scrollbars="yes");const ke=Object.entries(Ie).reduce((Rt,[cr,Ei])=>`${Rt}${cr}=${Ei},`,"");if(function(y=(0,P.z$)()){var h;return zr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(ye)&&"_self"!==Z)return function(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",Z),new rp(null);const Ue=window.open(h||"",Z,ke);Ee(Ue,y,"popup-blocked");try{Ue.focus()}catch(Rt){}return new rp(Ue)}(h,Z,ur())})()}_openRedirect(h,p,v,T){var x=this;return(0,E.Z)(function*(){return yield x._originValidation(h),y=Zu(h,p,v,Pe(),T),On().location.href=y,new Promise(()=>{});var y})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Cn(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,E.Z)(function*(){const v=yield function(y){return nh.apply(this,arguments)}(h),T=new Zo(h);return v.register("authEvent",x=>(Ee(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(fl,{type:fl},T=>{var x;const U=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[fl];void 0!==U&&p(!!U),vt(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(y){return dl.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Fc()||qs()||zr()}}),this.cordovaResolver=nn(class{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ko}_initialize(h){var p=this;return(0,E.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new ap(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){vt(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var x=this;return(0,E.Z)(function*(){!function(y){var h,p,v,T,x,U,Z,Ie,ye,ke;const Ue=Qo();Ee("function"==typeof(null===(h=null==Ue?void 0:Ue.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ee(void 0!==(null===(p=null==Ue?void 0:Ue.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ee("function"==typeof(null===(x=null===(T=null===(v=null==Ue?void 0:Ue.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(Ie=null===(Z=null===(U=null==Ue?void 0:Ue.cordova)||void 0===U?void 0:U.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Ie?void 0:Ie.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ee("function"==typeof(null===(ke=null===(ye=null==Ue?void 0:Ue.cordova)||void 0===ye?void 0:ye.InAppBrowser)||void 0===ke?void 0:ke.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield x._initialize(h);yield U.initialized(),U.resetRedirect(),Os.clear(),yield x._originValidation(h);const Z=function(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Fs(),postBody:null,tenantId:y.tenantId,error:Dn(y,"no-auth-event")}}(h,v,T);yield function(y,h){return oh()._set(uo(y),h)}(h,Z);const Ie=yield function(y,h,p){return ml.apply(this,arguments)}(h,Z,p),ye=yield function(y){const{cordova:h}=Qo();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ie);return function(y,h,p){return ih.apply(this,arguments)}(h,U,ye)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(y){return um.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:x}=Qo(),U=setTimeout((0,E.Z)(function*(){yield fn(h),p.onEvent($a())}),500),Z=function(){var ke=(0,E.Z)(function*(Ue){clearTimeout(U);const Rt=yield fn(h);let cr=null;Rt&&(null==Ue?void 0:Ue.url)&&(cr=function(y,h){var p,v;const T=function(y){const h=ah(y),p=h.link?decodeURIComponent(h.link):void 0,v=ah(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return ah(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const x=ah(T),U=x.firebaseError?function(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,Z=null===(v=null===(p=null==U?void 0:U.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Ie=Z?Dn(Z):null;return Ie?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ie,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Rt,Ue.url)),p.onEvent(cr||$a())});return function(Rt){return ke.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,Z);const Ie=T,ye=`${x.packageName.toLowerCase()}://`;Qo().handleOpenURL=function(){var ke=(0,E.Z)(function*(Ue){if(Ue.toLowerCase().startsWith(ye)&&Z({url:Ue}),"function"==typeof Ie)try{Ie(Ue)}catch(Rt){console.error(Rt)}});return function(Ue){return ke.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=Ko}_initialize(h){var p=this;return(0,E.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var x=this;return(0,E.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var x=this;return(0,E.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return pp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,E.Z)(function*(){if(h.underlyingResolver)return;const p=yield function(){return Ga.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function wl(y){return y.unwrap()}function $_(y){return Il(y)}function Il(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Me.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Fn;break;case"facebook.com":v=qc;break;case"github.com":v=rn;break;case"twitter.com":v=Kc;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:U,pendingToken:Z,nonce:Ie}=h;return x||U||T||Z?Z?p.startsWith("saml.")?_a._create(p,Z):hi._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:T,accessToken:x}):new Ds(p).credential({idToken:T,accessToken:x,rawNonce:Ie}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function zt(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new bl(y,function(y,h){var p;const v=(0,P.m9)(y),T=h;return Ee(h.customData.operationType,v,"argument-error"),Ee(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Vu._fromError(v,T)}(y,h));else if(v){const T=Il(h),x=h;T&&(x.credential=T,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:$_(p),additionalUserInfo:jd(p),user:Ls.getOrCreate(T)}})}function mh(y,h){return mp.apply(this,arguments)}function mp(){return(mp=(0,E.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>zt(y,p.confirm(v))}})).apply(this,arguments)}class bl{constructor(h,p){this.resolver=p,this.auth=function(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return zt(wl(this.auth),this.resolver.resolveSignIn(h))}}class Ls{constructor(h){this._delegate=h,this.multiFactor=function(y){const h=(0,P.m9)(y);return Bu.has(h)||Bu.set(h,xa._fromUser(h)),Bu.get(h)}(h)}static getOrCreate(h){return Ls.USER_MAP.has(h)||Ls.USER_MAP.set(h,new Ls(h)),Ls.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,E.Z)(function*(){return zt(p.auth,Au(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,E.Z)(function*(){return mh(v.auth,function(y,h,p){return b.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,E.Z)(function*(){return zt(p.auth,function(y,h,p){return al.apply(this,arguments)}(p._delegate,h,co))})()}linkWithRedirect(h){var p=this;return(0,E.Z)(function*(){return yield fh(vn(p.auth)),function(y,h,p){return function(y,h,p){return Xd.apply(this,arguments)}(y,h,p)}(p._delegate,h,co)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,E.Z)(function*(){return zt(p.auth,Fr(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return mh(this.auth,function(y,h,p){return N.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return zt(this.auth,function(y,h,p){return Pa.apply(this,arguments)}(this._delegate,h,co))}reauthenticateWithRedirect(h){var p=this;return(0,E.Z)(function*(){return yield fh(vn(p.auth)),function(y,h,p){return function(y,h,p){return Fa.apply(this,arguments)}(y,h,p)}(p._delegate,h,co)})()}sendEmailVerification(h){return function(y,h){return tn.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,E.Z)(function*(){return yield function(y,h){return Su.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function(y,h){return Uo((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function(y,h){return Uo((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(y,h){return _e.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(y,h){return tl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function(y,h,p){return el.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ls.USER_MAP=new WeakMap;const yh=Ee;let yp=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;yh(T,"invalid-api-key",{appName:p.name}),yh(T,"invalid-api-key",{appName:p.name});const x="undefined"!=typeof window?co:void 0;this._delegate=v.initialize({options:{persistence:H_(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(zi),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ls.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function(y,h,p){const v=vn(y);Ee(v._canInitEmulator,v,"emulator-config-failed"),Ee(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=Cd(h),{host:U,port:Z}=function(y){const h=Cd(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const x=T[1];return{host:x,port:dn(v.substr(x.length+1))}}{const[x,U]=v.split(":");return{host:x,port:dn(U)}}}(h);v.config.emulator={url:`${x}//${U}${null===Z?"":`:${Z}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:Z,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function(y,h){return to.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xu(this._delegate,p)}confirmPasswordReset(p,v){return function(y,h,p){return Yc.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,E.Z)(function*(){return zt(T._delegate,function(y,h,p){return Nu.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(y,h){return xn.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(y,h){const p=fi.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,E.Z)(function*(){yh(Ha(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function(y,h){return La.apply(this,arguments)}(p._delegate,co);return v?zt(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(y,h){vn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:x,error:U,complete:Z}=gm(p,v,T);return this._delegate.onAuthStateChanged(x,U,Z)}onIdTokenChanged(p,v,T){const{next:x,error:U,complete:Z}=gm(p,v,T);return this._delegate.onIdTokenChanged(x,U,Z)}sendSignInLinkToEmail(p,v){return function(y,h,p){return Vo.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function(y,h,p){return Ss.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,E.Z)(function*(){let T;switch(function(y,h){Wa(Object.values(Xn).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?Wa(h!==Xn.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Wa(h===Xn.NONE,y,"unsupported-persistence-type"):fp()?Wa(h===Xn.NONE||h===Xn.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Wa(h===Xn.NONE||hp(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Xn.SESSION:T=ro;break;case Xn.LOCAL:T=(yield nn(us)._isAvailable())?us:mi;break;case Xn.NONE:T=ir;break;default:return vt("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return zt(this._delegate,function(y){return Cu.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return zt(this._delegate,Ea(this._delegate,p))}signInWithCustomToken(p){return zt(this._delegate,function(y,h){return Pi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return zt(this._delegate,function(y,h,p){return Ea((0,P.m9)(y),Qs.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return zt(this._delegate,function(y,h,p){return Ud.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return mh(this._delegate,function(y,h,p){return Qd.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,E.Z)(function*(){return yh(Ha(),v._delegate,"operation-not-supported-in-this-environment"),zt(v._delegate,function(y,h,p){return _r.apply(this,arguments)}(v._delegate,p,co))})()}signInWithRedirect(p){var v=this;return(0,E.Z)(function*(){return yh(Ha(),v._delegate,"operation-not-supported-in-this-environment"),yield fh(v._delegate),function(y,h,p){return function(y,h,p){return Zg.apply(this,arguments)}(y,h,p)}(v._delegate,p,co)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(y,h){return Ru.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Xn,y})();function gm(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:U=>T(U&&Ls.getOrCreate(U)),error:h,complete:p}}function H_(y,h){const p=function(y,h){const p=ph();if(!p)return[];const v=pt(pm,y,h);switch(p.getItem(v)){case Xn.NONE:return[ir];case Xn.LOCAL:return[us,ro];case Xn.SESSION:return[ro];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(us)&&p.push(us),"undefined"!=typeof window)for(const v of[mi,ro])p.includes(v)||p.push(v);return p.includes(ir)||p.push(ir),p}class _p{constructor(){this.providerId="phone",this._delegate=new Me(wl(K.Z.auth()))}static credential(h,p){return Me.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}_p.PHONE_SIGN_IN_METHOD=Me.PHONE_SIGN_IN_METHOD,_p.PROVIDER_ID=Me.PROVIDER_ID;const ec=Ee;class Vs{constructor(h,p,v=K.Z.app()){var T;ec(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Ps(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new rr.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new yp(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qs,FacebookAuthProvider:qc,GithubAuthProvider:rn,GoogleAuthProvider:Fn,OAuthProvider:Ds,SAMLAuthProvider:or,PhoneAuthProvider:_p,PhoneMultiFactorGenerator:pl,RecaptchaVerifier:Vs,TwitterAuthProvider:Kc,Auth:yp,AuthCredential:Ji,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(K.Z)},7574:(We,de,k)=>{"use strict";k.d(de,{y:()=>L});var E=k(7393),P=k(9181),ee=k(6490),X=k(6554),le=k(4487);var O=k(2494);let L=(()=>{class G{constructor(pe){this._isScalar=!1,pe&&(this._subscribe=pe)}lift(pe){const ce=new G;return ce.source=this,ce.operator=pe,ce}subscribe(pe,ce,se){const{operator:ve}=this,De=function(G,ne,pe){if(G){if(G instanceof E.L)return G;if(G[P.b])return G[P.b]()}return G||ne||pe?new E.L(G,ne,pe):new E.L(ee.c)}(pe,ce,se);if(De.add(ve?ve.call(De,this.source):this.source||O.v.useDeprecatedSynchronousErrorHandling&&!De.syncErrorThrowable?this._subscribe(De):this._trySubscribe(De)),O.v.useDeprecatedSynchronousErrorHandling&&De.syncErrorThrowable&&(De.syncErrorThrowable=!1,De.syncErrorThrown))throw De.syncErrorValue;return De}_trySubscribe(pe){try{return this._subscribe(pe)}catch(ce){O.v.useDeprecatedSynchronousErrorHandling&&(pe.syncErrorThrown=!0,pe.syncErrorValue=ce),function(G){for(;G;){const{closed:ne,destination:pe,isStopped:ce}=G;if(ne||ce)return!1;G=pe&&pe instanceof E.L?pe:null}return!0}(pe)?pe.error(ce):console.warn(ce)}}forEach(pe,ce){return new(ce=q(ce))((se,ve)=>{let De;De=this.subscribe(me=>{try{pe(me)}catch(Fe){ve(Fe),De&&De.unsubscribe()}},ve,se)})}_subscribe(pe){const{source:ce}=this;return ce&&ce.subscribe(pe)}[X.L](){return this}pipe(...pe){return 0===pe.length?this:function(G){return 0===G.length?le.y:1===G.length?G[0]:function(pe){return G.reduce((ce,se)=>se(ce),pe)}}(pe)(this)}toPromise(pe){return new(pe=q(pe))((ce,se)=>{let ve;this.subscribe(De=>ve=De,De=>se(De),()=>ce(ve))})}}return G.create=ne=>new G(ne),G})();function q(G){if(G||(G=O.v.Promise||Promise),!G)throw new Error("no Promise impl found");return G}},6490:(We,de,k)=>{"use strict";k.d(de,{c:()=>P});var E=k(2494),K=k(4449);const P={closed:!0,next(ee){},error(ee){if(E.v.useDeprecatedSynchronousErrorHandling)throw ee;(0,K.z)(ee)},complete(){}}},9765:(We,de,k)=>{"use strict";k.d(de,{Yc:()=>le,xQ:()=>oe});var E=k(7574),K=k(7393),P=k(5319),ee=k(7971),Y=k(8858),X=k(9181);class le extends K.L{constructor(L){super(L),this.destination=L}}let oe=(()=>{class O extends E.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[X.b](){return new le(this)}lift(q){const G=new Q(this,this);return G.operator=q,G}next(q){if(this.closed)throw new ee.N;if(!this.isStopped){const{observers:G}=this,ne=G.length,pe=G.slice();for(let ce=0;ce<ne;ce++)pe[ce].next(q)}}error(q){if(this.closed)throw new ee.N;this.hasError=!0,this.thrownError=q,this.isStopped=!0;const{observers:G}=this,ne=G.length,pe=G.slice();for(let ce=0;ce<ne;ce++)pe[ce].error(q);this.observers.length=0}complete(){if(this.closed)throw new ee.N;this.isStopped=!0;const{observers:q}=this,G=q.length,ne=q.slice();for(let pe=0;pe<G;pe++)ne[pe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(q){if(this.closed)throw new ee.N;return super._trySubscribe(q)}_subscribe(q){if(this.closed)throw new ee.N;return this.hasError?(q.error(this.thrownError),P.w.EMPTY):this.isStopped?(q.complete(),P.w.EMPTY):(this.observers.push(q),new Y.W(this,q))}asObservable(){const q=new E.y;return q.source=this,q}}return O.create=(L,q)=>new Q(L,q),O})();class Q extends oe{constructor(L,q){super(),this.destination=L,this.source=q}next(L){const{destination:q}=this;q&&q.next&&q.next(L)}error(L){const{destination:q}=this;q&&q.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:q}=this;return q?this.source.subscribe(L):P.w.EMPTY}}},8858:(We,de,k)=>{"use strict";k.d(de,{W:()=>K});var E=k(5319);class K extends E.w{constructor(ee,Y){super(),this.subject=ee,this.subscriber=Y,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ee=this.subject,Y=ee.observers;if(this.subject=null,!Y||0===Y.length||ee.isStopped||ee.closed)return;const X=Y.indexOf(this.subscriber);-1!==X&&Y.splice(X,1)}}},7393:(We,de,k)=>{"use strict";k.d(de,{L:()=>le});var E=k(9105),K=k(6490),P=k(5319),ee=k(9181),Y=k(2494),X=k(4449);class le extends P.w{constructor(O,L,q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=K.c;break;case 1:if(!O){this.destination=K.c;break}if("object"==typeof O){O instanceof le?(this.syncErrorThrowable=O.syncErrorThrowable,this.destination=O,O.add(this)):(this.syncErrorThrowable=!0,this.destination=new oe(this,O));break}default:this.syncErrorThrowable=!0,this.destination=new oe(this,O,L,q)}}[ee.b](){return this}static create(O,L,q){const G=new le(O,L,q);return G.syncErrorThrowable=!1,G}next(O){this.isStopped||this._next(O)}error(O){this.isStopped||(this.isStopped=!0,this._error(O))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(O){this.destination.next(O)}_error(O){this.destination.error(O),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:O}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=O,this}}class oe extends le{constructor(O,L,q,G){super(),this._parentSubscriber=O;let ne,pe=this;(0,E.m)(L)?ne=L:L&&(ne=L.next,q=L.error,G=L.complete,L!==K.c&&(pe=Object.create(L),(0,E.m)(pe.unsubscribe)&&this.add(pe.unsubscribe.bind(pe)),pe.unsubscribe=this.unsubscribe.bind(this))),this._context=pe,this._next=ne,this._error=q,this._complete=G}next(O){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;Y.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,O)&&this.unsubscribe():this.__tryOrUnsub(this._next,O)}}error(O){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:q}=Y.v;if(this._error)q&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,O),this.unsubscribe()):(this.__tryOrUnsub(this._error,O),this.unsubscribe());else if(L.syncErrorThrowable)q?(L.syncErrorValue=O,L.syncErrorThrown=!0):(0,X.z)(O),this.unsubscribe();else{if(this.unsubscribe(),q)throw O;(0,X.z)(O)}}}complete(){if(!this.isStopped){const{_parentSubscriber:O}=this;if(this._complete){const L=()=>this._complete.call(this._context);Y.v.useDeprecatedSynchronousErrorHandling&&O.syncErrorThrowable?(this.__tryOrSetError(O,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(O,L){try{O.call(this._context,L)}catch(q){if(this.unsubscribe(),Y.v.useDeprecatedSynchronousErrorHandling)throw q;(0,X.z)(q)}}__tryOrSetError(O,L,q){if(!Y.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,q)}catch(G){return Y.v.useDeprecatedSynchronousErrorHandling?(O.syncErrorValue=G,O.syncErrorThrown=!0,!0):((0,X.z)(G),!0)}return!1}_unsubscribe(){const{_parentSubscriber:O}=this;this._context=null,this._parentSubscriber=null,O.unsubscribe()}}},5319:(We,de,k)=>{"use strict";k.d(de,{w:()=>X});var E=k(9796),K=k(1555),P=k(9105);const Y=(()=>{function oe(Q){return Error.call(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((O,L)=>`${L+1}) ${O.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q,this}return oe.prototype=Object.create(Error.prototype),oe})();class X{constructor(Q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Q&&(this._ctorUnsubscribe=!0,this._unsubscribe=Q)}unsubscribe(){let Q;if(this.closed)return;let{_parentOrParents:O,_ctorUnsubscribe:L,_unsubscribe:q,_subscriptions:G}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,O instanceof X)O.remove(this);else if(null!==O)for(let ne=0;ne<O.length;++ne)O[ne].remove(this);if((0,P.m)(q)){L&&(this._unsubscribe=void 0);try{q.call(this)}catch(ne){Q=ne instanceof Y?le(ne.errors):[ne]}}if((0,E.k)(G)){let ne=-1,pe=G.length;for(;++ne<pe;){const ce=G[ne];if((0,K.K)(ce))try{ce.unsubscribe()}catch(se){Q=Q||[],se instanceof Y?Q=Q.concat(le(se.errors)):Q.push(se)}}}if(Q)throw new Y(Q)}add(Q){let O=Q;if(!Q)return X.EMPTY;switch(typeof Q){case"function":O=new X(Q);case"object":if(O===this||O.closed||"function"!=typeof O.unsubscribe)return O;if(this.closed)return O.unsubscribe(),O;if(!(O instanceof X)){const G=O;O=new X,O._subscriptions=[G]}break;default:throw new Error("unrecognized teardown "+Q+" added to Subscription.")}let{_parentOrParents:L}=O;if(null===L)O._parentOrParents=this;else if(L instanceof X){if(L===this)return O;O._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return O;L.push(this)}const q=this._subscriptions;return null===q?this._subscriptions=[O]:q.push(O),O}remove(Q){const O=this._subscriptions;if(O){const L=O.indexOf(Q);-1!==L&&O.splice(L,1)}}}var oe;function le(oe){return oe.reduce((Q,O)=>Q.concat(O instanceof Y?O.errors:O),[])}X.EMPTY=((oe=new X).closed=!0,oe)},2494:(We,de,k)=>{"use strict";k.d(de,{v:()=>K});let E=!1;const K={Promise:void 0,set useDeprecatedSynchronousErrorHandling(P){if(P){const ee=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ee.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=P},get useDeprecatedSynchronousErrorHandling(){return E}}},5345:(We,de,k)=>{"use strict";k.d(de,{IY:()=>ee,Ds:()=>X,ft:()=>oe});var E=k(7393),K=k(7574),P=k(7444);class ee extends E.L{constructor(O){super(),this.parent=O}_next(O){this.parent.notifyNext(O)}_error(O){this.parent.notifyError(O),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class X extends E.L{notifyNext(O){this.destination.next(O)}notifyError(O){this.destination.error(O)}notifyComplete(){this.destination.complete()}}function oe(Q,O){if(O.closed)return;if(Q instanceof K.y)return Q.subscribe(O);let L;try{L=(0,P.s)(Q)(O)}catch(q){O.error(q)}return L}},2441:(We,de,k)=>{"use strict";k.d(de,{c:()=>Y,N:()=>X});var E=k(9765),K=k(7574),P=k(5319),ee=k(1307);class Y extends K.y{constructor(L,q){super(),this.source=L,this.subjectFactory=q,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new P.w,L.add(this.source.subscribe(new le(this.getSubject(),this))),L.closed&&(this._connection=null,L=P.w.EMPTY)),L}refCount(){return(0,ee.x)()(this)}}const X=(()=>{const O=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:O._subscribe},_isComplete:{value:O._isComplete,writable:!0},getSubject:{value:O.getSubject},connect:{value:O.connect},refCount:{value:O.refCount}}})();class le extends E.Yc{constructor(L,q){super(L),this.connectable=q}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const q=L._connection;L._refCount=0,L._subject=null,L._connection=null,q&&q.unsubscribe()}}}},9193:(We,de,k)=>{"use strict";k.d(de,{E:()=>K,c:()=>P});var E=k(7574);const K=new E.y(Y=>Y.complete());function P(Y){return Y?function(Y){return new E.y(X=>Y.schedule(()=>X.complete()))}(Y):K}},4402:(We,de,k)=>{"use strict";k.d(de,{D:()=>pe});var E=k(7574),K=k(7444),P=k(5319),ee=k(6554),le=k(4087),oe=k(377),L=k(4072),q=k(9489);function pe(ce,se){return se?function(ce,se){if(null!=ce){if(function(ce){return ce&&"function"==typeof ce[ee.L]}(ce))return function(ce,se){return new E.y(ve=>{const De=new P.w;return De.add(se.schedule(()=>{const me=ce[ee.L]();De.add(me.subscribe({next(Fe){De.add(se.schedule(()=>ve.next(Fe)))},error(Fe){De.add(se.schedule(()=>ve.error(Fe)))},complete(){De.add(se.schedule(()=>ve.complete()))}}))})),De})}(ce,se);if((0,L.t)(ce))return function(ce,se){return new E.y(ve=>{const De=new P.w;return De.add(se.schedule(()=>ce.then(me=>{De.add(se.schedule(()=>{ve.next(me),De.add(se.schedule(()=>ve.complete()))}))},me=>{De.add(se.schedule(()=>ve.error(me)))}))),De})}(ce,se);if((0,q.z)(ce))return(0,le.r)(ce,se);if(function(ce){return ce&&"function"==typeof ce[oe.hZ]}(ce)||"string"==typeof ce)return function(ce,se){if(!ce)throw new Error("Iterable cannot be null");return new E.y(ve=>{const De=new P.w;let me;return De.add(()=>{me&&"function"==typeof me.return&&me.return()}),De.add(se.schedule(()=>{me=ce[oe.hZ](),De.add(se.schedule(function(){if(ve.closed)return;let Fe,qe;try{const xe=me.next();Fe=xe.value,qe=xe.done}catch(xe){return void ve.error(xe)}qe?ve.complete():(ve.next(Fe),this.schedule())}))})),De})}(ce,se)}throw new TypeError((null!==ce&&typeof ce||ce)+" is not observable")}(ce,se):ce instanceof E.y?ce:new E.y((0,K.s)(ce))}},6693:(We,de,k)=>{"use strict";k.d(de,{n:()=>ee});var E=k(7574),K=k(5015),P=k(4087);function ee(Y,X){return X?(0,P.r)(Y,X):new E.y((0,K.V)(Y))}},6682:(We,de,k)=>{"use strict";k.d(de,{T:()=>Y});var E=k(7574),K=k(4869),P=k(3282),ee=k(6693);function Y(...X){let le=Number.POSITIVE_INFINITY,oe=null,Q=X[X.length-1];return(0,K.K)(Q)?(oe=X.pop(),X.length>1&&"number"==typeof X[X.length-1]&&(le=X.pop())):"number"==typeof Q&&(le=X.pop()),null===oe&&1===X.length&&X[0]instanceof E.y?X[0]:(0,P.J)(le)((0,ee.n)(X,oe))}},5917:(We,de,k)=>{"use strict";k.d(de,{of:()=>ee});var E=k(4869),K=k(6693),P=k(4087);function ee(...Y){let X=Y[Y.length-1];return(0,E.K)(X)?(Y.pop(),(0,P.r)(Y,X)):(0,K.n)(Y)}},8002:(We,de,k)=>{"use strict";k.d(de,{U:()=>K});var E=k(7393);function K(Y,X){return function(oe){if("function"!=typeof Y)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return oe.lift(new P(Y,X))}}class P{constructor(X,le){this.project=X,this.thisArg=le}call(X,le){return le.subscribe(new ee(X,this.project,this.thisArg))}}class ee extends E.L{constructor(X,le,oe){super(X),this.project=le,this.count=0,this.thisArg=oe||this}_next(X){let le;try{le=this.project.call(this.thisArg,X,this.count++)}catch(oe){return void this.destination.error(oe)}this.destination.next(le)}}},3282:(We,de,k)=>{"use strict";k.d(de,{J:()=>P});var E=k(9773),K=k(4487);function P(ee=Number.POSITIVE_INFINITY){return(0,E.zg)(K.y,ee)}},9773:(We,de,k)=>{"use strict";k.d(de,{zg:()=>ee});var E=k(8002),K=k(4402),P=k(5345);function ee(oe,Q,O=Number.POSITIVE_INFINITY){return"function"==typeof Q?L=>L.pipe(ee((q,G)=>(0,K.D)(oe(q,G)).pipe((0,E.U)((ne,pe)=>Q(q,ne,G,pe))),O)):("number"==typeof Q&&(O=Q),L=>L.lift(new Y(oe,O)))}class Y{constructor(Q,O=Number.POSITIVE_INFINITY){this.project=Q,this.concurrent=O}call(Q,O){return O.subscribe(new X(Q,this.project,this.concurrent))}}class X extends P.Ds{constructor(Q,O,L=Number.POSITIVE_INFINITY){super(Q),this.project=O,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Q){this.active<this.concurrent?this._tryNext(Q):this.buffer.push(Q)}_tryNext(Q){let O;const L=this.index++;try{O=this.project(Q,L)}catch(q){return void this.destination.error(q)}this.active++,this._innerSub(O)}_innerSub(Q){const O=new P.IY(this),L=this.destination;L.add(O);const q=(0,P.ft)(Q,O);q!==O&&L.add(q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Q){this.destination.next(Q)}notifyComplete(){const Q=this.buffer;this.active--,Q.length>0?this._next(Q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(We,de,k)=>{"use strict";k.d(de,{ht:()=>L,QV:()=>Q});var E=k(7393),K=k(9193),P=k(5917),ee=k(7574);class oe{constructor(ne,pe,ce){this.kind=ne,this.value=pe,this.error=ce,this.hasValue="N"===ne}observe(ne){switch(this.kind){case"N":return ne.next&&ne.next(this.value);case"E":return ne.error&&ne.error(this.error);case"C":return ne.complete&&ne.complete()}}do(ne,pe,ce){switch(this.kind){case"N":return ne&&ne(this.value);case"E":return pe&&pe(this.error);case"C":return ce&&ce()}}accept(ne,pe,ce){return ne&&"function"==typeof ne.next?this.observe(ne):this.do(ne,pe,ce)}toObservable(){switch(this.kind){case"N":return(0,P.of)(this.value);case"E":return G=this.error,new ee.y(pe=>pe.error(G));case"C":return(0,K.c)()}var G;throw new Error("unexpected notification kind value")}static createNext(ne){return void 0!==ne?new oe("N",ne):oe.undefinedValueNotification}static createError(ne){return new oe("E",void 0,ne)}static createComplete(){return oe.completeNotification}}function Q(G,ne=0){return function(ce){return ce.lift(new O(G,ne))}}oe.completeNotification=new oe("C"),oe.undefinedValueNotification=new oe("N",void 0);class O{constructor(ne,pe=0){this.scheduler=ne,this.delay=pe}call(ne,pe){return pe.subscribe(new L(ne,this.scheduler,this.delay))}}class L extends E.L{constructor(ne,pe,ce=0){super(ne),this.scheduler=pe,this.delay=ce}static dispatch(ne){const{notification:pe,destination:ce}=ne;pe.observe(ce),this.unsubscribe()}scheduleMessage(ne){this.destination.add(this.scheduler.schedule(L.dispatch,this.delay,new q(ne,this.destination)))}_next(ne){this.scheduleMessage(oe.createNext(ne))}_error(ne){this.scheduleMessage(oe.createError(ne)),this.unsubscribe()}_complete(){this.scheduleMessage(oe.createComplete()),this.unsubscribe()}}class q{constructor(ne,pe){this.notification=ne,this.destination=pe}}},1307:(We,de,k)=>{"use strict";k.d(de,{x:()=>K});var E=k(7393);function K(){return function(X){return X.lift(new P(X))}}class P{constructor(X){this.connectable=X}call(X,le){const{connectable:oe}=this;oe._refCount++;const Q=new ee(X,oe),O=le.subscribe(Q);return Q.closed||(Q.connection=oe.connect()),O}}class ee extends E.L{constructor(X,le){super(X),this.connectable=le}_unsubscribe(){const{connectable:X}=this;if(!X)return void(this.connection=null);this.connectable=null;const le=X._refCount;if(le<=0)return void(this.connection=null);if(X._refCount=le-1,le>1)return void(this.connection=null);const{connection:oe}=this,Q=X._connection;this.connection=null,Q&&(!oe||Q===oe)&&Q.unsubscribe()}}},3101:(We,de,k)=>{"use strict";k.d(de,{R:()=>se});var E=k(7574);let K=1;const P=Promise.resolve(),ee={};function Y(De){return De in ee&&(delete ee[De],!0)}const X={setImmediate(De){const me=K++;return ee[me]=!0,P.then(()=>Y(me)&&De()),me},clearImmediate(De){Y(De)}};var oe=k(6465),O=k(6102);const G=new class extends O.v{flush(me){this.active=!0,this.scheduled=void 0;const{actions:Fe}=this;let qe,xe=-1,St=Fe.length;me=me||Fe.shift();do{if(qe=me.execute(me.state,me.delay))break}while(++xe<St&&(me=Fe.shift()));if(this.active=!1,qe){for(;++xe<St&&(me=Fe.shift());)me.unsubscribe();throw qe}}}(class extends oe.o{constructor(me,Fe){super(me,Fe),this.scheduler=me,this.work=Fe}requestAsyncId(me,Fe,qe=0){return null!==qe&&qe>0?super.requestAsyncId(me,Fe,qe):(me.actions.push(this),me.scheduled||(me.scheduled=X.setImmediate(me.flush.bind(me,null))))}recycleAsyncId(me,Fe,qe=0){if(null!==qe&&qe>0||null===qe&&this.delay>0)return super.recycleAsyncId(me,Fe,qe);0===me.actions.length&&(X.clearImmediate(Fe),me.scheduled=void 0)}});var ne=k(9796);class ce extends E.y{constructor(me,Fe=0,qe=G){var De;super(),this.source=me,this.delayTime=Fe,this.scheduler=qe,(!(!(0,ne.k)(De=Fe)&&De-parseFloat(De)+1>=0)||Fe<0)&&(this.delayTime=0),(!qe||"function"!=typeof qe.schedule)&&(this.scheduler=G)}static create(me,Fe=0,qe=G){return new ce(me,Fe,qe)}static dispatch(me){const{source:Fe,subscriber:qe}=me;return this.add(Fe.subscribe(qe))}_subscribe(me){return this.scheduler.schedule(ce.dispatch,this.delayTime,{source:this.source,subscriber:me})}}function se(De,me=0){return function(qe){return qe.lift(new ve(De,me))}}class ve{constructor(me,Fe){this.scheduler=me,this.delay=Fe}call(me,Fe){return new ce(Fe,this.delay,this.scheduler).subscribe(me)}}},3342:(We,de,k)=>{"use strict";k.d(de,{b:()=>ee});var E=k(7393);function K(){}var P=k(9105);function ee(le,oe,Q){return function(L){return L.lift(new Y(le,oe,Q))}}class Y{constructor(oe,Q,O){this.nextOrObserver=oe,this.error=Q,this.complete=O}call(oe,Q){return Q.subscribe(new X(oe,this.nextOrObserver,this.error,this.complete))}}class X extends E.L{constructor(oe,Q,O,L){super(oe),this._tapNext=K,this._tapError=K,this._tapComplete=K,this._tapError=O||K,this._tapComplete=L||K,(0,P.m)(Q)?(this._context=this,this._tapNext=Q):Q&&(this._context=Q,this._tapNext=Q.next||K,this._tapError=Q.error||K,this._tapComplete=Q.complete||K)}_next(oe){try{this._tapNext.call(this._context,oe)}catch(Q){return void this.destination.error(Q)}this.destination.next(oe)}_error(oe){try{this._tapError.call(this._context,oe)}catch(Q){return void this.destination.error(Q)}this.destination.error(oe)}_complete(){try{this._tapComplete.call(this._context)}catch(oe){return void this.destination.error(oe)}return this.destination.complete()}}},4087:(We,de,k)=>{"use strict";k.d(de,{r:()=>P});var E=k(7574),K=k(5319);function P(ee,Y){return new E.y(X=>{const le=new K.w;let oe=0;return le.add(Y.schedule(function(){oe!==ee.length?(X.next(ee[oe++]),X.closed||le.add(this.schedule())):X.complete()})),le})}},6465:(We,de,k)=>{"use strict";k.d(de,{o:()=>P});var E=k(5319);class K extends E.w{constructor(Y,X){super()}schedule(Y,X=0){return this}}class P extends K{constructor(Y,X){super(Y,X),this.scheduler=Y,this.work=X,this.pending=!1}schedule(Y,X=0){if(this.closed)return this;this.state=Y;const le=this.id,oe=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(oe,le,X)),this.pending=!0,this.delay=X,this.id=this.id||this.requestAsyncId(oe,this.id,X),this}requestAsyncId(Y,X,le=0){return setInterval(Y.flush.bind(Y,this),le)}recycleAsyncId(Y,X,le=0){if(null!==le&&this.delay===le&&!1===this.pending)return X;clearInterval(X)}execute(Y,X){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(Y,X);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Y,X){let oe,le=!1;try{this.work(Y)}catch(Q){le=!0,oe=!!Q&&Q||new Error(Q)}if(le)return this.unsubscribe(),oe}_unsubscribe(){const Y=this.id,X=this.scheduler,le=X.actions,oe=le.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==oe&&le.splice(oe,1),null!=Y&&(this.id=this.recycleAsyncId(X,Y,null)),this.delay=null}}},6102:(We,de,k)=>{"use strict";k.d(de,{v:()=>K});let E=(()=>{class P{constructor(Y,X=P.now){this.SchedulerAction=Y,this.now=X}schedule(Y,X=0,le){return new this.SchedulerAction(this,Y).schedule(le,X)}}return P.now=()=>Date.now(),P})();class K extends E{constructor(ee,Y=E.now){super(ee,()=>K.delegate&&K.delegate!==this?K.delegate.now():Y()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ee,Y=0,X){return K.delegate&&K.delegate!==this?K.delegate.schedule(ee,Y,X):super.schedule(ee,Y,X)}flush(ee){const{actions:Y}=this;if(this.active)return void Y.push(ee);let X;this.active=!0;do{if(X=ee.execute(ee.state,ee.delay))break}while(ee=Y.shift());if(this.active=!1,X){for(;ee=Y.shift();)ee.unsubscribe();throw X}}}},3637:(We,de,k)=>{"use strict";k.d(de,{z:()=>P});var E=k(6465);const P=new(k(6102).v)(E.o)},7771:(We,de,k)=>{"use strict";k.d(de,{c:()=>X,N:()=>Y});var E=k(6465),P=k(6102);const Y=new class extends P.v{}(class extends E.o{constructor(oe,Q){super(oe,Q),this.scheduler=oe,this.work=Q}schedule(oe,Q=0){return Q>0?super.schedule(oe,Q):(this.delay=Q,this.state=oe,this.scheduler.flush(this),this)}execute(oe,Q){return Q>0||this.closed?super.execute(oe,Q):this._execute(oe,Q)}requestAsyncId(oe,Q,O=0){return null!==O&&O>0||null===O&&this.delay>0?super.requestAsyncId(oe,Q,O):oe.flush(this)}}),X=Y},377:(We,de,k)=>{"use strict";k.d(de,{hZ:()=>K});const K="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(We,de,k)=>{"use strict";k.d(de,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(We,de,k)=>{"use strict";k.d(de,{b:()=>E});const E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(We,de,k)=>{"use strict";k.d(de,{N:()=>K});const K=(()=>{function P(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return P.prototype=Object.create(Error.prototype),P})()},4449:(We,de,k)=>{"use strict";function E(K){setTimeout(()=>{throw K},0)}k.d(de,{z:()=>E})},4487:(We,de,k)=>{"use strict";function E(K){return K}k.d(de,{y:()=>E})},9796:(We,de,k)=>{"use strict";k.d(de,{k:()=>E});const E=Array.isArray||(K=>K&&"number"==typeof K.length)},9489:(We,de,k)=>{"use strict";k.d(de,{z:()=>E});const E=K=>K&&"number"==typeof K.length&&"function"!=typeof K},9105:(We,de,k)=>{"use strict";function E(K){return"function"==typeof K}k.d(de,{m:()=>E})},1555:(We,de,k)=>{"use strict";function E(K){return null!==K&&"object"==typeof K}k.d(de,{K:()=>E})},4072:(We,de,k)=>{"use strict";function E(K){return!!K&&"function"!=typeof K.subscribe&&"function"==typeof K.then}k.d(de,{t:()=>E})},4869:(We,de,k)=>{"use strict";function E(K){return K&&"function"==typeof K.schedule}k.d(de,{K:()=>E})},7444:(We,de,k)=>{"use strict";k.d(de,{s:()=>L});var E=k(5015),K=k(4449),ee=k(377),X=k(6554),oe=k(9489),Q=k(4072),O=k(1555);const L=q=>{if(q&&"function"==typeof q[X.L])return(q=>G=>{const ne=q[X.L]();if("function"!=typeof ne.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ne.subscribe(G)})(q);if((0,oe.z)(q))return(0,E.V)(q);if((0,Q.t)(q))return(q=>G=>(q.then(ne=>{G.closed||(G.next(ne),G.complete())},ne=>G.error(ne)).then(null,K.z),G))(q);if(q&&"function"==typeof q[ee.hZ])return(q=>G=>{const ne=q[ee.hZ]();for(;;){let pe;try{pe=ne.next()}catch(ce){return G.error(ce),G}if(pe.done){G.complete();break}if(G.next(pe.value),G.closed)break}return"function"==typeof ne.return&&G.add(()=>{ne.return&&ne.return()}),G})(q);{const ne=`You provided ${(0,O.K)(q)?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ne)}}},5015:(We,de,k)=>{"use strict";k.d(de,{V:()=>E});const E=K=>P=>{for(let ee=0,Y=K.length;ee<Y&&!P.closed;ee++)P.next(K[ee]);P.complete()}},7831:(We,de,k)=>{"use strict";var E=k(3018);let K=null;function P(){return K}const le=new E.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,E.Yz7)({factory:Q,token:n,providedIn:"platform"}),n})();function Q(){return(0,E.LFG)(L)}const O=new E.OlP("Location Initialized");let L=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const s=P().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=P().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){q()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){q()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(le))},n.\u0275prov=(0,E.Yz7)({factory:G,token:n,providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function G(){return new L((0,E.LFG)(le))}function ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ce(n){return n&&"?"!==n[0]?"?"+n:n}let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,E.Yz7)({factory:ve,token:n,providedIn:"root"}),n})();function ve(n){const e=(0,E.LFG)(le).location;return new me((0,E.LFG)(oe),e&&e.origin||"")}const De=new E.OlP("appBaseHref");let me=(()=>{class n extends se{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ne(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+ce(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,c){const f=this.prepareExternalUrl(a+ce(c));this._platformLocation.pushState(t,s,f)}replaceState(t,s,a,c){const f=this.prepareExternalUrl(a+ce(c));this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(oe),E.LFG(De,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends se{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=ne(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,c){let f=this.prepareExternalUrl(a+ce(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,s,f)}replaceState(t,s,a,c){let f=this.prepareExternalUrl(a+ce(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(oe),E.LFG(De,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t,s){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=pe(yt(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+ce(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,yt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ce(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ce(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(se),E.LFG(oe))},n.normalizeQueryParams=ce,n.joinWithSlash=ne,n.stripTrailingSlash=pe,n.\u0275prov=(0,E.Yz7)({factory:xe,token:n,providedIn:"root"}),n})();function xe(){return new qe((0,E.LFG)(se),(0,E.LFG)(oe))}function yt(n){return n.replace(/\/index.html$/,"")}var Dt=(()=>((Dt=Dt||{})[Dt.Zero=0]="Zero",Dt[Dt.One=1]="One",Dt[Dt.Two=2]="Two",Dt[Dt.Few=3]="Few",Dt[Dt.Many=4]="Many",Dt[Dt.Other=5]="Other",Dt))();const en=E.kL8;class ir{}let Mi=(()=>{class n extends ir{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(en(s||this.locale)(t)){case Dt.Zero:return"zero";case Dt.One:return"one";case Dt.Two:return"two";case Dt.Few:return"few";case Dt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.soG))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),zr=(()=>{class n{constructor(t,s){this._viewContainer=t,this._context=new di,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$t("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$t("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(E.s_b),E.Y36(E.Rgc))},n.\u0275dir=E.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class di{constructor(){this.$implicit=null,this.ngIf=null}}function $t(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,E.AaK)(e)}'.`)}let Eu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[{provide:ir,useClass:Mi}]}),n})();function ma(n){return"server"===n}let ya=(()=>{class n{}return n.\u0275prov=(0,E.Yz7)({token:n,providedIn:"root",factory:()=>new Hf((0,E.LFG)(le),window)}),n})();class Hf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const c=a.shadowRoot;if(c){const f=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(f)return f}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(s-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Iu(this.window.history)||Iu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Iu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fi extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new fi,K||(K=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Mo=Mo||document.querySelector("base"),Mo?Mo.getAttribute("href"):null);return null==t?null:function(n){pi=pi||document.createElement("a"),pi.setAttribute("href",n);const e=pi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Mo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,c]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let pi,Mo=null;const Ds=new E.OlP("TRANSITION_ID"),Fn=[{provide:E.ip1,useFactory:function(n,e,t){return()=>{t.get(E.CZH).donePromise.then(()=>{const s=P(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)s.remove(a[c])})}},deps:[Ds,le,E.zs3],multi:!0}];class rn{static init(){(0,E.VLi)(new rn)}addToWindow(e){E.dqk.getAngularTestability=(s,a=!0)=>{const c=e.findTestabilityInTree(s,a);if(null==c)throw new Error("Could not find testability for element.");return c},E.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(s=>{const a=E.dqk.getAllAngularTestabilities();let c=a.length,f=!1;const m=function(I){f=f||I,c--,0==c&&s(f)};a.forEach(function(I){I.whenStable(m)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new E.OlP("EventManagerPlugins");let Ts=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let c=0;c<a.length;c++){const f=a[c];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Cs),E.LFG(E.R0b))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=P().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Js=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Fo=(()=>{class n extends Js{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,a.push(s.appendChild(f))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(va),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(va))}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(le))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function va(n){P().remove(n)}const he={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bt=/%COMP%/g;function eo(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?eo(n,a,t):(a=a.replace(bt,n),t.push(a))}return t}function Ia(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Pi=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new ns(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case E.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new Ss(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case E.ifc.ShadowDom:return new gi(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=eo(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Ts),E.LFG(Fo),E.LFG(E.AFp))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();class ns{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(he[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const c=he[a];c?e.setAttributeNS(c,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=he[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(E.JOm.DashCase|E.JOm.Important)?e.style.setProperty(t,s,a&E.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&E.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ia(s)):this.eventManager.addEventListener(e,t,Ia(s))}}class Ss extends ns{constructor(e,t,s,a){super(e),this.component=s;const c=eo(a+"-"+s.id,s.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(bt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(bt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class gi extends ns{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=eo(a.id,a.styles,[]);for(let f=0;f<c.length;f++){const m=document.createElement("style");m.textContent=c[f],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yc=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(le))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const Da=["alt","control","meta","shift"],Ld={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let As=(()=>{class n extends ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const c=n.parseEventName(s),f=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,c.domEventName,f))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(s.pop());let f="";if(Da.forEach(I=>{const C=s.indexOf(I);C>-1&&(s.splice(C,1),f+=I+".")}),f+=c,0!=s.length||0===c.length)return null;const m={};return m.domEventName=a,m.fullKey=f,m}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vd.hasOwnProperty(e)&&(e=Vd[e]))}return Ld[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Da.forEach(c=>{c!=a&&xn[c](t)&&(s+=c+".")}),s+=a,s}static eventCallback(t,s,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>s(c))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(le))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:"browser"},{provide:E.g9A,useValue:function(){fi.makeCurrent(),rn.init()},multi:!0},{provide:le,useFactory:function(){return(0,E.RDi)(document),document},deps:[]}]),rs=[[],{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function(){return new E.qLn},deps:[]},{provide:Cs,useClass:Yc,multi:!0,deps:[le,E.R0b,E.Lbi]},{provide:Cs,useClass:As,multi:!0,deps:[le]},[],{provide:Pi,useClass:Pi,deps:[Ts,Fo,E.AFp]},{provide:E.FYo,useExisting:Pi},{provide:Js,useExisting:Fo},{provide:Fo,useClass:Fo,deps:[le]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:Ts,useClass:Ts,deps:[Cs,E.R0b]},{provide:class{},useClass:zc,deps:[]},[]];let Ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:E.AFp,useValue:t.appId},{provide:Ds,useExisting:E.AFp},Fn]}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(n,12))},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:rs,imports:[Eu,E.hGG]}),n})();"undefined"!=typeof window&&window;var Ot=k(4402),ze=k(5917),ss=k(9765),os=k(7971);class mr extends ss.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new os.N;return this._value}next(e){super.next(this._value=e)}}var ju=k(4869),mi=k(9796),ar=k(7393);class ro extends ar.L{notifyNext(e,t,s,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Hd extends ar.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Gd=k(7444),ur=k(7574);function $u(n,e,t,s,a=new Hd(n,t,s)){if(!a.closed)return e instanceof ur.y?e.subscribe(a):(0,Gd.s)(e)(a)}var On=k(6693);const Hu={};class io{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new rl(e,this.resultSelector))}}class rl extends ro{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Hu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add($u(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,f=this.toRespond?a[s]===Hu?--this.toRespond:this.toRespond:0;a[s]=t,0===f&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}const Ra=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Kr=k(3282);function Rs(...n){return(0,Kr.J)(1)((0,ze.of)(...n))}var yi=k(9193);function Vr(n){return new ur.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,Ot.D)(t):(0,yi.c)()).subscribe(e)})}var Ns=k(2441),gt=k(8002),_i=k(5345);function Vn(n,e){return"function"==typeof e?t=>t.pipe(Vn((s,a)=>(0,Ot.D)(n(s,a)).pipe((0,gt.U)((c,f)=>e(s,c,a,f))))):t=>t.lift(new as(n))}class as{constructor(e){this.project=e}call(e,t){return t.subscribe(new zf(e,this.project))}}class zf extends _i.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new _i.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,_i.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const sl=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function qd(n){return e=>0===n?(0,yi.c)():e.lift(new Kf(n))}class Kf{constructor(e){if(this.total=e,this.total<0)throw new sl}call(e,t){return t.subscribe(new En(e,this.total))}}class En extends ar.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}function us(...n){const e=n[n.length-1];return(0,ju.K)(e)?(n.pop(),t=>Rs(n,t,e)):t=>Rs(n,t)}function Ho(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new zg(n,e,t))}}class zg{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new zd(e,this.accumulator,this.seed,this.hasSeed))}}class zd extends ar.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function Zr(n,e){return function(s){return s.lift(new Kd(n,e))}}class Kd{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new ol(e,this.predicate,this.thisArg))}}class ol extends ar.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}function cs(n){return function(t){const s=new Zd(n),a=t.lift(s);return s.caught=a}}class Zd{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Yd(e,this.selector,this.caught))}}class Yd extends _i.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const s=new _i.IY(this);this.add(s);const a=(0,_i.ft)(t,s);a!==s&&this.add(a)}}}var Qn=k(9773);function Ms(n,e){return(0,Qn.zg)(n,e,1)}function Zf(n){return function(t){return 0===n?(0,yi.c)():t.lift(new kn(n))}}class kn{constructor(e){if(this.total=e,this.total<0)throw new sl}call(e,t){return t.subscribe(new Go(e,this.total))}}class Go extends ar.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<s;c++){const f=t++%s;e.next(a[f])}}e.complete()}}function Oi(n=Yr){return e=>e.lift(new Yf(n))}class Yf{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Qf(e,this.errorFactory))}}class Qf extends ar.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Yr(){return new Ra}function $n(n=null){return e=>e.lift(new Na(n))}class Na{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ur(e,this.defaultValue))}}class Ur extends ar.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ps=k(4487);function ki(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Zr((a,c)=>n(a,c,s)):Ps.y,qd(1),t?$n(e):Oi(()=>new Ra))}var Br=k(3342),Qd=k(1307),Kg=k(5319);class S{constructor(e){this.callback=e}call(e,t){return t.subscribe(new N(e,this.callback))}}class N extends ar.L{constructor(e,t){super(e),this.add(new Kg.w(t))}}class F{constructor(e,t){this.id=e,this.url=t}}class H extends F{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class J extends F{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _e extends F{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Me extends F{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ke extends F{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qe extends F{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends F{constructor(e,t,s,a,c){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Je extends F{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends F{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sn{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ma{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class so{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wo{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pa{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ct="primary";class al{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oa(n){return new al(n)}const Jd="ngNavigationCancelingError";function Os(n){const e=Error("NavigationCancelingError: "+n);return e[Jd]=!0,e}function D_(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let c=0;c<s.length;c++){const f=s[c],m=n[c];if(f.startsWith(":"))a[f.substring(1)]=m;else if(f!==m.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function vi(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!Xf(n[a],e[a]))return!1;return!0}function Xf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,c)=>s[c]===a)}return n===e}function qo(n){return Array.prototype.concat.apply([],n)}function ka(n){return n.length>0?n[n.length-1]:null}function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ls(n){return(0,E.CqO)(n)?n:(0,E.QGY)(n)?(0,Ot.D)(Promise.resolve(n)):(0,ze.of)(n)}const Wu={exact:function Yg(n,e,t){if(!Zo(n.segments,e.segments)||!Ko(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!Yg(n.children[s],e.children[s],t))return!1;return!0},subset:eh},ks={exact:function(n,e){return vi(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xf(n[t],e[t]))},ignored:()=>!0};function Fa(n,e,t){return Wu[t.paths](n.root,e.root,t.matrixParams)&&ks[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eh(n,e,t){return La(n,e,e.segments,t)}function La(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Zo(a,t)||e.hasChildren()||!Ko(a,t,s))}if(n.segments.length===t.length){if(!Zo(n.segments,t)||!Ko(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!eh(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Zo(n.segments,a)&&Ko(n.segments,a,s)&&n.children[Ct])&&La(n.children[Ct],e,c,s)}}function Ko(n,e,t){return e.every((s,a)=>ks[t](n[a].parameters,s.parameters))}class ao{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return S_.serialize(this)}}class xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jn(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qu(this)}}class Fi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oa(this.parameters)),this._parameterMap}toString(){return A_(this)}}function Zo(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class cl{}class Qg{parse(e){const t=new N_(e);return new ao(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${ll(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${Va(t)}=${Va(a)}`).join("&"):`${Va(t)}=${Va(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const S_=new Qg;function qu(n){return n.segments.map(e=>A_(e)).join("/")}function ll(n,e){if(!n.hasChildren())return qu(n);if(e){const t=n.children[Ct]?ll(n.children[Ct],!1):"",s=[];return Jn(n.children,(a,c)=>{c!==Ct&&s.push(`${c}:${ll(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return Jn(n.children,(s,a)=>{a===Ct&&(t=t.concat(e(s,a)))}),Jn(n.children,(s,a)=>{a!==Ct&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===Ct?[ll(n.children[Ct],!1)]:[`${a}:${ll(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ct]?`${qu(n)}/${t[0]}`:`${qu(n)}/(${t.join("//")})`}}function Jg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Va(n){return Jg(n).replace(/%3B/gi,";")}function Yo(n){return Jg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function th(n){return decodeURIComponent(n)}function ep(n){return th(n.replace(/\+/g,"%20"))}function A_(n){return`${Yo(n.path)}${function(n){return Object.keys(n).map(e=>`;${Yo(e)}=${Yo(n[e])}`).join("")}(n.parameters)}`}const Xg=/^[^\/()?;=#]+/;function hl(n){const e=n.match(Xg);return e?e[0]:""}const em=/^[^=?&#]+/,x_=/^[^?&#]+/;class N_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[Ct]=new xt(e,t)),s}parseSegment(){const e=hl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Fi(th(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hl(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=hl(this.remaining);a&&(s=a,this.capture(s))}e[th(t)]=th(s)}parseQueryParam(e){const t=function(n){const e=n.match(em);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(x_);return e?e[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const a=ep(t),c=ep(s);if(e.hasOwnProperty(a)){let f=e[a];Array.isArray(f)||(f=[f],e[a]=f),f.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=hl(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;s.indexOf(":")>-1?(c=s.substr(0,s.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Ct);const f=this.parseChildren();t[c]=1===Object.keys(f).length?f[Ct]:new xt([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class nh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=np(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=np(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ds(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return ds(e,this._root).map(t=>t.value)}}function np(n,e){if(n===e.value)return e;for(const t of e.children){const s=np(n,t);if(s)return s}return null}function ds(n,e){if(n===e.value)return[e];for(const t of e.children){const s=ds(n,t);if(s.length)return s.unshift(e),s}return[]}class Qr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tm extends nh{constructor(e,t){super(e),this.snapshot=t,fl(this,e)}toString(){return this.snapshot.toString()}}function rp(n,e){const t=function(n,e){const f=new Zu([],{},{},"",{},Ct,e,null,n.root,-1,{});return new im("",new Qr(f,[]))}(n,e),s=new mr([new Fi("",{})]),a=new mr({}),c=new mr({}),f=new mr({}),m=new mr(""),I=new Ku(s,a,f,m,c,Ct,e,t.root);return I.snapshot=t.root,new tm(new Qr(I,[]),t)}class Ku{constructor(e,t,s,a,c,f,m,I){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=f,this.component=m,this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Oa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Oa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nm(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],c=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(c.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class Zu{constructor(e,t,s,a,c,f,m,I,C,R,M){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=c,this.outlet=f,this.component=m,this.routeConfig=I,this._urlSegment=C,this._lastPathIndex=R,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class im extends nh{constructor(e,t){super(t),this.url=e,fl(this,t)}toString(){return sm(this._root)}}function fl(n,e){e.value._routerState=n,e.children.forEach(t=>fl(n,t))}function sm(n){const e=n.children.length>0?` { ${n.children.map(sm).join(", ")} } `:"";return`${n.value}${e}`}function ip(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vi(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function sp(n,e){return vi(n.params,e.params)&&function(n,e){return Zo(n,e)&&n.every((t,s)=>vi(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||sp(n.parent,e.parent))}function pl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return pl(n,s,a);return pl(n,s)})}(n,e,t);return new Qr(s,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const f=c.route;return Li(e,f),f}}const s=function(n){return new Ku(new mr(n.url),new mr(n.params),new mr(n.queryParams),new mr(n.fragment),new mr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>pl(n,c));return new Qr(s,a)}}function Li(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Li(n.children[t],e.children[t])}function gl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function op(n){return"object"==typeof n&&null!=n&&n.outlets}function Qo(n,e,t,s,a){let c={};return s&&Jn(s,(f,m)=>{c[m]=Array.isArray(f)?f.map(I=>`${I}`):`${f}`}),new ao(t.root===n?e:P_(t.root,n,e),c,a)}function P_(n,e,t){const s={};return Jn(n.children,(a,c)=>{s[c]=a===e?t:P_(a,e,t)}),new xt(n.segments,s)}class rh{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&gl(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(op);if(a&&a!==ka(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yl{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function ih(n,e,t){if(n||(n=new xt([],{})),0===n.segments.length&&n.hasChildren())return sh(n,e,t);const s=function(n,e,t){let s=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return c;const f=n.segments[a],m=t[s];if(op(m))break;const I=`${m}`,C=s<t.length-1?t[s+1]:null;if(a>0&&void 0===I)break;if(I&&C&&"object"==typeof C&&void 0===C.outlets){if(!ap(I,C,f))return c;s+=2}else{if(!ap(I,{},f))return c;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const c=new xt(n.segments.slice(0,s.pathIndex),{});return c.children[Ct]=new xt(n.segments.slice(s.pathIndex),n.children),sh(c,0,a)}return s.match&&0===a.length?new xt(n.segments,{}):s.match&&!n.hasChildren()?_l(n,e,t):s.match?sh(n,0,a):_l(n,e,t)}function sh(n,e,t){if(0===t.length)return new xt(n.segments,{});{const s=function(n){return op(n[0])?n[0].outlets:{[Ct]:n}}(t),a={};return Jn(s,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[f]=ih(n.children[f],e,c))}),Jn(n.children,(c,f)=>{void 0===s[f]&&(a[f]=c)}),new xt(n.segments,a)}}function _l(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(op(c)){const I=lm(c.outlets);return new xt(s,I)}if(0===a&&gl(t[0])){s.push(new Fi(n.segments[e].path,vl(t[0]))),a++;continue}const f=op(c)?c.outlets[Ct]:`${c}`,m=a<t.length-1?t[a+1]:null;f&&m&&gl(m)?(s.push(new Fi(f,vl(m))),a+=2):(s.push(new Fi(f,{})),a++)}return new xt(s,{})}function lm(n){const e={};return Jn(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=_l(new xt([],{}),0,t))}),e}function vl(n){const e={};return Jn(n,(t,s)=>e[s]=`${t}`),e}function ap(n,e,t){return n==t.path&&vi(e,t.parameters)}class k_{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),ip(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=zu(t);e.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,a[f],s),delete a[f]}),Jn(a,(c,f)=>{this.deactivateRouteAndItsChildren(c,s)})}deactivateRoutes(e,t,s){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const f=s.getContext(a.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,s);else c&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),c=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,c=zu(e);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=zu(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],s),this.forwardEvent(new Wo(c.value.snapshot))}),e.children.length&&this.forwardEvent(new oo(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,c=t?t.value:null;if(ip(a),a===c)if(a.component){const f=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const f=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const m=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),f.children.onOutletReAttached(m.contexts),f.attachRef=m.componentRef,f.route=m.route.value,f.outlet&&f.outlet.attach(m.componentRef,m.route.value),fn(m.route)}else{const m=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),I=m?m.module.componentFactoryResolver:null;f.attachRef=null,f.route=a,f.resolver=I,f.outlet&&f.outlet.activateWith(a,I),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,s)}}function fn(n){ip(n.value),n.children.forEach(fn)}class lp{constructor(e,t){this.routes=e,this.module=t}}function Fs(n){return"function"==typeof n}function uo(n){return n instanceof ao}const uh=Symbol("INITIAL_VALUE");function ch(){return Vn(n=>function(...n){let e,t;return(0,ju.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,mi.k)(n[0])&&(n=n[0]),(0,On.n)(n,t).lift(new io(e))}(n.map(e=>e.pipe(qd(1),us(uh)))).pipe(Ho((e,t)=>{let s=!1;return t.reduce((a,c,f)=>a!==uh?a:(c===uh&&(s=!0),s||!1!==c&&f!==t.length-1&&!uo(c)?a:c),e)},uh),Zr(e=>e!==uh),(0,gt.U)(e=>uo(e)?e:!0===e),qd(1)))}let $a=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=E.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&E._UZ(0,"router-outlet")},directives:function(){return[q_]},encapsulation:2}),n})();function vr(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];dp(s,dm(e,s))}}function dp(n,e){n.children&&vr(n.children,e)}function dm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function lh(n){const e=n.children&&n.children.map(lh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ct&&(t.component=$a),t}function Gt(n){return n.outlet||Ct}function Qu(n,e){const t=n.filter(s=>Gt(s)===e);return t.push(...n.filter(s=>Gt(s)!==e)),t}const El={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dh(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},El):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||D_)(t,n,e);if(!c)return Object.assign({},El);const f={};Jn(c.posParams,(I,C)=>{f[C]=I.path});const m=c.consumed.length>0?Object.assign(Object.assign({},f),c.consumed[c.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:m,positionalParamSegments:null!==(s=c.posParams)&&void 0!==s?s:{}}}function hh(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>Ha(n,e,s)&&Gt(s)!==Ct)}(n,t,s)){const f=new xt(e,function(n,e,t,s){const a={};a[Ct]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&Gt(c)!==Ct){const f=new xt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Gt(c)]=f}return a}(n,e,s,new xt(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>Ha(n,e,s))}(n,t,s)){const f=new xt(n.segments,function(n,e,t,s,a,c){const f={};for(const m of s)if(Ha(n,t,m)&&!a[Gt(m)]){const I=new xt([],{});I._sourceSegment=n,I._segmentIndexShift="legacy"===c?n.segments.length:e.length,f[Gt(m)]=I}return Object.assign(Object.assign({},a),f)}(n,e,t,s,n.children,a));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const c=new xt(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function Ha(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function pp(n,e,t,s){return!!(Gt(n)===s||s!==Ct&&Ha(e,t,n))&&("**"===n.path||dh(e,n,t).matched)}function fm(n,e,t){return 0===e.length&&!n.children[t]}class Ga{constructor(e){this.segmentGroup=e||null}}class gp{constructor(e){this.urlTree=e}}function Xn(n){return new ur.y(e=>e.error(new Ga(n)))}function Wa(n){return new ur.y(e=>e.error(new gp(n)))}function pm(n){return new ur.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Ju{constructor(e,t,s,a,c){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(E.h0i)}apply(){const e=hh(this.urlTree.root,[],[],this.config).segmentGroup,t=new xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ct).pipe((0,gt.U)(c=>this.createUrlTree(ph(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cs(c=>{if(c instanceof gp)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Ga?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ct).pipe((0,gt.U)(a=>this.createUrlTree(ph(a),e.queryParams,e.fragment))).pipe(cs(a=>{throw a instanceof Ga?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new xt([],{[Ct]:e}):e;return new ao(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,gt.U)(c=>new xt([],c))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const c of Object.keys(s.children))"primary"===c?a.unshift(c):a.push(c);return(0,Ot.D)(a).pipe(Ms(c=>{const f=s.children[c],m=Qu(t,c);return this.expandSegmentGroup(e,m,f,c).pipe((0,gt.U)(I=>({segment:I,outlet:c})))}),Ho((c,f)=>(c[f.outlet]=f.segment,c),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Zr((a,c)=>n(a,c,s)):Ps.y,Zf(1),t?$n(e):Oi(()=>new Ra))}())}expandSegment(e,t,s,a,c,f){return(0,Ot.D)(s).pipe(Ms(m=>this.expandSegmentAgainstRoute(e,t,s,m,a,c,f).pipe(cs(C=>{if(C instanceof Ga)return(0,ze.of)(null);throw C}))),ki(m=>!!m),cs((m,I)=>{if(m instanceof Ra||"EmptyError"===m.name){if(fm(t,a,c))return(0,ze.of)(new xt([],{}));throw new Ga(t)}throw m}))}expandSegmentAgainstRoute(e,t,s,a,c,f,m){return pp(a,t,c,f)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,f):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,c,f):Xn(t):Xn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,c,f){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const c=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?Wa(c):this.lineralizeSegments(s,c).pipe((0,Qn.zg)(f=>{const m=new xt(f,{});return this.expandSegment(e,m,t,f,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,c,f){const{matched:m,consumedSegments:I,lastChild:C,positionalParamSegments:R}=dh(t,a,c);if(!m)return Xn(t);const M=this.applyRedirectCommands(I,a.redirectTo,R);return a.redirectTo.startsWith("/")?Wa(M):this.lineralizeSegments(a,M).pipe((0,Qn.zg)(j=>this.expandSegment(e,t,s,j.concat(c.slice(C)),f,!1)))}matchSegmentAgainstRoute(e,t,s,a,c){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,ze.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,gt.U)(j=>(s._loadedConfig=j,new xt(a,{})))):(0,ze.of)(new xt(a,{}));const{matched:f,consumedSegments:m,lastChild:I}=dh(t,s,a);if(!f)return Xn(t);const C=a.slice(I);return this.getChildConfig(e,s,a).pipe((0,Qn.zg)(M=>{const j=M.module,W=M.routes,{segmentGroup:te,slicedSegments:we}=hh(t,m,C,W),Re=new xt(te.segments,te.children);if(0===we.length&&Re.hasChildren())return this.expandChildren(j,W,Re).pipe((0,gt.U)(nt=>new xt(m,nt)));if(0===W.length&&0===we.length)return(0,ze.of)(new xt(m,{}));const wt=Gt(s)===c;return this.expandSegment(j,Re,W,we,wt?Ct:c,!0).pipe((0,gt.U)(ft=>new xt(m.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,s){return t.children?(0,ze.of)(new lp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ze.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,Qn.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,gt.U)(c=>(t._loadedConfig=c,c))):(n=t,new ur.y(e=>e.error(Os(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ze.of)(new lp([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,ze.of)(!0);const c=a.map(f=>{const m=e.get(f);let I;if((n=m)&&Fs(n.canLoad))I=m.canLoad(t,s);else{if(!Fs(m))throw new Error("Invalid CanLoad guard");I=m(t,s)}var n;return ls(I)});return(0,ze.of)(c).pipe(ch(),(0,Br.b)(f=>{if(!uo(f))return;const m=Os(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw m.url=f,m}),(0,gt.U)(f=>!0===f))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,ze.of)(s);if(a.numberOfChildren>1||!a.children[Ct])return pm(e.redirectTo);a=a.children[Ct]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const c=this.createSegmentGroup(e,t.root,s,a);return new ao(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return Jn(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const m=a.substring(1);s[c]=t[m]}else s[c]=a}),s}createSegmentGroup(e,t,s,a){const c=this.createSegments(e,t.segments,s,a);let f={};return Jn(t.children,(m,I)=>{f[I]=this.createSegmentGroup(e,m,s,a)}),new xt(c,f)}createSegments(e,t,s,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function ph(n){const e={};for(const s of Object.keys(n.children)){const c=ph(n.children[s]);(c.segments.length>0||c.hasChildren())&&(e[s]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Ct]){const e=n.children[Ct];return new xt(n.segments.concat(e.segments),e.children)}return n}(new xt(n.segments,e))}class co{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wl{constructor(e,t){this.component=e,this.route=t}}function j_(n,e,t){const s=n._root;return zt(s,e?e._root:null,t,[s.value])}function gh(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function zt(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=zu(e);return n.children.forEach(f=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,f=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const I=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zo(n.url,e.url)||!vi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sp(n,e)||!vi(n.queryParams,e.queryParams);case"paramsChange":default:return!sp(n,e)}}(f,c,c.routeConfig.runGuardsAndResolvers);I?a.canActivateChecks.push(new co(s)):(c.data=f.data,c._resolvedData=f._resolvedData),zt(n,e,c.component?m?m.children:null:t,s,a),I&&m&&m.outlet&&m.outlet.isActivated&&a.canDeactivateChecks.push(new wl(m.outlet.component,f))}else f&&bl(e,m,a),a.canActivateChecks.push(new co(s)),zt(n,null,c.component?m?m.children:null:t,s,a)})(f,c[f.value.outlet],t,s.concat([f.value]),a),delete c[f.value.outlet]}),Jn(c,(f,m)=>bl(f,t.getContext(m),a)),a}function bl(n,e,t){const s=zu(n),a=n.value;Jn(s,(c,f)=>{bl(c,a.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new wl(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class Pw{}function G_(n){return new ur.y(e=>e.error(n))}class h{constructor(e,t,s,a,c,f){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const e=hh(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ct);if(null===t)return null;const s=new Zu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Qr(s,t),c=new im(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,s=nm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const c of Object.keys(t.children)){const f=t.children[c],m=Qu(e,c),I=this.processSegmentGroup(m,f,c);if(null===I)return null;s.push(...I)}const a=x(s);return a.sort((e,t)=>e.value.outlet===Ct?-1:t.value.outlet===Ct?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,s,a){for(const c of e){const f=this.processSegmentAgainstRoute(c,t,s,a);if(null!==f)return f}return fm(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!pp(e,t,s,a))return null;let c,f=[],m=[];if("**"===e.path){const W=s.length>0?ka(s).parameters:{};c=new Zu(s,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ye(e),Gt(e),e.component,e,Z(t),Ie(t)+s.length,ke(e))}else{const W=dh(t,e,s);if(!W.matched)return null;f=W.consumedSegments,m=s.slice(W.lastChild),c=new Zu(f,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ye(e),Gt(e),e.component,e,Z(t),Ie(t)+f.length,ke(e))}const I=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:R}=hh(t,f,m,I.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&C.hasChildren()){const W=this.processChildren(I,C);return null===W?null:[new Qr(c,W)]}if(0===I.length&&0===R.length)return[new Qr(c,[])];const M=Gt(e)===a,j=this.processSegment(I,C,R,M?Ct:a);return null===j?null:[new Qr(c,j)]}}function T(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function x(n){const e=[],t=new Set;for(const s of n){if(!T(s)){e.push(s);continue}const a=e.find(c=>s.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=x(s.children);e.push(new Qr(s.value,a))}return e.filter(s=>!t.has(s))}function Z(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ie(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ye(n){return n.data||{}}function ke(n){return n.resolve||{}}function nc(n){return Vn(e=>{const t=n(e);return t?(0,Ot.D)(t).pipe((0,gt.U)(()=>e)):(0,ze.of)(e)})}class vp extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vh=new E.OlP("ROUTES");class Ep{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=c.create(e);return new lp(qo(f.injector.get(vh,void 0,E.XFs.Self|E.XFs.Optional)).map(lh),f)}),cs(c=>{throw t._loader$=void 0,c}));return t._loader$=new Ns.c(a,()=>new ss.xQ).pipe((0,Qd.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Ot.D)(this.loader.load(e)):ls(e()).pipe((0,Qn.zg)(t=>t instanceof E.YKP?(0,ze.of)(t):(0,Ot.D)(this.compiler.compileModuleAsync(t))))}}class wp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qa,this.attachRef=null}}class qa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Eh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ip(n){throw n}function Ow(n,e,t){return e.parse("/")}function ym(n,e){return(0,ze.of)(null)}const VC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class n{constructor(t,s,a,c,f,m,I,C){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=c,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ss.xQ,this.errorHandler=Ip,this.malformedUriErrorHandler=Ow,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ym,afterPreactivation:ym},this.urlHandlingStrategy=new Eh,this.routeReuseStrategy=new vp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(E.h0i),this.console=f.get(E.c2e);const j=f.get(E.R0b);this.isNgZoneEnabled=j instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new ao(new xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ep(m,I,W=>this.triggerEvent(new sn(W)),W=>this.triggerEvent(new Ma(W))),this.routerState=rp(this.currentUrlTree,this.rootComponentType),this.transitions=new mr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(Zr(a=>0!==a.id),(0,gt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Vn(a=>{let c=!1,f=!1;return(0,ze.of)(a).pipe((0,Br.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Vn(m=>{const I=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==I||I!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Jo(m.source)&&(this.browserUrlTree=m.extractedUrl),(0,ze.of)(m).pipe(Vn(M=>{const j=this.transitions.getValue();return s.next(new H(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),j!==this.transitions.getValue()?yi.E:Promise.resolve(M)}),function(n,e,t,s){return Vn(a=>function(n,e,t,s,a){return new Ju(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,gt.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Br.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(n,e,t,s,a){return(0,Qn.zg)(c=>function(n,e,t,s,a="emptyOnly",c="legacy"){try{const f=new h(n,e,t,s,a,c).recognize();return null===f?G_(new Pw):(0,ze.of)(f)}catch(f){return G_(f)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),s,a).pipe((0,gt.U)(f=>Object.assign(Object.assign({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Br.b)(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const j=new Ke(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);s.next(j)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:W,source:te,restoredState:we,extras:Re}=m,wt=new H(j,this.serializeUrl(W),te,we);s.next(wt);const It=rp(W,this.rootComponentType).snapshot;return(0,ze.of)(Object.assign(Object.assign({},m),{targetSnapshot:It,urlAfterRedirects:W,extras:Object.assign(Object.assign({},Re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,this.browserUrlTree=m.urlAfterRedirects,m.resolve(null),yi.E}),nc(m=>{const{targetSnapshot:I,id:C,extractedUrl:R,rawUrl:M,extras:{skipLocationChange:j,replaceUrl:W}}=m;return this.hooks.beforePreactivation(I,{navigationId:C,appliedUrlTree:R,rawUrlTree:M,skipLocationChange:!!j,replaceUrl:!!W})}),(0,Br.b)(m=>{const I=new Qe(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(I)}),(0,gt.U)(m=>Object.assign(Object.assign({},m),{guards:j_(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Qn.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:f}}=t;return 0===f.length&&0===c.length?(0,ze.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,Ot.D)(n).pipe((0,Qn.zg)(a=>function(n,e,t,s,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ze.of)(!0);const f=c.map(m=>{const I=gh(m,e,a);let C;if(function(n){return n&&Fs(n.canDeactivate)}(I))C=ls(I.canDeactivate(n,e,t,s));else{if(!Fs(I))throw new Error("Invalid CanDeactivate guard");C=ls(I(n,e,t,s))}return C.pipe(ki())});return(0,ze.of)(f).pipe(ch())}(a.component,a.route,t,e,s)),ki(a=>!0!==a,!0))}(f,s,a,n).pipe((0,Qn.zg)(m=>m&&function(n){return"boolean"==typeof n}(m)?function(n,e,t,s){return(0,Ot.D)(e).pipe(Ms(a=>Rs(function(n,e){return null!==n&&e&&e(new so(n)),(0,ze.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new _r(n)),(0,ze.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>Vr(()=>{const m=f.guards.map(I=>{const C=gh(I,f.node,t);let R;if(function(n){return n&&Fs(n.canActivateChild)}(C))R=ls(C.canActivateChild(s,n));else{if(!Fs(C))throw new Error("Invalid CanActivateChild guard");R=ls(C(s,n))}return R.pipe(ki())});return(0,ze.of)(m).pipe(ch())}));return(0,ze.of)(c).pipe(ch())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,ze.of)(!0);const a=s.map(c=>Vr(()=>{const f=gh(c,e,t);let m;if(function(n){return n&&Fs(n.canActivate)}(f))m=ls(f.canActivate(e,n));else{if(!Fs(f))throw new Error("Invalid CanActivate guard");m=ls(f(e,n))}return m.pipe(ki())}));return(0,ze.of)(a).pipe(ch())}(n,a.route,t))),ki(a=>!0!==a,!0))}(s,c,n,e):(0,ze.of)(m)),(0,gt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Br.b)(m=>{if(uo(m.guardsResult)){const C=Os(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const I=new kt(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(I)}),Zr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),nc(m=>{if(m.guards.canActivateChecks.length)return(0,ze.of)(m).pipe((0,Br.b)(I=>{const C=new Je(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(C)}),Vn(I=>{let C=!1;return(0,ze.of)(I).pipe(function(n,e){return(0,Qn.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,ze.of)(t);let c=0;return(0,Ot.D)(a).pipe(Ms(f=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,ze.of)({});const c={};return(0,Ot.D)(a).pipe((0,Qn.zg)(f=>function(n,e,t,s){const a=gh(n,e,s);return ls(a.resolve?a.resolve(e,t):a(e,t))}(n[f],e,t,s).pipe((0,Br.b)(m=>{c[f]=m}))),Zf(1),(0,Qn.zg)(()=>Object.keys(c).length===a.length?(0,ze.of)(c):yi.E))}(n._resolve,n,e,s).pipe((0,gt.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),nm(n,t).resolve),null)))}(f.route,s,n,e)),(0,Br.b)(()=>c++),Zf(1),(0,Qn.zg)(f=>c===a.length?(0,ze.of)(t):yi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Br.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(I),this.cancelNavigationTransition(I,"At least one route resolver didn't emit any value."))}}))}),(0,Br.b)(I=>{const C=new yr(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(C)}))}),nc(m=>{const{targetSnapshot:I,id:C,extractedUrl:R,rawUrl:M,extras:{skipLocationChange:j,replaceUrl:W}}=m;return this.hooks.afterPreactivation(I,{navigationId:C,appliedUrlTree:R,rawUrlTree:M,skipLocationChange:!!j,replaceUrl:!!W})}),(0,gt.U)(m=>{const I=function(n,e,t){const s=pl(n,e._root,t?t._root:void 0);return new tm(s,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:I})}),(0,Br.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(s=>(new k_(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Br.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new S(n))}(()=>{var m;if(!c&&!f){const I=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,I)):this.cancelNavigationTransition(a,I)}(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===a.id&&(this.currentNavigation=null)}),cs(m=>{if(f=!0,function(n){return n&&n[Jd]}(m)){const I=uo(m.url);I||(this.navigated=!0,this.restoreHistory(a,!0));const C=new _e(a.id,this.serializeUrl(a.extractedUrl),m.message);s.next(C),I?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),M={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Jo(a.source)};this.scheduleNavigation(R,"imperative",null,M,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const I=new Me(a.id,this.serializeUrl(a.extractedUrl),m);s.next(I);try{a.resolve(this.errorHandler(m))}catch(C){a.reject(C)}}return yi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:c,urlTree:f}=s,m={replaceUrl:!0};if(c){const I=Object.assign({},c);delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(m.state=I)}this.scheduleNavigation(f,a,c,m)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){vr(t),this.config=t.map(lh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:c,fragment:f,queryParamsHandling:m,preserveFragment:I}=s,C=a||this.routerState.root,R=I?this.currentUrlTree.fragment:f;let M=null;switch(m){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=c||null}return null!==M&&(M=this.removeEmptyProps(M)),function(n,e,t,s,a){if(0===t.length)return Qo(e.root,e.root,e,s,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rh(!0,0,n);let e=0,t=!1;const s=n.reduce((a,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const m={};return Jn(c.outlets,(I,C)=>{m[C]="string"==typeof I?I.split("/"):I}),[...a,{outlets:m}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===f?(c.split("/").forEach((m,I)=>{0==I&&"."===m||(0==I&&""===m?t=!0:".."===m?e++:""!=m&&a.push(m))}),a):[...a,c]},[]);return new rh(t,e,s)}(t);if(c.toRoot())return Qo(e.root,new xt([],{}),e,s,a);const f=function(n,e,t){if(n.isAbsolute)return new yl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new yl(c,c===e.root,0)}const s=gl(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,c=t;for(;c>a;){if(c-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new yl(s,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(c,e,n),m=f.processChildren?sh(f.segmentGroup,f.index,c.commands):ih(f.segmentGroup,f.index,c.commands);return Qo(f.segmentGroup,m,e,s,a)}(C,this.currentUrlTree,t,M,null!=R?R:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=uo(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},VC):!1===s?Object.assign({},UC):s,uo(t))return Fa(this.currentUrlTree,t,a);const c=this.parseUrl(t);return Fa(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const c=t[a];return null!=c&&(s[a]=c),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new J(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,c,f){var m,I;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),R=Jo(s)&&C&&!Jo(C.source),W=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===t.toString();if(R&&W)return Promise.resolve(!0);let te,we,Re;f?(te=f.resolve,we=f.reject,Re=f.promise):Re=new Promise((ft,nt)=>{te=ft,we=nt});const wt=++this.navigationId;let It;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),It=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(I=this.browserPageId)&&void 0!==I?I:0)+1):It=0,this.setTransition({id:wt,targetPageId:It,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:te,reject:we,promise:Re,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Re.catch(ft=>Promise.reject(ft))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,s=!1){var a,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===f?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new _e(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.DyG),E.LFG(cl),E.LFG(qa),E.LFG(qe),E.LFG(E.zs3),E.LFG(E.v3s),E.LFG(E.Sil),E.LFG(void 0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function Jo(n){return"imperative"!==n}let q_=(()=>{class n{constructor(t,s,a,c,f){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.name=c||Ct,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,I=new Fw(t,m,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,I),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(qa),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},n.\u0275dir=E.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Fw{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===Ku?this.route:e===qa?this.childContexts:this.parent.get(e,t)}}class z_{}class Z_{preload(e,t){return(0,ze.of)(null)}}let bp=(()=>{class n{constructor(t,s,a,c,f){this.router=t,this.injector=c,this.preloadingStrategy=f,this.loader=new Ep(s,a,C=>t.triggerEvent(new sn(C)),C=>t.triggerEvent(new Ma(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(t=>t instanceof J),Ms(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(E.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const c of s)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;a.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,Ot.D)(a).pipe((0,Kr.J)(),(0,gt.U)(c=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,ze.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,Qn.zg)(c=>(s._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(wi),E.LFG(E.v3s),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(z_))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})(),Ih=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof H?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof J&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pa&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new Pa(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(wi),E.LFG(ya),E.LFG(void 0))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();const za=new E.OlP("ROUTER_CONFIGURATION"),Y_=new E.OlP("ROUTER_FORROOT_GUARD"),Dp=[qe,{provide:cl,useClass:Qg},{provide:wi,useFactory:function(n,e,t,s,a,c,f,m={},I,C){const R=new wi(null,n,e,t,s,a,c,qo(f));return I&&(R.urlHandlingStrategy=I),C&&(R.routeReuseStrategy=C),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(m,R),m.enableTracing&&R.events.subscribe(M=>{var j,W;null===(j=console.group)||void 0===j||j.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(W=console.groupEnd)||void 0===W||W.call(console)}),R},deps:[cl,qa,qe,E.zs3,E.v3s,E.Sil,vh,za,[class{},new E.FiY],[class{},new E.FiY]]},qa,{provide:Ku,useFactory:function(n){return n.routerState.root},deps:[wi]},{provide:E.v3s,useClass:E.EAV},bp,Z_,class{preload(e,t){return t().pipe(cs(()=>(0,ze.of)(null)))}},{provide:za,useValue:{enableTracing:!1}}];function $C(){return new E.PXZ("Router",wi)}let J_=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[Dp,wm(t),{provide:Y_,useFactory:Lw,deps:[[wi,new E.FiY,new E.tp0]]},{provide:za,useValue:s||{}},{provide:se,useFactory:GC,deps:[oe,[new E.tBr(De),new E.FiY],za]},{provide:Ih,useFactory:HC,deps:[wi,ya,za]},{provide:z_,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:Z_},{provide:E.PXZ,multi:!0,useFactory:$C},[X_,{provide:E.ip1,multi:!0,useFactory:Bw,deps:[X_]},{provide:jw,useFactory:WC,deps:[X_]},{provide:E.tb,multi:!0,useExisting:jw}]]}}static forChild(t){return{ngModule:n,providers:[wm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Y_,8),E.LFG(wi,8))},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({}),n})();function HC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ih(n,e,t)}function GC(n,e,t={}){return t.useHash?new Fe(n,e):new me(n,e)}function Lw(n){return"guarded"}function wm(n){return[{provide:E.deG,multi:!0,useValue:n},{provide:vh,multi:!0,useValue:n}]}let X_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ss.xQ}appInitializer(){return this.injector.get(O,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(m=>s=m),c=this.injector.get(wi),f=this.injector.get(za);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ze.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),c.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(za),a=this.injector.get(bp),c=this.injector.get(Ih),f=this.injector.get(wi),m=this.injector.get(E.z2F);t===m.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),a.setUpPreloading(),c.init(),f.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(E.zs3))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac}),n})();function Bw(n){return n.appInitializer.bind(n)}function WC(n){return n.bootstrapListener.bind(n)}const jw=new E.OlP("Router Initializer"),$w=[];let qC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({imports:[[J_.forRoot($w)],J_]}),n})();var zC=k(3637),Er=k(7247);function ev(){return n=>n.lift(new Hw)}class Hw{call(e,t){return t.subscribe(new KC(e))}}class KC extends ar.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class YC{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new mt(e,this.compare,this.keySelector))}}class mt extends ar.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}var Le,Us=k(8939),Im=(k(3259),k(3394)),ue=k(8239),rc=k(8026),bm=k(3910),Xo=k(5422),dt=k(3854),tv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ea={},Gw=Gw||{},ht=tv||self;function nv(){}function ho(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ic(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cp="closure_uid_"+(1e9*Math.random()>>>0),Ox=0;function JC(n,e,t){return n.call.apply(n.bind,arguments)}function Ww(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JC:Ww).apply(null,arguments)}function Cm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Xr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,c){for(var f=Array(arguments.length-2),m=2;m<arguments.length;m++)f[m-2]=arguments[m];return e.prototype[a].apply(s,f)}}function Ka(){this.s=this.s,this.o=this.o}var XC={};Ka.prototype.s=!1,Ka.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Cp)&&n[Cp]||(n[Cp]=++Ox)}(this);delete XC[n]}},Ka.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Tm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},eT=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let c=0;c<s;c++)c in a&&e.call(t,a[c],c,n)};function tT(n){return Array.prototype.concat.apply([],arguments)}function zw(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function rv(n){return/^[\s\xa0]*$/.test(n)}var Ui,nT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Vi(n,e){return-1!=n.indexOf(e)}function Kw(n,e){return n<e?-1:n>e?1:0}e:{var rT=ht.navigator;if(rT){var iT=rT.userAgent;if(iT){Ui=iT;break e}}Ui=""}function ta(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Sm(n){const e={};for(const t in n)e[t]=n[t];return e}var Zw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iv(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let c=0;c<Zw.length;c++)t=Zw[c],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function Tp(n){return Tp[" "](n),n}Tp[" "]=nv;var Rm,n,sv=Vi(Ui,"Opera"),bh=Vi(Ui,"Trident")||Vi(Ui,"MSIE"),Za=Vi(Ui,"Edge"),Am=Za||bh,Qw=Vi(Ui,"Gecko")&&!(Vi(Ui.toLowerCase(),"webkit")&&!Vi(Ui,"Edge"))&&!(Vi(Ui,"Trident")||Vi(Ui,"MSIE"))&&!Vi(Ui,"Edge"),Fx=Vi(Ui.toLowerCase(),"webkit")&&!Vi(Ui,"Edge");function xm(){var n=ht.document;return n?n.documentMode:void 0}e:{var Nm="",ov=(n=Ui,Qw?/rv:([^\);]+)(\)|;)/.exec(n):Za?/Edge\/([\d\.]+)/.exec(n):bh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Fx?/WebKit\/(\S+)/.exec(n):sv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ov&&(Nm=ov?ov[1]:""),bh){var av=xm();if(null!=av&&av>parseFloat(Nm)){Rm=String(av);break e}}Rm=Nm}var Sp={};function Dh(){return e=Sp,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=nT(String(Rm)).split("."),t=nT("9").split("."),s=Math.max(e.length,t.length);for(let f=0;0==n&&f<s;f++){var a=e[f]||"",c=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=Kw(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||Kw(0==a[2].length,0==c[2].length)||Kw(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var xp=ht.document&&bh&&(xm()||parseInt(Rm,10))||void 0,Ch=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ht.addEventListener("test",nv,e),ht.removeEventListener("test",nv,e)}catch(t){}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Th(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qw){e:{try{Tp(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Jw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Th.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},Xr(Th,ei);var Jw={2:"touch",3:"pen",4:"mouse"};Th.prototype.h=function(){Th.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cl="closure_listenable_"+(1e6*Math.random()|0),uv=0;function Xw(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++uv,this.ca=this.fa=!1}function Tl(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Mm(n){this.src=n,this.g={},this.h=0}function Pm(n,e){var t=e.type;if(t in n.g){var c,s=n.g[t],a=Tm(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(Tl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function eI(n,e,t,s){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==s)return a}return-1}Mm.prototype.add=function(n,e,t,s,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var f=eI(n,e,s,a);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new Xw(e,this.src,c,!!s,a)).fa=t,n.push(e)),e};var Om="closure_lm_"+(1e6*Math.random()|0),km={};function tI(n,e,t,s,a){if(s&&s.once)return nI(n,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)tI(n,e[c],t,s,a);return null}return t=sI(t),n&&n[Cl]?n.N(e,t,ic(s)?!!s.capture:!!s,a):cv(n,e,t,!1,s,a)}function cv(n,e,t,s,a,c){if(!e)throw Error("Invalid event type");var f=ic(a)?!!a.capture:!!a,m=iI(n);if(m||(n[Om]=m=new Mm(n)),(t=m.add(e,t,s,f,c)).proxy)return t;if(s=function(){var e=Lx;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)Ch||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(rI(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function nI(n,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)nI(n,e[c],t,s,a);return null}return t=sI(t),n&&n[Cl]?n.O(e,t,ic(s)?!!s.capture:!!s,a):cv(n,e,t,!0,s,a)}function Bi(n,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Bi(n,e[c],t,s,a);else s=ic(s)?!!s.capture:!!s,t=sI(t),n&&n[Cl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=eI(c=n.g[e],t,s,a))&&(Tl(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=iI(n))&&(e=n.g[e.toString()],n=-1,e&&(n=eI(e,t,s,a)),(t=-1<n?e[n]:null)&&lv(t))}function lv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Cl])Pm(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(rI(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=iI(e))?(Pm(t,n),0==t.h&&(t.src=null,e[Om]=null)):Tl(n)}}}function rI(n){return n in km?km[n]:km[n]="on"+n}function Lx(n,e){if(n.ca)n=!0;else{e=new Th(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&lv(n),n=t.call(s,e)}return n}function iI(n){return(n=n[Om])instanceof Mm?n:null}var Fm="__closure_events_fn_"+(1e9*Math.random()>>>0);function sI(n){return"function"==typeof n?n:(n[Fm]||(n[Fm]=function(e){return n.handleEvent(e)}),n[Fm])}function wr(){Ka.call(this),this.i=new Mm(this),this.P=this,this.I=null}function lr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var a=e;iv(e=new ei(s,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];a=Rp(f,s,!0,e)&&a}if(a=Rp(f=e.g=n,s,!0,e)&&a,a=Rp(f,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=Rp(f=e.g=t[c],s,!1,e)&&a}function Rp(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.ca&&f.capture==t){var m=f.listener,I=f.ia||f.src;f.fa&&Pm(n.i,f),a=!1!==m.call(I,s)&&a}}return a&&!s.defaultPrevented}Xr(wr,Ka),wr.prototype[Cl]=!0,wr.prototype.removeEventListener=function(n,e,t,s){Bi(this,n,e,t,s)},wr.prototype.M=function(){if(wr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Tl(t[s]);delete n.g[e],n.h--}}this.I=null},wr.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},wr.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var dv=ht.JSON.stringify;function oT(){var n=uI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pv,hv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new uT,n=>n.reset());class uT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oI(n){ht.setTimeout(()=>{throw n},0)}function fv(n,e){pv||function(){var n=ht.Promise.resolve(void 0);pv=function(){n.then(na)}}(),Lm||(pv(),Lm=!0),uI.add(n,e)}var Lm=!1,uI=new class{constructor(){this.h=this.g=null}add(e,t){const s=hv.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function na(){for(var n;n=oT();){try{n.h.call(n.g)}catch(t){oI(t)}var e=hv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Lm=!1}function Sh(n,e){wr.call(this),this.h=n||1,this.g=e||ht,this.j=Jr(this.kb,this),this.l=Date.now()}function gv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function mv(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ht.setTimeout(n,e||0)}function cT(n){n.g=mv(()=>{n.g=null,n.i&&(n.i=!1,cT(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xr(Sh,wr),(Le=Sh.prototype).da=!1,Le.S=null,Le.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),lr(this,"tick"),this.da&&(gv(this),this.start()))}},Le.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Le.M=function(){Sh.Z.M.call(this),gv(this),delete this.g};class cI extends Ka{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cT(this)}M(){super.M(),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Np(n){Ka.call(this),this.h=n,this.g={}}Xr(Np,Ka);var lI=[];function dI(n,e,t,s){Array.isArray(t)||(t&&(lI[0]=t.toString()),t=lI);for(var a=0;a<t.length;a++){var c=tI(e,t[a],s||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Vm(n){ta(n.g,function(e,t){this.g.hasOwnProperty(t)&&lv(e)},n),n.g={}}function Um(){this.g=!0}function sc(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<a.length;f++)a[f]=""}}}return dv(t)}catch(m){return e}}(n,t)+(s?" "+s:"")})}Np.prototype.M=function(){Np.Z.M.call(this),Vm(this)},Np.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Um.prototype.Aa=function(){this.g=!1},Um.prototype.info=function(){};var Ya={},_v=null;function jm(){return _v=_v||new wr}function hI(n){ei.call(this,Ya.Ma,n)}function Sl(n){const e=jm();lr(e,new hI(e,n))}function hT(n,e){ei.call(this,Ya.STAT_EVENT,n),this.stat=e}function Ii(n){const e=jm();lr(e,new hT(e,n))}function vv(n,e){ei.call(this,Ya.Na,n),this.size=e}function Ah(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ht.setTimeout(function(){n()},e)}Ya.Ma="serverreachability",Xr(hI,ei),Ya.STAT_EVENT="statevent",Xr(hT,ei),Ya.Na="timingevent",Xr(vv,ei);var Mp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ev={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $m(){}function Pp(){}$m.prototype.h=null;var oc,Op={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wv(){ei.call(this,"d")}function fI(){ei.call(this,"c")}function kp(){}function Qa(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Np(this),this.P=fT,this.W=new Sh(n=Am?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xh}function xh(){this.i=null,this.g="",this.h=!1}Xr(wv,ei),Xr(fI,ei),Xr(kp,$m),kp.prototype.g=function(){return new XMLHttpRequest},kp.prototype.i=function(){return{}},oc=new kp;var fT=45e3,Fp={},Lp={};function Iv(n,e,t){n.K=1,n.v=xv(Wt(e)),n.s=t,n.U=!0,bv(n,null)}function bv(n,e){n.F=Date.now(),Vp(n),n.A=Wt(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),mI(t.h,"t",s),n.C=0,t=n.l.H,n.h=new xh,n.g=Gv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new cI(Jr(n.Ia,n,n.g),n.O)),dI(n.V,n.g,"readystatechange",n.gb),e=n.H?Sm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Sl(1),function(n,e,t,s,a,c){n.info(function(){if(n.g)if(c)for(var f="",m=c.split("&"),I=0;I<m.length;I++){var C=m[I].split("=");if(1<C.length){var R=C[0];C=C[1];var M=R.split("_");f=2<=M.length&&"type"==M[1]?f+(R+"=")+C+"&":f+(R+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function pI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Hm(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=pT(n,t),a==Lp){4==e&&(n.o=4,Ii(14),s=!1),sc(n.j,n.m,null,"[Incomplete Response]");break}if(a==Fp){n.o=4,Ii(15),sc(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}sc(n.j,n.m,a,null),Cv(n,a)}pI(n)&&a!=Lp&&a!=Fp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),cc(e),e.L=!0,Ii(11))):(sc(n.j,n.m,t,"[Invalid Chunked Response]"),Al(n),Rh(n))}function pT(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Lp:(t=Number(e.substring(t,s)),isNaN(t)?Fp:(s+=1)+t>e.length?Lp:(e=e.substr(s,t),n.C=s+t,e))}function Vp(n){n.Y=Date.now()+n.P,Dv(n,n.P)}function Dv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ah(Jr(n.eb,n),e)}function Ja(n){n.B&&(ht.clearTimeout(n.B),n.B=null)}function Rh(n){0==n.l.G||n.I||kl(n.l,n)}function Al(n){Ja(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,gv(n.W),Vm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Fv(t.i,n)))if(t.I=n.N,!n.J&&Fv(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(C){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ah(Jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;tu(t),Bh(t)}uc(t),Ii(18)}if(1>=yI(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else $s(t,11)}else if((n.J||t.g==n)&&tu(t),!rv(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let C=a[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const R=C[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const M=C[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const j=C[5];null!=j&&"number"==typeof j&&0<j&&(t.K=s=1.5*j,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const W=n.g;if(W){const te=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var c=s.i;!c.g&&(Vi(te,"spdy")||Vi(te,"quic")||Vi(te,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(_I(c,c.h),c.h=null))}if(s.D){const we=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(s.sa=we,pn(s.F,s.D,we))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((s=t).oa=Hv(s,s.H?s.la:null,s.W),f.J){bT(s.i,f);var m=f,I=s.K;I&&m.setTimeout(I),m.B&&(Ja(m),Vp(m)),s.g=f}else Pl(s);0<t.l.length&&hr(t)}else"stop"!=C[0]&&"close"!=C[0]||$s(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?$s(t,7):$v(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Sl(4)}catch(C){}}function Tv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ho(n)||"string"==typeof n)eT(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ho(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ho(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],n)}}function Mh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof Mh)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function Sv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];xl(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)xl(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function xl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Le=Qa.prototype).setTimeout=function(n){this.P=n},Le.gb=function(n){n=n.target;const e=this.L;e&&3==js(n)?e.l():this.Ia(n)},Le.Ia=function(n){try{if(n==this.g)e:{const R=js(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>R)&&(3!=R||Am||this.g&&(this.h.h||this.g.ga()||Rl(this.g)))){this.I||4!=R||7==e||Sl(8==e||0>=M?3:2),Ja(this);var t=this.g.ba();this.N=t;t:if(pI(this)){var s=Rl(this.g);n="";var a=s.length,c=4==js(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Al(this),Rh(this);var f="";break t}this.h.i=new ht.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,c,f){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,I=this.g;if((m=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rv(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ii(12),Al(this),Rh(this);break e}sc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cv(this,t)}this.U?(Hm(this,R,f),Am&&this.i&&3==R&&(dI(this.V,this.W,"tick",this.fb),this.W.start())):(sc(this.j,this.m,f,null),Cv(this,f)),4==R&&Al(this),this.i&&!this.I&&(4==R?kl(this.l,this):(this.i=!1,Vp(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Al(this),Rh(this)}}}catch(R){}},Le.fb=function(){if(this.g){var n=js(this.g),e=this.g.ga();this.C<e.length&&(Ja(this),Hm(this,n,e),this.i&&4!=n&&Vp(this))}},Le.cancel=function(){this.I=!0,Al(this)},Le.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sl(3),Ii(17)),Al(this),this.o=2,Rh(this)):Dv(this,this.Y-n)},(Le=Mh.prototype).R=function(){Sv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Le.T=function(){return Sv(this),this.g.concat()},Le.get=function(n,e){return xl(this.h,n)?this.h[n]:e},Le.set=function(n,e){xl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Le.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],c=this.get(a);n.call(e,c,a,this)}};var gT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ac(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ac){this.g=void 0!==e?e:n.g,Ph(this,n.j),this.s=n.s,Av(this,n.i),Bs(this,n.m),this.l=n.l,e=n.h;var t=new Fh;t.i=e.i,e.g&&(t.g=new Mh(e.g),t.h=e.h),Gm(this,t),this.o=n.o}else n&&(t=String(n).match(gT))?(this.g=!!e,Ph(this,t[1]||"",!0),this.s=Oh(t[2]||""),Av(this,t[3]||"",!0),Bs(this,t[4]),this.l=Oh(t[5]||"",!0),Gm(this,t[6]||"",!0),this.o=Oh(t[7]||"")):(this.g=!!e,this.h=new Fh(null,this.g))}function Wt(n){return new ac(n)}function Ph(n,e,t){n.j=t?Oh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Av(n,e,t){n.i=t?Oh(e,!0):e}function Bs(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gm(n,e,t){e instanceof Fh?(n.h=e,function(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Mv(this,s),mI(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=kh(e,Up)),n.h=new Fh(e,n.g))}function pn(n,e,t){n.h.set(e,t)}function xv(n){return pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Oh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function kh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ac.prototype.toString=function(){var n=[],e=this.j;e&&n.push(kh(e,Rv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(kh(e,Rv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(kh(t,"/"==t.charAt(0)?ET:vT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",kh(t,Nv)),n.join("")};var Rv=/[#\/\?@]/g,vT=/[#\?:]/g,ET=/[#\?]/g,Up=/[#\?@]/g,Nv=/#/g;function Fh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new Mh,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var c=n[t].substring(0,s);a=n[t].substring(s+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Mv(n,e){Xa(n),e=Lh(n,e),xl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,xl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Sv(n)))}function Pv(n,e){return Xa(n),e=Lh(n,e),xl(n.g.h,e)}function mI(n,e,t){Mv(n,e),0<t.length&&(n.i=null,n.g.set(Lh(n,e),zw(t)),n.h+=t.length)}function Lh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ov(n){this.l=n||Vx,n=ht.PerformanceNavigationTiming?0<(n=ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ht.g&&ht.g.Ea&&ht.g.Ea()&&ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Le=Fh.prototype).add=function(n,e){Xa(this),this.i=null,n=Lh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Le.forEach=function(n,e){Xa(this),this.g.forEach(function(t,s){eT(t,function(a){n.call(e,a,s,this)},this)},this)},Le.T=function(){Xa(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],c=0;c<a.length;c++)t.push(e[s]);return t},Le.R=function(n){Xa(this);var e=[];if("string"==typeof n)Pv(this,n)&&(e=tT(e,this.g.get(Lh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=tT(e,n[t])}return e},Le.set=function(n,e){return Xa(this),this.i=null,Pv(this,n=Lh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Le.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Le.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var c=0;c<s.length;c++){var f=a;""!==s[c]&&(f+="="+encodeURIComponent(String(s[c]))),n.push(f)}}return this.i=n.join("&")};var Vx=10;function kv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yI(n){return n.h?1:n.g?n.g.size:0}function Fv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _I(n,e){n.g?n.g.add(e):n.h=e}function bT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Wm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zw(n.i)}function Lv(){}function vI(){this.g=new Lv}function EI(n,e,t){const s=t||"";try{Tv(n,function(a,c){let f=a;ic(a)&&(f=dv(a)),e.push(s+c+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function ji(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(c){}}function qm(n){this.l=n.$b||null,this.j=n.ib||!1}function Vv(n,e){wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=wI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ov.prototype.cancel=function(){if(this.i=Wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Lv.prototype.stringify=function(n){return ht.JSON.stringify(n,void 0)},Lv.prototype.parse=function(n){return ht.JSON.parse(n,void 0)},Xr(qm,$m),qm.prototype.g=function(){return new Vv(this.l,this.j)},qm.prototype.i=function(n){return function(){return n}}({}),Xr(Vv,wr);var wI=0;function Uv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uh(n)}function Uh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Le=Vv.prototype).open=function(n,e){if(this.readyState!=wI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uh(this)},Le.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vh(this)),this.readyState=wI},Le.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Le.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vh(this):Uh(this),3==this.readyState&&Uv(this)}},Le.Ua=function(n){this.g&&(this.response=this.responseText=n,Vh(this))},Le.Ta=function(n){this.g&&(this.response=n,Vh(this))},Le.ha=function(){this.g&&Vh(this)},Le.setRequestHeader=function(n,e){this.v.append(n,e)},Le.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Le.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Vv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DT=ht.JSON.parse;function dr(n){wr.call(this),this.headers=new Mh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bv,this.K=this.L=!1}Xr(dr,wr);var Bv="",II=/^https?$/i,CT=["POST","PUT"];function TT(n){return"content-type"==n.toLowerCase()}function bI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,DI(n),zm(n)}function DI(n){n.D||(n.D=!0,lr(n,"complete"),lr(n,"error"))}function CI(n){if(n.h&&void 0!==Gw&&(!n.C[1]||4!=js(n)||2!=n.ba()))if(n.v&&4==js(n))mv(n.Fa,0,n);else if(lr(n,"readystatechange"),4==js(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===m){var a=String(n.H).match(gT)[1]||null;if(!a&&ht.self&&ht.self.location){var c=ht.self.location.protocol;a=c.substr(0,c.length-1)}s=!II.test(a?a.toLowerCase():"")}t=s}if(t)lr(n,"complete"),lr(n,"success");else{n.m=6;try{var f=2<js(n)?n.g.statusText:""}catch(I){f=""}n.j=f+" ["+n.ba()+"]",DI(n)}}finally{zm(n)}}}function zm(n,e){if(n.g){TI(n);const t=n.g,s=n.C[0]?nv:null;n.g=null,n.C=null,e||lr(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function TI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ht.clearTimeout(n.A),n.A=null)}function js(n){return n.g?n.g.readyState:0}function Rl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Bv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function hs(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return ta(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pn(n,e,t))}function eu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function AI(n){this.za=0,this.l=[],this.h=new Um,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=eu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=eu("baseRetryDelayMs",5e3,n),this.$a=eu("retryDelaySeedMs",1e4,n),this.Ya=eu("forwardChannelMaxRetries",2,n),this.ra=eu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ov(n&&n.concurrentRequestLimit),this.Ca=new vI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function $v(n){if(fo(n),3==n.G){var e=n.V++,t=Wt(n.F);pn(t,"SID",n.J),pn(t,"RID",e),pn(t,"TYPE","terminate"),ti(n,t),(e=new Qa(n,n.h,e,void 0)).K=2,e.v=xv(Wt(t)),t=!1,ht.navigator&&ht.navigator.sendBeacon&&(t=ht.navigator.sendBeacon(e.v.toString(),"")),!t&&ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=Gv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vp(e)}Ll(n)}function Bh(n){n.g&&(cc(n),n.g.cancel(),n.g=null)}function fo(n){Bh(n),n.u&&(ht.clearTimeout(n.u),n.u=null),tu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ht.clearTimeout(n.m),n.m=null)}function Nl(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&hr(n)}function hr(n){kv(n.i)||n.m||(n.m=!0,fv(n.Ha,n),n.C=0)}function Bp(n,e){var t;t=e?e.m:n.V++;const s=Wt(n.F);pn(s,"SID",n.J),pn(s,"RID",t),pn(s,"AID",n.U),ti(n,s),n.o&&n.s&&hs(s,n.o,n.s),t=new Qa(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Km(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),_I(n.i,t),Iv(t,s,e)}function ti(n,e){n.j&&Tv({},function(t,s){pn(e,s,t)})}function Km(n,e,t){t=Math.min(n.l.length,t);var s=n.j?Jr(n.j.Oa,n.j,n):null;e:{var a=n.l;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=a[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let m=!0;for(let I=0;I<t;I++){let C=a[I].h;const R=a[I].g;if(C-=c,0>C)c=Math.max(0,a[I].h-100),m=!1;else try{EI(R,f,"req"+C+"_")}catch(M){s&&s(R)}}if(m){s=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function Pl(n){n.g||n.u||(n.Y=1,fv(n.Ga,n),n.A=0)}function uc(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ah(Jr(n.Ga,n),Fl(n,n.A)),n.A++,0))}function cc(n){null!=n.B&&(ht.clearTimeout(n.B),n.B=null)}function Ol(n){n.g=new Qa(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Wt(n.oa);pn(e,"RID","rpc"),pn(e,"SID",n.J),pn(e,"CI",n.N?"0":"1"),pn(e,"AID",n.U),ti(n,e),pn(e,"TYPE","xmlhttp"),n.o&&n.s&&hs(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=xv(Wt(e)),t.s=null,t.U=!0,bv(t,n)}function tu(n){null!=n.v&&(ht.clearTimeout(n.v),n.v=null)}function kl(n,e){var t=null;if(n.g==e){tu(n),cc(n),n.g=null;var s=2}else{if(!Fv(n.i,e))return;t=e.D,bT(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;lr(s=jm(),new vv(s,t,e,a)),hr(n)}else Pl(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(yI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ah(Jr(n.Ha,n,e),Fl(n,n.C)),n.C++,0)))}(n,e)||2==s&&uc(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:$s(n,5);break;case 4:$s(n,10);break;case 3:$s(n,6);break;default:$s(n,2)}}function Fl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function $s(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=Jr(n.jb,n);t||(t=new ac("//www.google.com/images/cleardot.gif"),ht.location&&"http"==ht.location.protocol||Ph(t,"https"),xv(t)),function(n,e){const t=new Um;if(ht.Image){const s=new Image;s.onload=Cm(ji,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Cm(ji,t,s,"TestLoadImage: error",!1,e),s.onabort=Cm(ji,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Cm(ji,t,s,"TestLoadImage: timeout",!1,e),ht.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Ii(2);n.G=0,n.j&&n.j.va(e),Ll(n),fo(n)}function Ll(n){n.G=0,n.I=-1,n.j&&((0!=Wm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,zw(n.l),n.l.length=0),n.j.ua())}function Hv(n,e,t){let s=function(n){return n instanceof ac?Wt(n):new ac(n,void 0)}(t);if(""!=s.i)e&&Av(s,e+"."+s.i),Bs(s,s.m);else{const a=ht.location;s=function(n,e,t,s){var a=new ac(null,void 0);return n&&Ph(a,n),e&&Av(a,e),t&&Bs(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&ta(n.aa,function(a,c){pn(s,c,a)}),t=n.sa,(e=n.D)&&t&&pn(s,e,t),pn(s,"VER",n.ma),ti(n,s),s}function Gv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t&&n.Ba&&!n.qa?new qm({ib:!0}):n.qa)).L=n.H,e}function Wv(){}function jp(){if(bh&&!(10<=Number(xp)))throw Error("Environmental error: no available transport.")}function $i(n,e){wr.call(this),this.g=new AI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vl(this)}function qv(n){wv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zv(){fI.call(this),this.status=1}function Vl(n){this.g=n}(Le=dr.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oc.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:oc),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void bI(this,c)}n=t||"";const a=new Mh(this.headers);s&&Tv(s,function(c,f){a.set(f,c)}),s=function(n){e:{var e=TT;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=ht.FormData&&n instanceof ht.FormData,!(0<=Tm(CT,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,f){this.g.setRequestHeader(f,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{TI(this),0<this.B&&((this.K=function(n){return bh&&Dh()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=mv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){bI(this,c)}},Le.pa=function(){void 0!==Gw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lr(this,"timeout"),this.abort(8))},Le.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,lr(this,"complete"),lr(this,"abort"),zm(this))},Le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zm(this,!0)),dr.Z.M.call(this)},Le.Fa=function(){this.s||(this.F||this.v||this.l?CI(this):this.cb())},Le.cb=function(){CI(this)},Le.ba=function(){try{return 2<js(this)?this.g.status:-1}catch(n){return-1}},Le.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Le.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),DT(e)}},Le.Da=function(){return this.m},Le.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Le=AI.prototype).ma=8,Le.G=1,Le.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Le.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Qa(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=Sm(c),iv(c,this.P)):c=this.P),null===this.o&&(a.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Km(this,a,e),pn(t=Wt(this.F),"RID",n),pn(t,"CVER",22),this.D&&pn(t,"X-HTTP-Session-Id",this.D),ti(this,t),this.o&&c&&hs(t,this.o,c),_I(this.i,a),this.Ra&&pn(t,"TYPE","init"),this.ja?(pn(t,"$req",e),pn(t,"SID","null"),a.$=!0,Iv(a,t,null)):Iv(a,t,e),this.G=2}}else 3==this.G&&(n?Bp(this,n):0==this.l.length||kv(this.i)||Bp(this))},Le.Ga=function(){if(this.u=null,Ol(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ah(Jr(this.bb,this),n)}},Le.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),Bh(this),Ol(this))},Le.ab=function(){null!=this.v&&(this.v=null,Bh(this),uc(this),Ii(19))},Le.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(Le=Wv.prototype).xa=function(){},Le.wa=function(){},Le.va=function(){},Le.ua=function(){},Le.Oa=function(){},jp.prototype.g=function(n,e){return new $i(n,e)},Xr($i,wr),$i.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),fv(Jr(n.hb,n,e))),Ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Hv(n,null,n.W),hr(n)},$i.prototype.close=function(){$v(this.g)},$i.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Nl(this.g,e)}else this.v?((e={}).__data__=dv(n),Nl(this.g,e)):Nl(this.g,n)},$i.prototype.M=function(){this.g.j=null,delete this.j,$v(this.g),delete this.g,$i.Z.M.call(this)},Xr(qv,wv),Xr(zv,fI),Xr(Vl,Wv),Vl.prototype.xa=function(){lr(this.g,"a")},Vl.prototype.wa=function(n){lr(this.g,new qv(n))},Vl.prototype.va=function(n){lr(this.g,new zv(n))},Vl.prototype.ua=function(){lr(this.g,"b")},jp.prototype.createWebChannel=jp.prototype.g,$i.prototype.send=$i.prototype.u,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,Mp.NO_ERROR=0,Mp.TIMEOUT=8,Mp.HTTP_ERROR=6,Ev.COMPLETE="complete",Pp.EventType=Op,Op.OPEN="a",Op.CLOSE="b",Op.ERROR="c",Op.MESSAGE="d",wr.prototype.listen=wr.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.La,dr.prototype.getLastErrorCode=dr.prototype.Da,dr.prototype.getStatus=dr.prototype.ba,dr.prototype.getResponseJson=dr.prototype.Qa,dr.prototype.getResponseText=dr.prototype.ga,dr.prototype.send=dr.prototype.ea;var xI=ea.createWebChannelTransport=function(){return new jp},ST=ea.getStatEventTarget=function(){return jm()},Zm=ea.ErrorCode=Mp,AT=ea.EventType=Ev,xT=ea.Event=Ya,Kv=ea.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RT=ea.FetchXmlHttpFactory=qm,Zv=ea.WebChannel=Pp,NT=ea.XhrIo=dr;const Yv="@firebase/firestore";class jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jr.UNAUTHENTICATED=new jr(null),jr.GOOGLE_CREDENTIALS=new jr("google-credentials-uid"),jr.FIRST_PARTY=new jr("first-party-uid"),jr.MOCK_USER=new jr("mock-user");let Ul="9.6.11";const lc=new Xo.Yd("@firebase/firestore");function Qv(){return lc.logLevel}function be(n,...e){if(lc.logLevel<=Xo.in.DEBUG){const t=e.map(RI);lc.debug(`Firestore (${Ul}): ${n}`,...t)}}function Hn(n,...e){if(lc.logLevel<=Xo.in.ERROR){const t=e.map(RI);lc.error(`Firestore (${Ul}): ${n}`,...t)}}function Ym(n,...e){if(lc.logLevel<=Xo.in.WARN){const t=e.map(RI);lc.warn(`Firestore (${Ul}): ${n}`,...t)}}function RI(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function $e(n="Unexpected state"){const e=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function at(n,e){n||$e()}function Ne(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $x{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jr.UNAUTHENTICATED))}shutdown(){}}class Hx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Gx{constructor(e){this.t=e,this.currentUser=jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=C=>this.i!==a?(a=this.i,t(C)):Promise.resolve();let f=new er;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new er,e.enqueueRetryable(()=>c(this.currentUser))};const m=()=>{const C=f;e.enqueueRetryable((0,ue.Z)(function*(){yield C.promise,yield c(s.currentUser)}))},I=C=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>I(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?I(C):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new er)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(at("string"==typeof s.accessToken),new NI(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return at(null===e||"string"==typeof e),new jr(e)}}class MT{constructor(e,t,s){this.type="FirstParty",this.user=jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class MI{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new MT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=c=>{null!=c.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.p;return this.p=c.token,be("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.g.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.g.getImmediate({optional:!0});c?a(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at("string"==typeof t.token),this.p=t.token,new PT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.I(s),this.T=s=>t.writeSequenceNumber(s))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function PI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}fs.A=-1;class OI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=PI(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function Et(n,e){return n<e?-1:n>e?1:0}function nu(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function kI(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Un(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Un(0,0))}static max(){return new Xe(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function FI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hp{constructor(e,t,s){void 0===t?t=0:t>e.length&&$e(),void 0===s?s=e.length-t:s>e.length-t&&$e(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Hp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hp?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),f=t.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ut extends Hp{construct(e,t,s){return new Ut(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const kT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Hp{construct(e,t,s){return new fr(e,t,s)}static isValidIdentifier(e){return kT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if("\\"===m){if(a+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[a+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=I,a+=2}else"`"===m?(f=!f,a++):"."!==m||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}class jl{constructor(e){this.fields=e,e.sort(fr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const Xv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dc(n){if(at(!!n),"string"==typeof n){let e=0;const t=Xv.exec(n);if(at(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function po(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function eE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Qm(n){const e=n.mapValue.fields.__previous_value__;return eE(e)?Qm(e):e}function $l(n){const e=dc(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class FT{constructor(e,t,s,a,c,f,m,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.useFetchStreams=I}}class go{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}function ru(n){return null==n}function jh(n){return 0===n&&1/n==-1/0}function LT(n){return"number"==typeof n&&Number.isInteger(n)&&!jh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Ut.fromString(e))}static fromName(e){return new Se(Ut.fromString(e).popFirst(5))}static empty(){return new Se(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Ut(e.slice()))}}const tE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nE={nullValue:"NULL_VALUE"};function Hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eE(n)?4:VI(n)?9:10:$e()}function ia(n,e){if(n===e)return!0;const t=Hl(n);if(t!==Hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $l(n).isEqual($l(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=dc(s.timestampValue),f=dc(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,po(n.bytesValue).isEqual(po(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Gn(s.geoPointValue.latitude)===Gn(a.geoPointValue.latitude)&&Gn(s.geoPointValue.longitude)===Gn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Gn(s.integerValue)===Gn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Gn(s.doubleValue),f=Gn(a.doubleValue);return c===f?jh(c)===jh(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return nu(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:return function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(FI(c)!==FI(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(void 0===f[m]||!ia(c[m],f[m])))return!1;return!0}(n,e);default:return $e()}var a}function Gl(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function iu(n,e){if(n===e)return 0;const t=Hl(n),s=Hl(e);if(t!==s)return Et(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(a,c){const f=Gn(a.integerValue||a.doubleValue),m=Gn(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return Jm(n.timestampValue,e.timestampValue);case 4:return Jm($l(n),$l(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(a,c){const f=po(a),m=po(c);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),m=c.split("/");for(let I=0;I<f.length&&I<m.length;I++){const C=Et(f[I],m[I]);if(0!==C)return C}return Et(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const f=Et(Gn(a.latitude),Gn(c.latitude));return 0!==f?f:Et(Gn(a.longitude),Gn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const f=a.values||[],m=c.values||[];for(let I=0;I<f.length&&I<m.length;++I){const C=iu(f[I],m[I]);if(C)return C}return Et(f.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){const f=a.fields||{},m=Object.keys(f),I=c.fields||{},C=Object.keys(I);m.sort(),C.sort();for(let R=0;R<m.length&&R<C.length;++R){const M=Et(m[R],C[R]);if(0!==M)return M;const j=iu(f[m[R]],I[C[R]]);if(0!==j)return j}return Et(m.length,C.length)}(n.mapValue,e.mapValue);default:throw $e()}}function Jm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=dc(n),s=dc(e),a=Et(t.seconds,s.seconds);return 0!==a?a:Et(t.nanos,s.nanos)}function hc(n){return Xm(n)}function Xm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=dc(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?po(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",c=!0;for(const f of s.values||[])c?c=!1:a+=",",a+=Xm(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",f=!0;for(const m of a)f?f=!1:c+=",",c+=`${m}:${Xm(s.fields[m])}`;return c+"}"}(n.mapValue):$e();var e}function Wl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ey(n){return!!n&&"integerValue"in n}function $h(n){return!!n&&"arrayValue"in n}function ty(n){return!!n&&"nullValue"in n}function rE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ny(n){return!!n&&"mapValue"in n}function Gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bl(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Gp(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UI(n){return"nullValue"in n?nE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wl(go.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:$e()}function iE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wl(go.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tE:$e()}function sE(n,e){return void 0===n?e:void 0===e||iu(n,e)>0?n:e}function oE(n,e){return void 0===n?e:void 0===e||iu(n,e)<0?n:e}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ny(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=fr.emptyPath(),s={},a=[];e.forEach((f,m)=>{if(!t.isImmediateParentOf(m)){const I=this.getFieldsMap(t);this.applyChanges(I,s,a),s={},a=[],t=m.popLast()}f?s[m.lastSegment()]=Gp(f):a.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ny(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ny(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Bl(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new $r(Gp(this.value))}}function aE(n){const e=[];return Bl(n.fields,(t,s)=>{const a=new fr([t]);if(ny(s)){const c=aE(s.mapValue).fields;if(0===c.length)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new jl(e)}class gn{constructor(e,t,s,a,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new gn(e,0,Xe.min(),Xe.min(),$r.empty(),0)}static newFoundDocument(e,t,s){return new gn(e,1,t,Xe.min(),s,0)}static newNoDocument(e,t){return new gn(e,2,t,Xe.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Xe.min(),$r.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wp{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function ry(n){return n.fields.find(e=>2===e.kind)}function fc(n){return n.fields.filter(e=>2!==e.kind)}Wp.UNKNOWN_ID=-1;class uE{constructor(e,t){this.fieldPath=e,this.kind=t}}class qp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qp(0,su.min())}}function BI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Xe.fromTimestamp(1e9===s?new Un(t+1,0):new Un(t,s));return new su(a,Se.empty(),e)}function jI(n){return new su(n.readTime,n.key,-1)}class su{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new su(Xe.min(),Se.empty(),-1)}static max(){return new su(Xe.max(),Se.empty(),-1)}}function pr(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}class $I{constructor(e,t=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.P=null}}function HI(n,e=null,t=[],s=[],a=null,c=null,f=null){return new $I(n,e,t,s,a,c,f)}function ql(n){const e=Ne(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(a=s).field.canonicalString()+a.op.toString()+hc(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),ru(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hc(s)).join(",")),e.P=t}return e.P}function zp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!mo(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!ia(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cE(n.startAt,e.startAt)&&cE(n.endAt,e.endAt)}function Kp(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zp(n,e){return n.filters.filter(t=>t instanceof Hr&&t.field.isEqual(e))}function zl(n,e,t){let s,a=!0;for(const c of Zp(n,e)){let f,m=!0;switch(c.op){case"<":case"<=":f=UI(c.value);break;case"==":case"in":case">=":f=c.value;break;case">":f=c.value,m=!1;break;case"!=":case"not-in":f=nE}sE(s,f)===f&&(s=f,a=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const f=t.position[c];sE(s,f)===f&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}function WI(n,e,t){let s,a=!0;for(const c of Zp(n,e)){let f,m=!0;switch(c.op){case">=":case">":f=iE(c.value),m=!1;break;case"==":case"in":case"<=":f=c.value;break;case"<":f=c.value,m=!1;break;case"!=":case"not-in":f=tE}oE(s,f)===f&&(s=f,a=m)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const f=t.position[c];oE(s,f)===f&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}class Hr extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,s):new qI(e,t,s):"array-contains"===t?new KI(e,s):"in"===t?new ZI(e,s):"not-in"===t?new sa(e,s):"array-contains-any"===t?new BT(e,s):new Hr(e,t,s)}static V(e,t,s){return"in"===t?new VT(e,s):new zI(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(iu(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.v(iu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $e()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qI extends Hr{constructor(e,t,s){super(e,t,s),this.key=Se.fromName(s.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.v(t)}}class VT extends Hr{constructor(e,t){super(e,"in",t),this.keys=UT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zI extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=UT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Se.fromName(s.referenceValue))}class KI extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $h(t)&&Gl(t.arrayValue,this.value)}}class ZI extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gl(this.value.arrayValue,t)}}class sa extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gl(this.value.arrayValue,t)}}class BT extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$h(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Gl(this.value.arrayValue,s))}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}class bi{constructor(e,t="asc"){this.field=e,this.dir=t}}function mo(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Hs(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const c=e[a],f=n.position[a];if(s=c.field.isKeyField()?Se.comparator(Se.fromName(f.referenceValue),t.key):iu(f,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function cE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class oa{constructor(e,t=null,s=[],a=[],c=null,f="F",m=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=I,this.D=null,this.C=null}}function YI(n,e,t,s,a,c,f,m){return new oa(n,e,t,s,a,c,f,m)}function Hh(n){return new oa(n)}function iy(n){return!ru(n.limit)&&"F"===n.limitType}function sy(n){return!ru(n.limit)&&"L"===n.limitType}function Yp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Kl(n){for(const e of n.filters)if(e.S())return e.field;return null}function lE(n){return null!==n.collectionGroup}function Zl(n){const e=Ne(n);if(null===e.D){e.D=[];const t=Kl(e),s=Yp(e);if(null!==t&&null===s)t.isKeyField()||e.D.push(new bi(t)),e.D.push(new bi(fr.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.D.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new bi(fr.keyField(),c))}}}return e.D}function Gs(n){const e=Ne(n);if(!e.C)if("F"===e.limitType)e.C=HI(e.path,e.collectionGroup,Zl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Zl(e))t.push(new bi(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new pc(e.endAt.position,!e.endAt.inclusive):null,a=e.startAt?new pc(e.startAt.position,!e.startAt.inclusive):null;e.C=HI(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.C}function dE(n,e,t){return new oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gh(n,e){return zp(Gs(n),Gs(e))&&n.limitType===e.limitType}function Qp(n){return`${ql(Gs(n))}|lt:${n.limitType}`}function hE(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${hc(s.value)}`;var s}).join(", ")}]`),ru(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>hc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>hc(t)).join(",")),`Target(${e})`}(Gs(n))}; limitType=${n.limitType})`}function oy(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Se.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,c,f){const m=Hs(a,c,f);return a.inclusive?m<=0:m<0}(t.startAt,Zl(t),s)||t.endAt&&!function(a,c,f){const m=Hs(a,c,f);return a.inclusive?m>=0:m>0}(t.endAt,Zl(t),s)));var t,s}function fE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ay(n){return(e,t)=>{let s=!1;for(const a of Zl(n)){const c=pE(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function pE(n,e,t){const s=n.field.isKeyField()?Se.comparator(e.key,t.key):function(a,c,f){const m=c.data.field(a),I=f.data.field(a);return null!==m&&null!==I?iu(m,I):$e()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return $e()}}function gE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function mE(n){return{integerValue:""+n}}function yE(n,e){return LT(e)?mE(e):gE(n,e)}class Jp{constructor(){this._=void 0}}function QI(n,e,t){return n instanceof Yl?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Ql?XI(n,e):n instanceof Jl?eb(n,e):function(s,a){const c=_E(s,a),f=tb(c)+tb(s.k);return ey(c)&&ey(s.k)?mE(f):gE(s.M,f)}(n,e)}function JI(n,e,t){return n instanceof Ql?XI(n,e):n instanceof Jl?eb(n,e):t}function _E(n,e){return n instanceof Wh?ey(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Yl extends Jp{}class Ql extends Jp{constructor(e){super(),this.elements=e}}function XI(n,e){const t=nb(e);for(const s of n.elements)t.some(a=>ia(a,s))||t.push(s);return{arrayValue:{values:t}}}class Jl extends Jp{constructor(e){super(),this.elements=e}}function eb(n,e){let t=nb(e);for(const s of n.elements)t=t.filter(a=>!ia(a,s));return{arrayValue:{values:t}}}class Wh extends Jp{constructor(e,t){super(),this.M=e,this.k=t}}function tb(n){return Gn(n.integerValue||n.doubleValue)}function nb(n){return $h(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xp{constructor(e,t){this.field=e,this.transform=t}}class $T{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cy{}function HT(n,e,t){n instanceof qh?function(s,a,c){const f=s.value.clone(),m=wE(s.fieldTransforms,a,c.transformResults);f.setAll(m),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof gc?function(s,a,c){if(!uy(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=wE(s.fieldTransforms,a,c.transformResults),m=a.data;m.setAll(EE(s)),m.setAll(f),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vE(n,e,t){var a;n instanceof qh?function(s,a,c){if(!uy(s.precondition,a))return;const f=s.value.clone(),m=IE(s.fieldTransforms,c,a);f.setAll(m),a.convertToFoundDocument(ib(a),f).setHasLocalMutations()}(n,e,t):n instanceof gc?function(s,a,c){if(!uy(s.precondition,a))return;const f=IE(s.fieldTransforms,c,a),m=a.data;m.setAll(EE(s)),m.setAll(f),a.convertToFoundDocument(ib(a),m).setHasLocalMutations()}(n,e,t):uy(n.precondition,a=e)&&a.convertToNoDocument(Xe.min())}function GT(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),c=_E(s.transform,a||null);null!=c&&(null==t&&(t=$r.empty()),t.set(s.field,c))}return t||null}function rb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&nu(t,s,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Ql&&s instanceof Ql||t instanceof Jl&&s instanceof Jl?nu(t.elements,s.elements,ia):t instanceof Wh&&s instanceof Wh?ia(t.k,s.k):t instanceof Yl&&s instanceof Yl);var t,s}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function ib(n){return n.isFoundDocument()?n.version:Xe.min()}class qh extends cy{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class gc extends cy{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}}function EE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function wE(n,e,t){const s=new Map;at(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,JI(f,m,t[a]))}return s}function IE(n,e,t){const s=new Map;for(const a of n){const c=a.transform,f=t.data.field(a.field);s.set(a.field,QI(c,f,e))}return s}class zh extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ly extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class sb{constructor(e){this.count=e}}var Wn,Ft;function bE(n){switch(n){default:return $e();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function mc(n){if(void 0===n)return Hn("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Wn.OK:return ie.OK;case Wn.CANCELLED:return ie.CANCELLED;case Wn.UNKNOWN:return ie.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return ie.INTERNAL;case Wn.UNAVAILABLE:return ie.UNAVAILABLE;case Wn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Wn.NOT_FOUND:return ie.NOT_FOUND;case Wn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Wn.ABORTED:return ie.ABORTED;case Wn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Wn.DATA_LOSS:return ie.DATA_LOSS;default:return $e()}}(Ft=Wn||(Wn={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";class yc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return LI(this.inner)}size(){return this.innerSize}}class qn{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=null!=s?s:ni.RED,this.left=null!=a?a:ni.EMPTY,this.right=null!=c?c:ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new ni(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ni.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $e();const e=this.left.check();if(e!==this.right.check())throw $e();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw $e()}get value(){throw $e()}get color(){throw $e()}get left(){throw $e()}get right(){throw $e()}copy(n,e,t,s,a){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class on{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WT(this.data.getIterator())}getIteratorFrom(e){return new WT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class WT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xl(n){return n.hasNext()?n.getNext():void 0}const ob=new qn(Se.comparator);function yo(){return ob}const Ye=new qn(Se.comparator);function DE(){return Ye}function eg(){return new yc(n=>n.toString(),(n,e)=>n.isEqual(e))}const qT=new qn(Se.comparator),dy=new on(Se.comparator);function Zt(...n){let e=dy;for(const t of n)e=e.add(t);return e}const hy=new on(Et);function ed(){return hy}class mn{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,fy.createSynthesizedTargetChangeForCurrentChange(e,t)),new mn(Xe.min(),s,ed(),yo(),Zt())}}class fy{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fy(Ir.EMPTY_BYTE_STRING,t,Zt(),Zt(),Zt())}}class tg{constructor(e,t,s,a){this.O=e,this.removedTargetIds=t,this.key=s,this.F=a}}class py{constructor(e,t){this.targetId=e,this.$=t}}class ab{constructor(e,t,s=Ir.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class CE{constructor(){this.B=0,this.L=SE(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Zt(),t=Zt(),s=Zt();return this.L.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:$e()}}),new fy(this.U,this.q,e,t,s)}J(){this.K=!1,this.L=SE()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class ub{constructor(e){this.nt=e,this.st=new Map,this.it=yo(),this.rt=TE(),this.ot=new on(Et)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const s=this.lt(t);switch(e.state){case 0:this.ft(t)&&s.W(e.resumeToken);break;case 1:s.tt(),s.G||s.J(),s.W(e.resumeToken);break;case 2:s.tt(),s.G||this.removeTarget(t);break;case 3:this.ft(t)&&(s.et(),s.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),s.W(e.resumeToken));break;default:$e()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((s,a)=>{this.ft(a)&&t(a)})}_t(e){const t=e.targetId,s=e.$.count,a=this.wt(t);if(a){const c=a.target;if(Kp(c))if(0===s){const f=new Se(c.path);this.ct(t,f,gn.newNoDocument(f,Xe.min()))}else at(1===s);else this.gt(t)!==s&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((c,f)=>{const m=this.wt(f);if(m){if(c.current&&Kp(m.target)){const I=new Se(m.target.path);null!==this.it.get(I)||this.It(f,I)||this.ct(f,I,gn.newNoDocument(I,e))}c.j&&(t.set(f,c.H()),c.J())}});let s=Zt();this.rt.forEach((c,f)=>{let m=!0;f.forEachWhile(I=>{const C=this.wt(I);return!C||2===C.purpose||(m=!1,!1)}),m&&(s=s.add(c))}),this.it.forEach((c,f)=>f.setReadTime(e));const a=new mn(e,t,this.ot,this.it,s);return this.it=yo(),this.rt=TE(),this.ot=new on(Et),a}at(e,t){if(!this.ft(e))return;const s=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,s),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,s){if(!this.ft(e))return;const a=this.lt(e);this.It(e,t)?a.Y(t,1):a.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),s&&(this.it=this.it.insert(t,s))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new CE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new on(Et),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new CE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function TE(){return new qn(Se.comparator)}function SE(){return new qn(Se.comparator)}const zT={asc:"ASCENDING",desc:"DESCENDING"},KT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ZT{constructor(e,t){this.databaseId=e,this.N=t}}function au(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cb(n,e){return n.N?e.toBase64():e.toUint8Array()}function YT(n,e){return au(n,e.toTimestamp())}function br(n){return at(!!n),Xe.fromTimestamp(function(e){const t=dc(e);return new Un(t.seconds,t.nanos)}(n))}function Kh(n,e){return(t=n,new Ut(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function AE(n){const e=Ut.fromString(n);return at(Eb(e)),e}function Zh(n,e){return Kh(n.databaseId,e.path)}function _o(n,e){const t=AE(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(lb(t))}function xE(n,e){return Kh(n.databaseId,e)}function Yh(n){const e=AE(n);return 4===e.length?Ut.emptyPath():lb(e)}function uu(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lb(n){return at(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function db(n,e,t){return{name:Zh(n,e),fields:t.value.mapValue.fields}}function hb(n,e,t){const s=_o(n,e.name),a=br(e.updateTime),c=new $r({mapValue:{fields:e.fields}}),f=gn.newFoundDocument(s,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Qh(n,e){let t;if(e instanceof qh)t={update:db(n,e.key,e.value)};else if(e instanceof zh)t={delete:Zh(n,e.key)};else if(e instanceof gc)t={update:db(n,e.key,e.data),updateMask:ng(e.fieldMask)};else{if(!(e instanceof ly))return $e();t={verify:Zh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const f=c.transform;if(f instanceof Yl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ql)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Jl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Wh)return{fieldPath:c.field.canonicalString(),increment:f.k};throw $e()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:YT(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:$e()),t;var a}function RE(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?tr.updateTime(br(a.updateTime)):void 0!==a.exists?tr.exists(a.exists):tr.none():tr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let m=null;"setToServerValue"in f?(at("REQUEST_TIME"===f.setToServerValue),m=new Yl):"appendMissingElements"in f?m=new Ql(f.appendMissingElements.values||[]):"removeAllFromArray"in f?m=new Jl(f.removeAllFromArray.values||[]):"increment"in f?m=new Wh(c,f.increment):$e();const I=fr.fromServerFormat(f.fieldPath);return new Xp(I,m)}(n,a)):[];var a;if(e.update){const a=_o(n,e.update.name),c=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new jl((e.updateMask.fieldPaths||[]).map(C=>fr.fromServerFormat(C)));return new gc(a,c,f,t,s)}return new qh(a,c,t,s)}if(e.delete){const a=_o(n,e.delete);return new zh(a,t)}if(e.verify){const a=_o(n,e.verify);return new ly(a,t)}return $e()}function mb(n,e){return{documents:[xE(n,e.path)]}}function yb(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=xE(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xE(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(I){if(0===I.length)return;const C=I.map(R=>function(M){if("=="===M.op){if(rE(M.value))return{unaryFilter:{field:cu(M.field),op:"IS_NAN"}};if(ty(M.value))return{unaryFilter:{field:cu(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(rE(M.value))return{unaryFilter:{field:cu(M.field),op:"IS_NOT_NAN"}};if(ty(M.value))return{unaryFilter:{field:cu(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(M.field),op:_b(M.op),value:M.value}}}(R));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(I){if(0!==I.length)return I.map(C=>{return{field:cu((R=C).field),direction:qx(R.dir)};var R})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=(C=e.limit,n.N||ru(C)?C:{value:C});var C,m,I;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(I=e.endAt).inclusive,values:I.position}),t}function QT(n){let e=Yh(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){at(1===s);const R=t.from[0];R.allDescendants?a=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=JT(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(R=>{return new bi(Jh((M=R).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let m=null;t.limit&&(m=function(R){let M;return M="object"==typeof R?R.value:R,ru(M)?null:M}(t.limit));let I=null;var R;t.startAt&&(I=new pc((R=t.startAt).values||[],!!R.before));let C=null;return t.endAt&&(C=function(R){return new pc(R.values||[],!R.before)}(t.endAt)),YI(e,a,f,c,m,"F",I,C)}function JT(n){return n?void 0!==n.unaryFilter?[vb(n)]:void 0!==n.fieldFilter?[XT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>JT(e)).reduce((e,t)=>e.concat(t)):$e():[]}function qx(n){return zT[n]}function _b(n){return KT[n]}function cu(n){return{fieldPath:n.canonicalString()}}function Jh(n){return fr.fromServerFormat(n.fieldPath)}function XT(n){return Hr.create(Jh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $e()}}(n.fieldFilter.op),n.fieldFilter.value)}function vb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Jh(n.unaryFilter.field);return Hr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Jh(n.unaryFilter.field);return Hr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jh(n.unaryFilter.field);return Hr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Jh(n.unaryFilter.field);return Hr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return $e()}}function ng(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Eb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wb(e)),e=eS(n.get(t),e);return wb(e)}function eS(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function wb(n){return n+"\x01\x01"}function aa(n){const e=n.length;if(at(e>=2),2===e)return at("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ut.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const f=n.indexOf("\x01",c);switch((f<0||f>t)&&$e(),n.charAt(f+1)){case"\x01":const m=n.substring(c,f);let I;0===a.length?I=m:(a+=m,I=a,a=""),s.push(I);break;case"\x10":a+=n.substring(c,f),a+="\0";break;case"\x11":a+=n.substring(c,f+1);break;default:$e()}c=f+2}return new Ut(s)}const NE=["userId","batchId"];function gy(n,e){return[n,Di(e)]}function Ib(n,e,t){return[n,Di(e),t]}const Xh={},tS=["prefixPath","collectionGroup","readTime","documentId"],bb=["prefixPath","collectionGroup","documentId"],nS=["collectionGroup","readTime","prefixPath","documentId"],Db=["canonicalId","targetId"],rS=["targetId","path"],Cb=["path","targetId"],iS=["collectionId","parent"],ME=["indexId","uid"],sS=["uid","sequenceNumber"],Tb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sb=["indexId","uid","orderedDocumentKey"],oS=["userId","collectionPath","documentId"],aS=["userId","collectionPath","largestBatchId"],uS=["userId","collectionGroup","largestBatchId"],my=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cS=[...my,"documentOverlays"],PE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lS=[...PE,"indexConfiguration","indexState","indexEntries"],Ab="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,s)=>{t(e)})}static reject(e){return new ae((t,s)=>{s(e)})}static waitFor(e){return new ae((t,s)=>{let a=0,c=0,f=!1;e.forEach(m=>{++a,m.next(()=>{++c,f&&c===a&&t()},I=>s(I))}),f=!0,c===a&&t()})}static or(e){let t=ae.resolve(!1);for(const s of e)t=t.next(a=>a?ae.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}}class yy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new er,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new rg(e,t.error)):this.At.resolve()},this.transaction.onerror=s=>{const a=_y(s.target.error);this.At.reject(new rg(e,a))}}static open(e,t,s,a){try{return new yy(t,e.transaction(a,s))}catch(c){throw new rg(t,c)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rb(t)}}class vo{constructor(e,t,s){this.name=e,this.version=t,this.bt=s,12.2===vo.Vt((0,dt.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return be("SimpleDb","Removing database:",e),td(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,dt.hl)())return!1;if(vo.St())return!0;const e=(0,dt.z$)(),t=vo.Vt(e),s=0<t&&t<10,a=vo.Dt(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Nt(e){var t=this;return(0,ue.Z)(function*(){return t.db||(be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{s(f.target.result)},c.onblocked=()=>{a(new rg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const m=f.target.error;a("VersionError"===m.name?new ge(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ge(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new rg(e,m))},c.onupgradeneeded=f=>{be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.bt.kt(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=s=>t.Mt(s)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,ue.Z)(function*(){const f="readonly"===t;let m=0;for(;;){++m;try{c.db=yield c.Nt(e);const I=yy.open(c.db,e,f?"readonly":"readwrite",s),C=a(I).next(R=>(I.Pt(),R)).catch(R=>(I.abort(R),ae.reject(R))).toPromise();return C.catch(()=>{}),yield I.Rt,C}catch(I){const C="FirebaseError"!==I.name&&m<3;if(be("SimpleDb","Transaction failed with error:",I.message,"Retrying:",C),c.close(),!C)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class dS{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return td(this.Ft.delete())}}class rg extends ge{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _c(n){return"IndexedDbTransactionError"===n.name}class Rb{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(be("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),td(s)}add(e){return be("SimpleDb","ADD",this.store.name,e,e),td(this.store.add(e))}get(e){return td(this.store.get(e)).next(t=>(void 0===t&&(t=null),be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return be("SimpleDb","DELETE",this.store.name,e),td(this.store.delete(e))}count(){return be("SimpleDb","COUNT",this.store.name),td(this.store.count())}qt(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.Kt(a,(f,m)=>{c.push(m)}).next(()=>c)}{const a=this.store.getAll(s.range);return new ae((c,f)=>{a.onerror=m=>{f(m.target.error)},a.onsuccess=m=>{c(m.target.result)}})}}Gt(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new ae((a,c)=>{s.onerror=f=>{c(f.target.error)},s.onsuccess=f=>{a(f.target.result)}})}Qt(e,t){be("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.jt=!1;const a=this.cursor(s);return this.Kt(a,(c,f,m)=>m.delete())}Wt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Kt(a,t)}zt(e){const t=this.cursor({});return new ae((s,a)=>{t.onerror=c=>{const f=_y(c.target.error);a(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(m=>{m?f.continue():s()}):s()}})}Kt(e,t){const s=[];return new ae((a,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const m=f.target.result;if(!m)return void a();const I=new dS(m),C=t(m.primaryKey,m.value,I);if(C instanceof ae){const R=C.catch(M=>(I.done(),ae.reject(M)));s.push(R)}I.isDone?a():null===I.Lt?m.continue():m.continue(I.Lt)}}).next(()=>ae.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.jt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function td(n){return new ae((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=_y(s.target.error);t(a)}})}let Nb=!1;function _y(n){const e=vo.Vt((0,dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nb||(Nb=!0,setTimeout(()=>{throw s},0)),s}}return n}class Mb extends xb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Dr(n,e){const t=Ne(n);return vo.xt(t.Ht,e)}class OE{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&HT(c,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&vE(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&vE(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(Xe.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,(t,s)=>rb(t,s))&&nu(this.baseMutations,e.baseMutations,(t,s)=>rb(t,s))}}class ig{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){at(e.mutations.length===s.length);let a=qT;const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new ig(e,t,s,a)}}class sg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,s,a,c=Xe.min(),f=Xe.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vy{constructor(e){this.Jt=e}}function Pb(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Zh(a=n.Jt,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:au(a,c.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:nd(e.version)};else{if(!e.isUnknownDocument())return $e();s.unknownDocument={path:t.path.toArray(),version:nd(e.version)}}var a,c;return s}function ef(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rd(n){const e=new Un(n.seconds,n.nanoseconds);return Xe.fromTimestamp(e)}function tf(n,e){const t=(e.baseMutations||[]).map(c=>RE(n.Jt,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const s=e.mutations.map(c=>RE(n.Jt,c)),a=Un.fromMillis(e.localWriteTimeMs);return new OE(e.batchId,a,t,s)}function nf(n){const e=rd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rd(n.lastLimboFreeSnapshotVersion):Xe.min();let s;var a;return void 0!==n.query.documents?(at(1===(a=n.query).documents.length),s=Gs(Hh(Yh(a.documents[0])))):s=Gs(QT(n.query)),new lu(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function kE(n,e){const t=nd(e.snapshotVersion),s=nd(e.lastLimboFreeSnapshotVersion);let a;a=Kp(e.target)?mb(n.Jt,e.target):yb(n.Jt,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ql(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Ey(n){const e=QT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dE(e,e.limit,"L"):e}function Ob(n,e){return new sg(e.largestBatchId,RE(n.Jt,e.overlayMutation))}function kb(n,e){const t=e.path.lastSegment();return[n,Di(e.path.popLast()),t]}class rf{getBundleMetadata(e,t){return fS(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:rd(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return fS(e).put({bundleId:(s=t).id,createTime:nd(br(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return wy(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Ey(a.bundledQuery),readTime:rd(a.readTime)};var a})}saveNamedQuery(e,t){return wy(e).put({name:(s=t).name,readTime:nd(br(s.readTime)),bundledQuery:s.bundledQuery});var s}}function fS(n){return Dr(n,"bundles")}function wy(n){return Dr(n,"namedQueries")}class sf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new sf(e,t.uid||"")}getOverlay(e,t){return og(e).get(kb(this.userId,t)).next(s=>s?Ob(this.M,s):null)}saveOverlays(e,t,s){const a=[];return s.forEach((c,f)=>{const m=new sg(t,f);a.push(this.Xt(e,m))}),ae.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(f=>a.add(Di(f.getCollectionPath())));const c=[];return a.forEach(f=>{const m=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,s+1],!1,!0);c.push(og(e).Qt("collectionPathOverlayIndex",m))}),ae.waitFor(c)}getOverlaysForCollection(e,t,s){const a=eg(),c=Di(t),f=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return og(e).qt("collectionPathOverlayIndex",f).next(m=>{for(const I of m){const C=Ob(this.M,I);a.set(C.getKey(),C)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=eg();let f;const m=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return og(e).Wt({index:"collectionGroupOverlayIndex",range:m},(I,C,R)=>{const M=Ob(this.M,C);c.size()<a||M.largestBatchId===f?(c.set(M.getKey(),M),f=M.largestBatchId):R.done()}).next(()=>c)}Xt(e,t){return og(e).put(function(s,a,c){const[f,m,I]=kb(a,c.mutation.key);return{userId:a,collectionPath:m,documentId:I,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Qh(s.Jt,c.mutation)}}(this.M,this.userId,t))}}function og(n){return Dr(n,"documentOverlays")}class Ws{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Gn(e.integerValue));else if("doubleValue"in e){const s=Gn(e.doubleValue);isNaN(s)?this.ne(t,13):(this.ne(t,15),jh(s)?t.se(0):t.se(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ne(t,20),"string"==typeof s?t.ie(s):(t.ie(`${s.seconds||""}`),t.se(s.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(po(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ne(t,45),t.se(s.latitude||0),t.se(s.longitude||0)}else"mapValue"in e?VI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):$e()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const s=e.fields||{};this.ne(t,55);for(const a of Object.keys(s))this.re(a,t),this.te(s[a],t)}he(e,t){const s=e.values||[];this.ne(t,50);for(const a of s)this.te(a,t)}ae(e,t){this.ne(t,37),Se.fromName(e).path.forEach(s=>{this.ne(t,60),this.le(s,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function pS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function gS(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=pS(255&t[a]);if(s+=c,8!==c)break}return s}(n);return Math.ceil(e/8)}Ws.fe=new Ws;class mS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this._e(s.value),s=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.ge(s.value),s=t.next();this.ye()}pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this._e(s);else if(s<2048)this._e(960|s>>>6),this._e(128|63&s);else if(t<"\ud800"||"\udbff"<t)this._e(480|s>>>12),this._e(128|63&s>>>6),this._e(128|63&s);else{const a=t.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}this.we()}Ie(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.ge(s);else if(s<2048)this.ge(960|s>>>6),this.ge(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.ge(480|s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s);else{const a=t.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}this.ye()}Te(e){const t=this.Ee(e),s=gS(t);this.Ae(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Re(e){const t=this.Ee(e),s=gS(t);this.Ae(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class ua{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class Fb{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Iy{constructor(){this.De=new mS,this.Ce=new ua(this.De),this.xe=new Fb(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Eo{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Eo(this.indexId,this.documentKey,this.arrayValue,s)}}function id(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Lb(n.arrayValue,e.arrayValue),0!==t?t:(t=Lb(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function Lb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class zx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const s=t;s.S()?this.Fe=s:this.Oe.push(s)}}$e(e){const t=ry(e);if(void 0!==t&&!this.Be(t))return!1;const s=fc(e);let a=0,c=0;for(;a<s.length&&this.Be(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Fe){const f=s[a];if(!this.Le(this.Fe,f)||!this.Ue(this.Me[c++],f))return!1;++a}for(;a<s.length;++a){const f=s[a];if(c>=this.Me.length||!this.Ue(this.Me[c++],f))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class yS{constructor(){this.qe=new FE}addToCollectionParentIndex(e,t){return this.qe.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getFieldIndex(e,t){return ae.resolve(null)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}updateCollectionGroup(e,t,s){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class FE{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new on(Ut.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new on(Ut.comparator)).toArray()}}const of=new Uint8Array(0);class LE{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new FE,this.Ge=new yc(s=>ql(s),(s,a)=>zp(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const c={collectionId:s,parent:Di(a)};return VE(e).put(c)}return ae.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[kI(t),""],!1,!0);return VE(e).qt(a).next(c=>{for(const f of c){if(f.collectionId!==t)break;s.push(aa(f.parent))}return s})}addFieldIndex(e,t){const s=ag(e),a={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;return delete a.indexId,s.add(a).next()}deleteFieldIndex(e,t){const s=ag(e),a=by(e),c=sd(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=sd(e);let a=!0;const c=new Map;return ae.forEach(this.Qe(t),f=>this.getFieldIndex(e,f).next(m=>{a&&(a=!!m),c.set(f,m)})).next(()=>{if(a){let f=Zt();const m=[];return ae.forEach(c,(I,C)=>{var R;be("IndexedDbIndexManager",`Using index ${R=I,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${ql(t)}`);const M=function(ft,nt){const Tt=ry(nt);if(void 0===Tt)return null;for(const Xt of Zp(ft,Tt.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(C,I),j=function(ft,nt){const Tt=new Map;for(const Xt of fc(nt))for(const Wi of Zp(ft,Xt.fieldPath))switch(Wi.op){case"==":case"in":Tt.set(Xt.fieldPath.canonicalString(),Wi.value);break;case"not-in":case"!=":return Tt.set(Xt.fieldPath.canonicalString(),Wi.value),Array.from(Tt.values())}return null}(C,I),W=function(ft,nt){const Tt=[];let Xt=!0;for(const Wi of fc(nt)){const Ug=0===Wi.kind?zl(ft,Wi.fieldPath,ft.startAt):WI(ft,Wi.fieldPath,ft.startAt);if(!Ug.value)return null;Tt.push(Ug.value),Xt&&(Xt=Ug.inclusive)}return new pc(Tt,Xt)}(C,I),te=function(ft,nt){const Tt=[];let Xt=!0;for(const Wi of fc(nt)){const Ug=0===Wi.kind?WI(ft,Wi.fieldPath,ft.endAt):zl(ft,Wi.fieldPath,ft.endAt);if(!Ug.value)return null;Tt.push(Ug.value),Xt&&(Xt=Ug.inclusive)}return new pc(Tt,Xt)}(C,I),we=this.je(I,C,W),Re=this.je(I,C,te),wt=this.We(I,C,j),It=this.ze(I.indexId,M,we,!!W&&W.inclusive,Re,!!te&&te.inclusive,wt);return ae.forEach(It,ft=>s.Gt(ft,t.limit).next(nt=>{nt.forEach(Tt=>{const Xt=Se.fromSegments(Tt.documentKey);f.has(Xt)||(f=f.add(Xt),m.push(Xt))})}))}).next(()=>m)}return ae.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,s,a,c,f,m){const I=(null!=t?t.length:1)*Math.max(null!=s?s.length:1,null!=c?c.length:1),C=I/(null!=t?t.length:1),R=[];for(let M=0;M<I;++M){const j=t?this.He(t[M/C]):of,W=s?this.Je(e,j,s[M%C],a):this.Ye(e),te=c?this.Xe(e,j,c[M%C],f):this.Ye(e+1);R.push(...this.createRange(W,te,m.map(we=>this.Je(e,j,we,!0))))}return R}Je(e,t,s,a){const c=new Eo(e,Se.empty(),t,s);return a?c:c.ke()}Xe(e,t,s,a){const c=new Eo(e,Se.empty(),t,s);return a?c.ke():c}Ye(e){return new Eo(e,Se.empty(),of,of)}getFieldIndex(e,t){const s=new zx(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{const f=c.filter(m=>s.$e(m));return f.sort((m,I)=>I.fields.length-m.fields.length),f.length>0?f[0]:null})}Ze(e,t){const s=new Iy;for(const a of fc(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const f=s.Ne(a.kind);Ws.fe.Zt(c,f)}return s.Se()}He(e){const t=new Iy;return Ws.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const s=new Iy;return Ws.fe.Zt(Wl(this.databaseId,t),s.Ne(function(a){const c=fc(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Se()}We(e,t,s){if(null===s)return[];let a=[];a.push(new Iy);let c=0;for(const f of fc(e)){const m=s[c++];for(const I of a)if(this.en(t,f.fieldPath)&&$h(m))a=this.nn(a,f,m);else{const C=I.Ne(f.kind);Ws.fe.Zt(m,C)}}return this.sn(a)}je(e,t,s){return null==s?null:this.We(e,t,s.position)}sn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Se();return t}nn(e,t,s){const a=[...e],c=[];for(const f of s.arrayValue.values||[])for(const m of a){const I=new Iy;I.seed(m.Se()),Ws.fe.Zt(f,I.Ne(t.kind)),c.push(I)}return c}en(e,t){return!!e.filters.find(s=>s instanceof Hr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=ag(e),a=by(e);return(t?s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.qt()).next(c=>{const f=[];return ae.forEach(c,m=>a.get([m.indexId,this.uid]).next(I=>{f.push(function(C,R){const M=R?new qp(R.sequenceNumber,new su(rd(R.readTime),new Se(aa(R.documentKey)),R.largestBatchId)):qp.empty(),j=C.fields.map(([W,te])=>new uE(fr.fromServerFormat(W),te));return new Wp(C.indexId,C.collectionGroup,j,M)}(m,I))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Et(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=ag(e),c=by(e);return this.rn(e).next(f=>a.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ae.forEach(m,I=>{return c.put({indexId:I.indexId,uid:this.user.uid||"",sequenceNumber:f,readTime:nd((j=s).readTime),documentKey:Di(j.documentKey.path),largestBatchId:j.largestBatchId});var j})))}updateIndexEntries(e,t){const s=new Map;return ae.forEach(t,(a,c)=>{const f=s.get(a.collectionGroup);return(f?ae.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(m=>(s.set(a.collectionGroup,m),ae.forEach(m,I=>this.on(e,a,I).next(C=>{const R=this.un(c,I);return C.isEqual(R)?ae.resolve():this.an(e,c,I,C,R)}))))})}cn(e,t,s,a){return sd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.tn(s,t.key),documentKey:t.key.path.toArray()})}hn(e,t,s,a){return sd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.tn(s,t.key),t.key.path.toArray()])}on(e,t,s){const a=sd(e);let c=new on(id);return a.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.tn(s,t)])},(f,m)=>{c=c.add(new Eo(s.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>c)}un(e,t){let s=new on(id);const a=this.Ze(t,e);if(null==a)return s;const c=ry(t);if(null!=c){const f=e.data.field(c.fieldPath);if($h(f))for(const m of f.arrayValue.values||[])s=s.add(new Eo(t.indexId,e.key,this.He(m),a))}else s=s.add(new Eo(t.indexId,e.key,of,a));return s}an(e,t,s,a,c){be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(m,I,C,R,M){const j=m.getIterator(),W=I.getIterator();let te=Xl(j),we=Xl(W);for(;te||we;){let Re=!1,wt=!1;if(te&&we){const It=C(te,we);It<0?wt=!0:It>0&&(Re=!0)}else null!=te?wt=!0:Re=!0;Re?(R(we),we=Xl(W)):wt?(M(te),te=Xl(j)):(te=Xl(j),we=Xl(W))}}(a,c,id,m=>{f.push(this.cn(e,t,s,m))},m=>{f.push(this.hn(e,t,s,m))}),ae.waitFor(f)}rn(e){let t=1;return by(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((f,m)=>id(f,m)).filter((f,m,I)=>!m||0!==id(f,I[m-1]));const a=[];a.push(e);for(const f of s){const m=id(f,e),I=id(f,t);if(0===m)a[0]=e.ke();else if(m>0&&I<0)a.push(f),a.push(f.ke());else if(I>0)break}a.push(t);const c=[];for(let f=0;f<a.length;f+=2)c.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,of,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,of,[]]));return c}}function VE(n){return Dr(n,"collectionParents")}function sd(n){return Dr(n,"indexEntries")}function ag(n){return Dr(n,"indexConfiguration")}function by(n){return Dr(n,"indexState")}const _S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hi{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Hi(e,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vb(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),c=[],f=IDBKeyRange.only(t.batchId);let m=0;const I=s.Wt({range:f},(R,M,j)=>(m++,j.delete()));c.push(I.next(()=>{at(1===m)}));const C=[];for(const R of t.mutations){const M=Ib(e,R.key.path,t.batchId);c.push(a.delete(M)),C.push(R.key)}return ae.waitFor(c).next(()=>C)}function Dy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $e();e=n.noDocument}return JSON.stringify(e).length}Hi.DEFAULT_COLLECTION_PERCENTILE=10,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hi.DEFAULT=new Hi(41943040,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hi.DISABLED=new Hi(-1,0,0);class Cy{constructor(e,t,s,a){this.userId=e,this.M=t,this.indexManager=s,this.referenceDelegate=a,this.ln={}}static Yt(e,t,s,a){at(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Cy(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return du(e).Wt({index:"userMutationsIndex",range:s},(a,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=af(e),f=du(e);return f.add({}).next(m=>{at("number"==typeof m);const I=new OE(m,t,s,a),C=function(j,W,te){const we=te.baseMutations.map(wt=>Qh(j.Jt,wt)),Re=te.mutations.map(wt=>Qh(j.Jt,wt));return{userId:W,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:we,mutations:Re}}(this.M,this.userId,I),R=[];let M=new on((j,W)=>Et(j.canonicalString(),W.canonicalString()));for(const j of a){const W=Ib(this.userId,j.key.path,m);M=M.add(j.key.path.popLast()),R.push(f.put(C)),R.push(c.put(W,Xh))}return M.forEach(j=>{R.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.ln[m]=I.keys()}),ae.waitFor(R).next(()=>I)})}lookupMutationBatch(e,t){return du(e).get(t).next(s=>s?(at(s.userId===this.userId),tf(this.M,s)):null)}fn(e,t){return this.ln[t]?ae.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.ln[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return du(e).Wt({index:"userMutationsIndex",range:a},(f,m,I)=>{m.userId===this.userId&&(at(m.batchId>=s),c=tf(this.M,m)),I.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return du(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(a,c,f)=>{s=c.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return du(e).qt("userMutationsIndex",t).next(s=>s.map(a=>tf(this.M,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=gy(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return af(e).Wt({range:a},(f,m,I)=>{const[C,R,M]=f,j=aa(R);if(C===this.userId&&t.path.isEqual(j))return du(e).get(M).next(W=>{if(!W)throw $e();at(W.userId===this.userId),c.push(tf(this.M,W))});I.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new on(Et);const a=[];return t.forEach(c=>{const f=gy(this.userId,c.path),m=IDBKeyRange.lowerBound(f),I=af(e).Wt({range:m},(C,R,M)=>{const[j,W,te]=C,we=aa(W);j===this.userId&&c.path.isEqual(we)?s=s.add(te):M.done()});a.push(I)}),ae.waitFor(a).next(()=>this.dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=gy(this.userId,s),f=IDBKeyRange.lowerBound(c);let m=new on(Et);return af(e).Wt({range:f},(I,C,R)=>{const[M,j,W]=I,te=aa(j);M===this.userId&&s.isPrefixOf(te)?te.length===a&&(m=m.add(W)):R.done()}).next(()=>this.dn(e,m))}dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(du(e).get(c).next(f=>{if(null===f)throw $e();at(f.userId===this.userId),s.push(tf(this.M,f))}))}),ae.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return Vb(e.Ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ae.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return af(e).Wt({range:s},(c,f,m)=>{if(c[0]===this.userId){const I=aa(c[1]);a.push(I)}else m.done()}).next(()=>{at(0===a.length)})})}containsKey(e,t){return UE(e,this.userId,t)}wn(e){return Ub(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UE(n,e,t){const s=gy(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let f=!1;return af(n).Wt({range:c,jt:!0},(m,I,C)=>{const[R,M,j]=m;R===e&&M===a&&(f=!0),C.done()}).next(()=>f)}function du(n){return Dr(n,"mutations")}function af(n){return Dr(n,"documentMutations")}function Ub(n){return Dr(n,"mutationQueues")}class vc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new vc(0)}static yn(){return new vc(-1)}}class Ty{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const s=new vc(t.highestTargetId);return t.highestTargetId=s.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Xe.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.pn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.In(e,a)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(s=>(s.targetCount+=1,this.En(t,s),this.In(e,s))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uf(e).delete(t.targetId)).next(()=>this.pn(e)).next(s=>(at(s.targetCount>0),s.targetCount-=1,this.In(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return uf(e).Wt((f,m)=>{const I=nf(m);I.sequenceNumber<=t&&null===s.get(I.targetId)&&(a++,c.push(this.removeTargetData(e,I)))}).next(()=>ae.waitFor(c)).next(()=>a)}forEachTarget(e,t){return uf(e).Wt((s,a)=>{const c=nf(a);t(c)})}pn(e){return BE(e).get("targetGlobalKey").next(t=>(at(null!==t),t))}In(e,t){return BE(e).put("targetGlobalKey",t)}Tn(e,t){return uf(e).put(kE(this.M,t))}En(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ql(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return uf(e).Wt({range:a,index:"queryTargetsIndex"},(f,m,I)=>{const C=nf(m);zp(t,C.target)&&(c=C,I.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=wo(e);return t.forEach(f=>{const m=Di(f.path);a.push(c.put({targetId:s,path:m})),a.push(this.referenceDelegate.addReference(e,s,f))}),ae.waitFor(a)}removeMatchingKeys(e,t,s){const a=wo(e);return ae.forEach(t,c=>{const f=Di(c.path);return ae.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=wo(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=wo(e);let c=Zt();return a.Wt({range:s,jt:!0},(f,m,I)=>{const C=aa(f[1]),R=new Se(C);c=c.add(R)}).next(()=>c)}containsKey(e,t){const s=Di(t.path),a=IDBKeyRange.bound([s],[kI(s)],!1,!0);let c=0;return wo(e).Wt({index:"documentTargetsIndex",jt:!0,range:a},([f,m],I,C)=>{0!==f&&(c++,C.done())}).next(()=>c>0)}Et(e,t){return uf(e).get(t).next(s=>s?nf(s):null)}}function uf(n){return Dr(n,"targets")}function BE(n){return Dr(n,"targetGlobal")}function wo(n){return Dr(n,"targetDocuments")}function ca(n){return od.apply(this,arguments)}function od(){return(od=(0,ue.Z)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==Ab)throw n;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Bb([n,e],[t,s]){const a=Et(n,t);return 0===a?Et(e,s):a}class vS{constructor(e){this.An=e,this.buffer=new on(Bb),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Bb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kx{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const s=this.Vn?3e5:6e4;be("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,ue.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){_c(a)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ca(a)}yield t.Sn(e)}))}}class ES{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(fs.A);const s=new vS(t);return this.Dn.forEachTarget(e,a=>s.bn(a.sequenceNumber)).next(()=>this.Dn.xn(e,a=>s.bn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Dn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(_S)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_S):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let s,a,c,f,m,I,C;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),a=this.params.maximumSequenceNumbersToCollect):a=M,f=Date.now(),this.nthSequenceNumber(e,a))).next(M=>(s=M,m=Date.now(),this.removeTargets(e,s,t))).next(M=>(c=M,I=Date.now(),this.removeOrphanedDocuments(e,s))).next(M=>(C=Date.now(),Qv()<=Xo.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-R}ms\n\tDetermined least recently used ${a} in `+(m-f)+`ms\n\tRemoved ${c} targets in `+(I-m)+`ms\n\tRemoved ${M} documents in `+(C-I)+`ms\nTotal Duration: ${C-R}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:M})))}}class wS{constructor(e,t){this.db=e,this.garbageCollector=new ES(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}kn(e){let t=0;return this.xn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(s,a)=>t(a))}addReference(e,t,s){return Sy(e,s)}removeReference(e,t,s){return Sy(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Sy(e,t)}On(e,t){return function(s,a){let c=!1;return Ub(s).zt(f=>UE(s,f,a).next(m=>(m&&(c=!0),ae.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Mn(e,(f,m)=>{if(m<=t){const I=this.On(e,f).next(C=>{if(!C)return c++,s.getEntry(e,f).next(()=>(s.removeEntry(f,Xe.min()),wo(e).delete([0,Di(f.path)])))});a.push(I)}}).next(()=>ae.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Sy(e,t)}Mn(e,t){const s=wo(e);let a,c=fs.A;return s.Wt({index:"documentTargetsIndex"},([f,m],{path:I,sequenceNumber:C})=>{0===f?(c!==fs.A&&t(new Se(aa(a)),c),c=C,a=I):c=fs.A}).next(()=>{c!==fs.A&&t(new Se(aa(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sy(n,e){return wo(n).put((s=n.currentSequenceNumber,{targetId:0,path:Di(e.path),sequenceNumber:s}));var s}class jb{constructor(){this.changes=new yc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?ae.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IS{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return ad(e).put(s)}removeEntry(e,t,s){return ad(e).delete(function(a,c){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],ef(c),f[f.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Fn(e,s)))}getEntry(e,t){let s=gn.newInvalidDocument(t);return ad(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ug(t))},(a,c)=>{s=this.$n(t,c)}).next(()=>s)}Bn(e,t){let s={size:0,document:gn.newInvalidDocument(t)};return ad(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ug(t))},(a,c)=>{s={document:this.$n(t,c),size:Dy(c)}}).next(()=>s)}getEntries(e,t){let s=yo();return this.Ln(e,t,(a,c)=>{const f=this.$n(a,c);s=s.insert(a,f)}).next(()=>s)}Un(e,t){let s=yo(),a=new qn(Se.comparator);return this.Ln(e,t,(c,f)=>{const m=this.$n(c,f);s=s.insert(c,m),a=a.insert(c,Dy(f))}).next(()=>({documents:s,qn:a}))}Ln(e,t,s){if(t.isEmpty())return ae.resolve();let a=new on(Hb);t.forEach(I=>a=a.add(I));const c=IDBKeyRange.bound(ug(a.first()),ug(a.last())),f=a.getIterator();let m=f.getNext();return ad(e).Wt({index:"documentKeyIndex",range:c},(I,C,R)=>{const M=Se.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Hb(m,M)<0;)s(m,null),m=f.getNext();m&&m.isEqual(M)&&(s(m,C),m=f.hasNext()?f.getNext():null),m?R.Ut(ug(m)):R.done()}).next(()=>{for(;m;)s(m,null),m=f.hasNext()?f.getNext():null})}getAllFromCollection(e,t,s){const a=[t.popLast().toArray(),t.lastSegment(),ef(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ad(e).qt(IDBKeyRange.bound(a,c,!0)).next(f=>{let m=yo();for(const I of f){const C=this.$n(Se.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,s,a){let c=yo();const f=DS(t,s),m=DS(t,su.max());return ad(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,m,!0)},(I,C,R)=>{const M=this.$n(Se.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);c=c.insert(M.key,M),c.size===a&&R.done()}).next(()=>c)}newChangeBuffer(e){return new bS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $b(e).get("remoteDocumentGlobalKey").next(t=>(at(!!t),t))}Fn(e,t){return $b(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const s=function(n,e){let t;if(e.document)t=hb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Se.fromSegments(e.noDocument.path),a=rd(e.noDocument.readTime);t=gn.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $e();{const s=Se.fromSegments(e.unknownDocument.path),a=rd(e.unknownDocument.version);t=gn.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Un(s[0],s[1]);return Xe.fromTimestamp(a)}(e.readTime)),t}(this.M,t);if(!s.isNoDocument()||!s.version.isEqual(Xe.min()))return s}return gn.newInvalidDocument(e)}}class bS extends jb{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new yc(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new on((c,f)=>Et(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const m=this.Gn.get(c);if(t.push(this.Kn.removeEntry(e,c,m.readTime)),f.isValidDocument()){const I=Pb(this.Kn.M,f);a=a.add(c.path.popLast()),s+=Dy(I)-m.size,t.push(this.Kn.addEntry(e,c,I))}else if(s-=m.size,this.trackRemovals){const I=Pb(this.Kn.M,f.convertToNoDocument(Xe.min()));t.push(this.Kn.addEntry(e,c,I))}}),a.forEach(c=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Kn.updateMetadata(e,s)),ae.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(s=>(this.Gn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:s,qn:a})=>(a.forEach((c,f)=>{this.Gn.set(c,{size:f,readTime:s.get(c).readTime})}),s))}}function $b(n){return Dr(n,"remoteDocumentGlobal")}function ad(n){return Dr(n,"remoteDocumentsV14")}function ug(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DS(n,e){const t=e.documentKey.path.toArray();return[n,ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hb(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=Et(t[c],s[c]),a)return a;return a=Et(t.length,s.length),a||(a=Et(t[t.length-2],s[s.length-2]),a||Et(t[t.length-1],s[s.length-1]))}class cg{constructor(e){this.M=e}kt(e,t,s,a){const c=new yy("createOrUpgrade",t);var m;s<1&&a>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NE,{unique:!0}),m.createObjectStore("documentMutations"),Gb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let f=ae.resolve();return s<3&&a>=3&&(0!==s&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Gb(e)),f=f.next(()=>function(m){const I=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xe.min().toTimestamp(),targetCount:0};return I.put("targetGlobalKey",C)}(c))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(m,I){return I.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NE,{unique:!0});const R=I.store("mutations"),M=C.map(j=>R.put(j));return ae.waitFor(M)})}(e,c))),f=f.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Qn(c))),s<6&&a>=6&&(f=f.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(c)))),s<7&&a>=7&&(f=f.next(()=>this.Wn(c))),s<8&&a>=8&&(f=f.next(()=>this.zn(e,c))),s<9&&a>=9&&(f=f.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(f=f.next(()=>this.Hn(c))),s<11&&a>=11&&(f=f.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(f=f.next(()=>{!function(m){const I=m.createObjectStore("documentOverlays",{keyPath:oS});I.createIndex("collectionPathOverlayIndex",aS,{unique:!1}),I.createIndex("collectionGroupOverlayIndex",uS,{unique:!1})}(e)})),s<13&&a>=13&&(f=f.next(()=>function(m){const I=m.createObjectStore("remoteDocumentsV14",{keyPath:tS});I.createIndex("documentKeyIndex",bb),I.createIndex("collectionGroupIndex",nS)}(e)).next(()=>this.Jn(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(f=f.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ME}).createIndex("sequenceNumberIndex",sS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Tb}).createIndex("documentKeyIndex",Sb,{unique:!1})}(e)})),f}jn(e){let t=0;return e.store("remoteDocuments").Wt((s,a)=>{t+=Dy(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Qn(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.qt().next(a=>ae.forEach(a,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.qt("userMutationsIndex",f).next(m=>ae.forEach(m,I=>{at(I.userId===c.userId);const C=tf(this.M,I);return Vb(e,c.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.Wt((f,m)=>{const I=new Ut(f),C=[0,Di(I)];c.push(t.get(C).next(R=>R?ae.resolve():t.put({targetId:0,path:Di(I),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ae.waitFor(c))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:iS});const s=t.store("collectionParents"),a=new FE,c=f=>{if(a.add(f)){const m=f.lastSegment(),I=f.popLast();return s.put({collectionId:m,parent:Di(I)})}};return t.store("remoteDocuments").Wt({jt:!0},(f,m)=>{const I=new Ut(f);return c(I.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([f,m,I],C)=>{const R=aa(m);return c(R.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((s,a)=>{const c=nf(a),f=kE(this.M,c);return t.put(f)})}Jn(e,t){const s=t.store("remoteDocuments"),a=[];return s.Wt((c,f)=>{const m=t.store("remoteDocumentsV14"),I=(C=f,C.document?new Se(Ut.fromString(C.document.name).popFirst(5)):C.noDocument?Se.fromSegments(C.noDocument.path):C.unknownDocument?Se.fromSegments(C.unknownDocument.path):$e()).path.toArray();var C;const R={prefixPath:I.slice(0,I.length-2),collectionGroup:I[I.length-2],documentId:I[I.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(m.put(R))}).next(()=>ae.waitFor(a))}}function Gb(n){n.createObjectStore("targetDocuments",{keyPath:rS}).createIndex("documentTargetsIndex",Cb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Db,{unique:!0}),n.createObjectStore("targetGlobal")}const jE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $E{constructor(e,t,s,a,c,f,m,I,C,R,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Yn=c,this.window=f,this.document=m,this.Xn=C,this.Zn=R,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=j=>Promise.resolve(),!$E.vt())throw new ge(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wS(this,a),this.hs=t+"main",this.M=new vy(I),this.ls=new vo(this.hs,this.ts,new cg(this.M)),this.fs=new Ty(this.referenceDelegate,this.M),this.ds=new IS(this.M),this._s=new rf,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===R&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,jE);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new fs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var s=(0,ue.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ue.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>la(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(_c(e))return be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ec(e).get("owner").next(t=>ae.resolve(this.bs(t)))}Vs(e){return la(e).delete(this.clientId)}vs(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Dr(s,"clientMetadata");return a.qt().next(c=>{const f=e.Ds(c,18e5),m=c.filter(I=>-1===f.indexOf(I));return ae.forEach(m,I=>a.delete(I.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const s of t)e.ws.removeItem(e.Cs(s.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ae.resolve(!0):Ec(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new ge(ie.FAILED_PRECONDITION,jE);return!1}}return!(!this.networkEnabled||!this.inForeground)||la(e).qt().next(s=>void 0===this.Ds(s,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Mb(t,fs.A);return e.Rs(s).next(()=>e.Vs(s))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(s=>this.Ss(s.updateTimeMs,t)&&!this.xs(s.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>la(e).qt().next(t=>this.Ds(t,18e5).map(s=>s.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Cy.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new LE(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return sf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,s){be("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=14===(f=this.ts)?lS:13===f?PE:12===f?cS:11===f?my:void $e();var f;let m;return this.ls.runTransaction(e,a,c,I=>(m=new Mb(I,this.es?this.es.next():fs.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ge(ie.FAILED_PRECONDITION,Ab);return s(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>s(m)))).then(I=>(m.raiseOnCommittedEvent(),I))}$s(e){return Ec(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ie.FAILED_PRECONDITION,jE)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ec(e).put("owner",t)}static vt(){return vo.vt()}Rs(e){const t=Ec(e);return t.get("owner").next(s=>this.bs(s)?(be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Ss(e,t){const s=Date.now();return!(e<s-t||e>s&&(Hn(`Detected an update time that is in the future: ${e} > ${s}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,dt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const s=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return be("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Hn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ec(n){return Dr(n,"owner")}function la(n){return Dr(n,"clientMetadata")}function Ay(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class CS{constructor(e,t,s){this.ds=e,this.Bs=t,this.indexManager=s}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Us(e,t,s))}Us(e,t,s){return this.ds.getEntry(e,t).next(a=>{for(const c of s)c.applyToLocalView(a);return a})}qs(e,t){e.forEach((s,a)=>{for(const c of t)c.applyToLocalView(a)})}Ks(e,t){return this.ds.getEntries(e,t).next(s=>this.Gs(e,s).next(()=>s))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.qs(t,s))}Qs(e,t,s){return Se.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.js(e,t.path):lE(t)?this.Ws(e,t,s):this.zs(e,t,s);var a}js(e,t){return this.Ls(e,new Se(t)).next(s=>{let a=DE();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Ws(e,t,s){const a=t.collectionGroup;let c=DE();return this.indexManager.getCollectionParents(e,a).next(f=>ae.forEach(f,m=>{const I=(C=t,R=m.child(a),new oa(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,R;return this.zs(e,I,s).next(C=>{C.forEach((R,M)=>{c=c.insert(R,M)})})}).next(()=>c))}zs(e,t,s){let a;return this.ds.getAllFromCollection(e,t.path,s).next(c=>(a=c,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(c=>{for(const f of c)for(const m of f.mutations){const I=m.key;let C=a.get(I);null==C&&(C=gn.newInvalidDocument(I),a=a.insert(I,C)),vE(m,C,f.localWriteTime),C.isFoundDocument()||(a=a.remove(I))}}).next(()=>(a.forEach((c,f)=>{oy(t,f)||(a=a.remove(c))}),a))}}class Wb{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Hs=s,this.Js=a}static Ys(e,t){let s=Zt(),a=Zt();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Wb(e,t.fromCache,s,a)}}class qb{Xs(e){this.Zs=e}Qs(e,t,s,a){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||s.isEqual(Xe.min())?this.ti(e,t):this.Zs.Ks(e,a).next(c=>{const f=this.ei(t,c);return(iy(t)||sy(t))&&this.ni(t.limitType,f,a,s)?this.ti(e,t):(Qv()<=Xo.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hE(t)),this.Zs.Qs(e,t,BI(s,-1)).next(m=>(f.forEach(I=>{m=m.insert(I.key,I)}),m)))});var c}ei(e,t){let s=new on(ay(e));return t.forEach((a,c)=>{oy(e,c)&&(s=s.add(c))}),s}ni(e,t,s,a){if(s.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ti(e,t){return Qv()<=Xo.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",hE(t)),this.Zs.Qs(e,t,su.min())}}class xy{constructor(e,t,s,a){this.persistence=e,this.si=t,this.M=a,this.ii=new qn(Et),this.ri=new yc(c=>ql(c),zp),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(s)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new CS(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function zb(n,e,t,s){return new xy(n,e,t,s)}function Kb(n,e){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,ue.Z)(function*(n,e){const t=Ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.Bs.getAllMutationBatches(s).next(c=>(a=c,t.ai(e),t.Bs.getAllMutationBatches(s))).next(c=>{const f=[],m=[];let I=Zt();for(const C of a){f.push(C.batchId);for(const R of C.mutations)I=I.add(R.key)}for(const C of c){m.push(C.batchId);for(const R of C.mutations)I=I.add(R.key)}return t.ci.Ks(s,I).next(C=>({hi:C,removedBatchIds:f,addedBatchIds:m}))})})})).apply(this,arguments)}function Zb(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.ui.newChangeBuffer({trackRemovals:!0});return function(f,m,I,C){const R=I.batch,M=R.keys();let j=ae.resolve();return M.forEach(W=>{j=j.next(()=>C.getEntry(m,W)).next(te=>{const we=I.docVersions.get(W);at(null!==we),te.version.compareTo(we)<0&&(R.applyToRemoteDocument(te,I),te.isValidDocument()&&(te.setReadTime(I.commitVersion),C.addEntry(te)))})}),j.next(()=>f.Bs.removeMutationBatch(m,R))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.Bs.performConsistencyCheck(s)).next(()=>t.ci.Ks(s,a))})}function Ny(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Yb(n,e){const t=Ne(n),s=e.snapshotVersion;let a=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.ui.newChangeBuffer({trackRemovals:!0});a=t.ii;const m=[];e.targetChanges.forEach((C,R)=>{const M=a.get(R);if(!M)return;m.push(t.fs.removeMatchingKeys(c,C.removedDocuments,R).next(()=>t.fs.addMatchingKeys(c,C.addedDocuments,R)));let j=M.withSequenceNumber(c.currentSequenceNumber);var W,te,we;e.targetMismatches.has(R)?j=j.withResumeToken(Ir.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):C.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(C.resumeToken,s)),a=a.insert(R,j),te=j,we=C,(0===(W=M).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(c,j))});let I=yo();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,C))}),m.push(HE(c,f,e.documentUpdates).next(C=>{I=C})),!s.isEqual(Xe.min())){const C=t.fs.getLastRemoteSnapshotVersion(c).next(R=>t.fs.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(C)}return ae.waitFor(m).next(()=>f.apply(c)).next(()=>t.ci.Gs(c,I)).next(()=>I)}).then(c=>(t.ii=a,c))}function HE(n,e,t){let s=Zt();return t.forEach(a=>s=s.add(a)),e.getEntries(n,s).next(a=>{let c=yo();return t.forEach((f,m)=>{const I=a.get(f);m.isNoDocument()&&m.version.isEqual(Xe.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!I.isValidDocument()||m.version.compareTo(I.version)>0||0===m.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",I.version," Watch version:",m.version)}),c})}function TS(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(s,e)))}function cf(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.fs.getTargetData(s,e).next(c=>c?(a=c,ae.resolve(a)):t.fs.allocateTargetId(s).next(f=>(a=new lu(e,f,0,s.currentSequenceNumber),t.fs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.ii.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ii=t.ii.insert(s.targetId,s),t.ri.set(e,s.targetId)),s})}function ud(n,e,t){return GE.apply(this,arguments)}function GE(){return(GE=(0,ue.Z)(function*(n,e,t){const s=Ne(n),a=s.ii.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!_c(f))throw f;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.ii=s.ii.remove(e),s.ri.delete(a.target)})).apply(this,arguments)}function lg(n,e,t){const s=Ne(n);let a=Xe.min(),c=Zt();return s.persistence.runTransaction("Execute query","readonly",f=>function(m,I,C){const R=Ne(m),M=R.ri.get(C);return void 0!==M?ae.resolve(R.ii.get(M)):R.fs.getTargetData(I,C)}(s,f,Gs(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.fs.getMatchingKeysForTargetId(f,m.targetId).next(I=>{c=I})}).next(()=>s.si.Qs(f,e,t?a:Xe.min(),t?c:Zt())).next(m=>(SS(s,fE(e),m),{documents:m,li:c})))}function dg(n,e){const t=Ne(n),s=Ne(t.fs),a=t.ii.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.Et(c,e).next(f=>f?f.target:null))}function hg(n,e){const t=Ne(n),s=t.oi.get(e)||Xe.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.ui.getAllFromCollectionGroup(a,e,BI(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(SS(t,e,a),a))}function SS(n,e,t){let s=Xe.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),n.oi.set(e,s)}function qt(){return(qt=(0,ue.Z)(function*(n,e,t,s){const a=Ne(n);let c=Zt(),f=yo();for(const C of t){const R=e.fi(C.metadata.name);C.document&&(c=c.add(R));const M=e.di(C);M.setReadTime(e._i(C.metadata.readTime)),f=f.insert(R,M)}const m=a.ui.newChangeBuffer({trackRemovals:!0}),I=yield cf(a,(C=s,Gs(Hh(Ut.fromString(`__bundle__/docs/${C}`)))));var C;return a.persistence.runTransaction("Apply bundle documents","readwrite",C=>HE(C,m,f).next(R=>(m.apply(C),R)).next(R=>a.fs.removeMatchingKeysForTargetId(C,I.targetId).next(()=>a.fs.addMatchingKeys(C,c,I.targetId)).next(()=>a.ci.Gs(C,R)).next(()=>R)))})).apply(this,arguments)}function wc(n,e){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,ue.Z)(function*(n,e,t=Zt()){const s=yield cf(n,Gs(Ey(e.bundledQuery))),a=Ne(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const f=br(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a._s.saveNamedQuery(c,e);const m=s.withResumeToken(Ir.EMPTY_BYTE_STRING,f);return a.ii=a.ii.insert(m.targetId,m),a.fs.updateTargetData(c,m).next(()=>a.fs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.fs.addMatchingKeys(c,t,s.targetId)).next(()=>a._s.saveNamedQuery(c,e))})})).apply(this,arguments)}class pg{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ae.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var s;return this.wi.set(t.id,{id:(s=t).id,version:s.version,createTime:br(s.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(s=t).name,query:Ey(s.bundledQuery),readTime:br(s.readTime)}),ae.resolve();var s}}class Zx{constructor(){this.overlays=new qn(Se.comparator),this.gi=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.Xt(e,t,c)}),ae.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.gi.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.gi.delete(s)),ae.resolve()}getOverlaysForCollection(e,t,s){const a=eg(),c=t.length+1,f=new Se(t.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const I=m.getNext().value,C=I.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===c&&I.largestBatchId>s&&a.set(I.getKey(),I)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new qn((C,R)=>C-R);const f=this.overlays.getIterator();for(;f.hasNext();){const C=f.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>s){let R=c.get(C.largestBatchId);null===R&&(R=eg(),c=c.insert(C.largestBatchId,R)),R.set(C.getKey(),C)}}const m=eg(),I=c.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((C,R)=>m.set(C,R)),!(m.size()>=a)););return ae.resolve(m)}Xt(e,t,s){if(null===s)return;const a=this.overlays.get(s.key);if(null!==a){const f=this.gi.get(a.largestBatchId).delete(s.key);this.gi.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new sg(t,s));let c=this.gi.get(t);void 0===c&&(c=Zt(),this.gi.set(t,c)),this.gi.set(t,c.add(s.key))}}class ut{constructor(){this.yi=new on(Jt.pi),this.Ii=new on(Jt.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const s=new Jt(e,t);this.yi=this.yi.add(s),this.Ii=this.Ii.add(s)}Ei(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Ai(new Jt(e,t))}Ri(e,t){e.forEach(s=>this.removeReference(s,t))}Pi(e){const t=new Se(new Ut([])),s=new Jt(t,e),a=new Jt(t,e+1),c=[];return this.Ii.forEachInRange([s,a],f=>{this.Ai(f),c.push(f.key)}),c}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Se(new Ut([])),s=new Jt(t,e),a=new Jt(t,e+1);let c=Zt();return this.Ii.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new Jt(e,0),s=this.yi.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Jt{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Se.comparator(e.key,t.key)||Et(e.vi,t.vi)}static Ti(e,t){return Et(e.vi,t.vi)||Se.comparator(e.key,t.key)}}class WE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new on(Jt.pi)}checkEmpty(e){return ae.resolve(0===this.Bs.length)}addMutationBatch(e,t,s,a){const c=this.Si;this.Si++;const f=new OE(c,t,s,a);this.Bs.push(f);for(const m of a)this.Di=this.Di.add(new Jt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(f)}lookupMutationBatch(e,t){return ae.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.xi(t+1),c=a<0?0:a;return ae.resolve(this.Bs.length>c?this.Bs[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ae.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),c=[];return this.Di.forEachInRange([s,a],f=>{const m=this.Ci(f.vi);c.push(m)}),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new on(Et);return t.forEach(a=>{const c=new Jt(a,0),f=new Jt(a,Number.POSITIVE_INFINITY);this.Di.forEachInRange([c,f],m=>{s=s.add(m.vi)})}),ae.resolve(this.Ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Se.isDocumentKey(c)||(c=c.child(""));const f=new Jt(new Se(c),0);let m=new on(Et);return this.Di.forEachWhile(I=>{const C=I.key.path;return!!s.isPrefixOf(C)&&(C.length===a&&(m=m.add(I.vi)),!0)},f),ae.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(s=>{const a=this.Ci(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){at(0===this.ki(t.batchId,"removed")),this.Bs.shift();let s=this.Di;return ae.forEach(t.mutations,a=>{const c=new Jt(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Di=s})}_n(e){}containsKey(e,t){const s=new Jt(t,0),a=this.Di.firstAfterOrEqual(s);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ae.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class cd{constructor(e){this.Mi=e,this.docs=new qn(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.Mi(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ae.resolve(s?s.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let s=yo();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():gn.newInvalidDocument(a))}),ae.resolve(s)}getAllFromCollection(e,t,s){let a=yo();const c=new Se(t.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:m,value:{document:I}}=f.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||pr(jI(I),s)<=0||(a=a.insert(I.key,I.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,s,a){$e()}Oi(e,t){return ae.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Yx(this)}getSize(e){return ae.resolve(this.size)}}class Yx extends jb{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Kn.addEntry(e,a)):this.Kn.removeEntry(s)}),ae.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Qb{constructor(e){this.persistence=e,this.Fi=new yc(t=>ql(t),zp),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.$i=0,this.Bi=new ut,this.targetCount=0,this.Li=vc.gn()}forEachTarget(e,t){return this.Fi.forEach((s,a)=>t(a)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$i&&(this.$i=t),ae.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Tn(t),ae.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.Fi.forEach((f,m)=>{m.sequenceNumber<=t&&null===s.get(m.targetId)&&(this.Fi.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),ae.waitFor(c).next(()=>a)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const s=this.Fi.get(t)||null;return ae.resolve(s)}addMatchingKeys(e,t,s){return this.Bi.Ei(t,s),ae.resolve()}removeMatchingKeys(e,t,s){this.Bi.Ri(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Bi.Vi(t);return ae.resolve(s)}containsKey(e,t){return ae.resolve(this.Bi.containsKey(t))}}class Jb{constructor(e,t){this.Ui={},this.overlays={},this.es=new fs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Qb(this),this.indexManager=new yS,this.ds=new cd(s=>this.referenceDelegate.qi(s)),this.M=new vy(t),this._s=new pg(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ui[e.toKey()];return s||(s=new WE(t,this.referenceDelegate),this.Ui[e.toKey()]=s),s}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,s){be("MemoryPersistence","Starting transaction:",e);const a=new Qx(this.es.next());return this.referenceDelegate.Ki(),s(a).next(c=>this.referenceDelegate.Gi(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Qi(e,t){return ae.or(Object.values(this.Ui).map(s=>()=>s.containsKey(e,t)))}}class Qx extends xb{constructor(e){super(),this.currentSequenceNumber=e}}class qE{constructor(e){this.persistence=e,this.ji=new ut,this.Wi=null}static zi(e){return new qE(e)}get Hi(){if(this.Wi)return this.Wi;throw $e()}addReference(e,t,s){return this.ji.addReference(s,t),this.Hi.delete(s.toString()),ae.resolve()}removeReference(e,t,s){return this.ji.removeReference(s,t),this.Hi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(a=>this.Hi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Hi.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Hi,s=>{const a=Se.fromPath(s);return this.Ji(e,a).next(c=>{c||t.removeEntry(a,Xe.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(s=>{s?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ae.or([()=>ae.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Xb(n,e){return`firestore_clients_${n}_${e}`}function ps(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function wn(n,e){return`firestore_targets_${n}_${e}`}class Gi{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Yi(e,t,s){const a=JSON.parse(s);let c,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new ge(a.error.code,a.error.message))),f?new Gi(e,t,a.state,c):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lf{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Yi(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new ge(s.error.code,s.error.message))),c?new lf(e,s.state,a):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class My{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=ed();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=LT(s.activeTargetIds[f]),c=c.add(s.activeTargetIds[f]);return a?new My(e,c):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Py{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Py(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gg{constructor(){this.activeTargetIds=ed()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bc{constructor(e,t,s,a,c){this.window=e,this.Yn=t,this.persistenceKey=s,this.er=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new qn(Et),this.started=!1,this.rr=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ur=Xb(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new gg),this.cr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Fs();for(const a of t){if(a===e.er)continue;const c=e.getItem(Xb(e.persistenceKey,a));if(c){const f=My.Yi(a,c);f&&(e.ir=e.ir.insert(f.clientId,f))}}e.wr();const s=e.storage.getItem(e.dr);if(s){const a=e.mr(s);a&&e.gr(a)}for(const a of e.rr)e.sr(a);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,s){this.pr(e,t,s),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(wn(this.persistenceKey,e));if(s){const a=lf.Yi(e,s);a&&(t=a.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wn(this.persistenceKey,e))}updateQueryState(e,t,s){this.Er(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Ir(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return be("SharedClientState","READ",e,t),t}setItem(e,t){be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(be("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ur)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const a=t.Pr(s.key);return t.br(a,null)}{const a=t.Vr(s.key,s.newValue);if(a)return t.br(a.clientId,a)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const a=t.vr(s.key,s.newValue);if(a)return t.Sr(a)}}else if(t.lr.test(s.key)){if(null!==s.newValue){const a=t.Dr(s.key,s.newValue);if(a)return t.Cr(a)}}else if(s.key===t.dr){if(null!==s.newValue){const a=t.mr(s.newValue);if(a)return t.gr(a)}}else if(s.key===t.ar){const a=function(c){let f=fs.A;if(null!=c)try{const m=JSON.parse(c);at("number"==typeof m),f=m}catch(m){Hn("SharedClientState","Failed to read sequence number from WebStorage",m)}return f}(s.newValue);a!==fs.A&&t.sequenceNumberHandler(a)}else if(s.key===t._r){const a=t.Nr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.kr(c)))}}else t.rr.push(s)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,s){const a=new Gi(this.currentUser,e,t,s),c=ps(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Xi())}Ir(e){const t=ps(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,s){const a=wn(this.persistenceKey,e),c=new lf(e,t,s);this.setItem(a,c.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const s=this.Pr(e);return My.Yi(s,t)}vr(e,t){const s=this.hr.exec(e),a=Number(s[1]);return Gi.Yi(new jr(void 0!==s[2]?s[2]:null),a,t)}Dr(e,t){const s=this.lr.exec(e),a=Number(s[1]);return lf.Yi(a,t)}mr(e){return Py.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.ir.insert(e,t):this.ir.remove(e),a=this.yr(this.ir),c=this.yr(s),f=[],m=[];return c.forEach(I=>{a.has(I)||f.push(I)}),a.forEach(I=>{c.has(I)||m.push(I)}),this.syncEngine.Fr(f,m).then(()=>{this.ir=s})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=ed();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class df{constructor(){this.$r=new gg,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,s){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new gg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class AS{Lr(e){}shutdown(){}}class Dc{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class eD{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class zE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,s,a,c){const f=this.uo(e,t);be("RestConnection","Sending: ",f,s);const m={};return this.ao(m,a,c),this.co(e,f,m,s).then(I=>(be("RestConnection","Received: ",I),I),I=>{throw Ym("RestConnection",`${e} failed with error: `,I,"url: ",f,"request:",s),I})}ho(e,t,s,a,c){return this.oo(e,t,s,a,c)}ao(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}uo(e,t){return`${this.io}/v1/${t}:${xS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,a){return new Promise((c,f)=>{const m=new NT;m.listenOnce(AT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Zm.NO_ERROR:const C=m.getResponseJson();be("Connection","XHR received:",JSON.stringify(C)),c(C);break;case Zm.TIMEOUT:be("Connection",'RPC "'+e+'" timed out'),f(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Zm.HTTP_ERROR:const R=m.getStatus();if(be("Connection",'RPC "'+e+'" failed with status:',R,"response text:",m.getResponseText()),R>0){const M=m.getResponseJson().error;if(M&&M.status&&M.message){const j=function(W){const te=W.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(te)>=0?te:ie.UNKNOWN}(M.status);f(new ge(j,M.message))}else f(new ge(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:$e()}}finally{be("Connection",'RPC "'+e+'" completed.')}});const I=JSON.stringify(a);m.send(t,"POST",I,s,15)})}lo(e,t,s){const a=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xI(),f=ST(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new RT({})),this.ao(m.initMessageHeaders,t,s),(0,dt.uI)()||(0,dt.b$)()||(0,dt.d)()||(0,dt.w1)()||(0,dt.Mn)()||(0,dt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const I=a.join("");be("Connection","Creating WebChannel: "+I,m);const C=c.createWebChannel(I,m);let R=!1,M=!1;const j=new eD({Wr:te=>{M?be("Connection","Not sending because WebChannel is closed:",te):(R||(be("Connection","Opening WebChannel transport."),C.open(),R=!0),be("Connection","WebChannel sending:",te),C.send(te))},zr:()=>C.close()}),W=(te,we,Re)=>{te.listen(we,wt=>{try{Re(wt)}catch(It){setTimeout(()=>{throw It},0)}})};return W(C,Zv.EventType.OPEN,()=>{M||be("Connection","WebChannel transport opened.")}),W(C,Zv.EventType.CLOSE,()=>{M||(M=!0,be("Connection","WebChannel transport closed"),j.no())}),W(C,Zv.EventType.ERROR,te=>{M||(M=!0,Ym("Connection","WebChannel transport errored:",te),j.no(new ge(ie.UNAVAILABLE,"The operation could not be completed")))}),W(C,Zv.EventType.MESSAGE,te=>{var we;if(!M){const Re=te.data[0];at(!!Re);const wt=Re,It=wt.error||(null===(we=wt[0])||void 0===we?void 0:we.error);if(It){be("Connection","WebChannel received error:",It);const ft=It.status;let nt=function(Xt){const Wi=Wn[Xt];if(void 0!==Wi)return mc(Wi)}(ft),Tt=It.message;void 0===nt&&(nt=ie.INTERNAL,Tt="Unknown error status: "+ft+" with message "+It.message),M=!0,j.no(new ge(nt,Tt)),C.close()}else be("Connection","WebChannel received:",Re),j.so(Re)}}),W(f,xT.STAT_EVENT,te=>{te.stat===Kv.PROXY?be("Connection","Detected buffering proxy"):te.stat===Kv.NOPROXY&&be("Connection","Detected no buffering proxy")}),setTimeout(()=>{j.eo()},0),j}}function hf(){return"undefined"!=typeof window?window:null}function ff(){return"undefined"!=typeof document?document:null}function pf(n){return new ZT(n,!0)}class Cc{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Yn=e,this.timerId=t,this.fo=s,this._o=a,this.wo=c,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),s=Math.max(0,Date.now()-this.po),a=Math.max(0,t-s);a>0&&be("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,a,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class tD{constructor(e,t,s,a,c,f,m,I){this.Yn=e,this.Ro=s,this.Po=a,this.bo=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=I,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Cc(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ue.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ue.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var s=this;return(0,ue.Z)(function*(){s.$o(),s.Bo(),s.Do.cancel(),s.Vo++,4!==e?s.Do.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),s.Do.Io()):t&&t.code===ie.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Lo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Vo===t&&this.qo(s,a)},s=>{e(()=>{const a=new ge(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ko(a)})})}qo(e,t){const s=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{s(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(a=>{s(()=>this.Ko(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}No(){var e=this;this.state=5,this.Do.To((0,ue.Z)(function*(){e.state=0,e.start()}))}Ko(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Oy extends tD{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.M=c}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:$e(),a=e.targetChange.targetIds||[],c=function(I,C){return I.N?(at(void 0===C||"string"==typeof C),Ir.fromBase64String(C||"")):(at(void 0===C||C instanceof Uint8Array),Ir.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(I){const C=void 0===I.code?ie.UNKNOWN:mc(I.code);return new ge(C,I.message||"")}(f);t=new ab(s,a,c,m||null)}else if("documentChange"in e){const s=e.documentChange,a=_o(n,s.document.name),c=br(s.document.updateTime),f=new $r({mapValue:{fields:s.document.fields}}),m=gn.newFoundDocument(a,c,f);t=new tg(s.targetIds||[],s.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const s=e.documentDelete,a=_o(n,s.document),c=s.readTime?br(s.readTime):Xe.min(),f=gn.newNoDocument(a,c);t=new tg([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=_o(n,s.document);t=new tg([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return $e();{const s=e.filter,c=new sb(s.count||0);t=new py(s.targetId,c)}}var I;return t}(this.M,e),s=function(a){if(!("targetChange"in a))return Xe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?br(c.readTime):Xe.min()}(e);return this.listener.Qo(t,s)}jo(e){const t={};t.database=uu(this.M),t.addTarget=function(a,c){let f;const m=c.target;return f=Kp(m)?{documents:mb(a,m)}:{query:yb(a,m)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?f.resumeToken=cb(a,c.resumeToken):c.snapshotVersion.compareTo(Xe.min())>0&&(f.readTime=au(a,c.snapshotVersion.toTimestamp())),f}(this.M,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $e()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Fo(t)}Wo(e){const t={};t.database=uu(this.M),t.removeTarget=e,this.Fo(t)}}class nD extends tD{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.M=c,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(n,e){return n&&n.length>0?(at(void 0!==e),n.map(t=>function(s,a){let c=br(s.updateTime?s.updateTime:a);return c.isEqual(Xe.min())&&(c=br(a)),new $T(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=br(e.commitTime);return this.listener.Yo(s,t)}return at(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=uu(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Qh(this.M,s))};this.Fo(t)}}class rD extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.M=a,this.tu=!1}eu(){if(this.tu)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,s){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.oo(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ie.UNKNOWN,a.toString())})}ho(e,t,s){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.bo.ho(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ie.UNKNOWN,a.toString())})}terminate(){this.tu=!0}}class iD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Hn(t),this.iu=!1):be("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class ky{constructor(e,t,s,a,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=c,this._u.Lr(m=>{s.enqueueAndForget((0,ue.Z)(function*(){var I;Sc(f)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,ue.Z)(function*(C){const R=Ne(C);R.fu.add(4),yield Tc(R),R.wu.set("Unknown"),R.fu.delete(4),yield mg(R)}),function(C){return I.apply(this,arguments)})(f))}))}),this.wu=new iD(s,a)}}function mg(n){return yg.apply(this,arguments)}function yg(){return(yg=(0,ue.Z)(function*(n){if(Sc(n))for(const e of n.du)yield e(!0)})).apply(this,arguments)}function Tc(n){return sD.apply(this,arguments)}function sD(){return(sD=(0,ue.Z)(function*(n){for(const e of n.du)yield e(!1)})).apply(this,arguments)}function KE(n,e){const t=Ne(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),YE(t)?ZE(t):yf(t).xo()&&oD(t,e))}function et(n,e){const t=Ne(n),s=yf(t);t.lu.delete(e),s.xo()&&gf(t,e),0===t.lu.size&&(s.xo()?s.Mo():Sc(t)&&t.wu.set("Unknown"))}function oD(n,e){n.mu.Z(e.targetId),yf(n).jo(e)}function gf(n,e){n.mu.Z(e),yf(n).Wo(e)}function ZE(n){n.mu=new ub({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),yf(n).start(),n.wu.ru()}function YE(n){return Sc(n)&&!yf(n).Co()&&n.lu.size>0}function Sc(n){return 0===Ne(n).fu.size}function RS(n){n.mu=void 0}function Jx(n){return QE.apply(this,arguments)}function QE(){return(QE=(0,ue.Z)(function*(n){n.lu.forEach((e,t)=>{oD(n,e)})})).apply(this,arguments)}function ri(n,e){return JE.apply(this,arguments)}function JE(){return(JE=(0,ue.Z)(function*(n,e){RS(n),YE(n)?(n.wu.au(e),ZE(n)):n.wu.set("Unknown")})).apply(this,arguments)}function NS(n,e,t){return _g.apply(this,arguments)}function _g(){return(_g=(0,ue.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof ab&&2===e.state&&e.cause)try{yield(s=(0,ue.Z)(function*(a,c){const f=c.cause;for(const m of c.targetIds)a.lu.has(m)&&(yield a.remoteSyncer.rejectListen(m,f),a.lu.delete(m),a.mu.removeTarget(m))}),function(a,c){return s.apply(this,arguments)})(n,e)}catch(s){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Fy(n,s)}else if(e instanceof tg?n.mu.ut(e):e instanceof py?n.mu._t(e):n.mu.ht(e),!t.isEqual(Xe.min()))try{const s=yield Ny(n.localStore);t.compareTo(s)>=0&&(yield function(a,c){const f=a.mu.yt(c);return f.targetChanges.forEach((m,I)=>{if(m.resumeToken.approximateByteSize()>0){const C=a.lu.get(I);C&&a.lu.set(I,C.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach(m=>{const I=a.lu.get(m);if(!I)return;a.lu.set(m,I.withResumeToken(Ir.EMPTY_BYTE_STRING,I.snapshotVersion)),gf(a,m);const C=new lu(I.target,m,1,I.sequenceNumber);oD(a,C)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(s){be("RemoteStore","Failed to raise snapshot:",s),yield Fy(n,s)}var s})).apply(this,arguments)}function Fy(n,e,t){return XE.apply(this,arguments)}function XE(){return(XE=(0,ue.Z)(function*(n,e,t){if(!_c(e))throw e;n.fu.add(1),yield Tc(n),n.wu.set("Offline"),t||(t=()=>Ny(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield mg(n)}))})).apply(this,arguments)}function aD(n,e){return e().catch(t=>Fy(n,t,e))}function mf(n){return e0.apply(this,arguments)}function e0(){return(e0=(0,ue.Z)(function*(n){const e=Ne(n),t=hu(e);let s=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;MS(e);)try{const a=yield TS(e.localStore,s);if(null===a){0===e.hu.length&&t.Mo();break}s=a.batchId,t0(e,a)}catch(a){yield Fy(e,a)}uD(e)&&cD(e)})).apply(this,arguments)}function MS(n){return Sc(n)&&n.hu.length<10}function t0(n,e){n.hu.push(e);const t=hu(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function uD(n){return Sc(n)&&!hu(n).Co()&&n.hu.length>0}function cD(n){hu(n).start()}function lD(n){return vg.apply(this,arguments)}function vg(){return(vg=(0,ue.Z)(function*(n){hu(n).Zo()})).apply(this,arguments)}function PS(n){return dD.apply(this,arguments)}function dD(){return(dD=(0,ue.Z)(function*(n){const e=hu(n);for(const t of n.hu)e.Jo(t.mutations)})).apply(this,arguments)}function OS(n,e,t){return n0.apply(this,arguments)}function n0(){return(n0=(0,ue.Z)(function*(n,e,t){const s=n.hu.shift(),a=ig.from(s,e,t);yield aD(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield mf(n)})).apply(this,arguments)}function kS(n,e){return r0.apply(this,arguments)}function r0(){return(r0=(0,ue.Z)(function*(n,e){var t;e&&hu(n).Ho&&(yield(t=(0,ue.Z)(function*(s,a){if(bE(c=a.code)&&c!==ie.ABORTED){const f=s.hu.shift();hu(s).ko(),yield aD(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield mf(s)}var c}),function(s,a){return t.apply(this,arguments)})(n,e)),uD(n)&&cD(n)})).apply(this,arguments)}function hD(n,e){return s0.apply(this,arguments)}function s0(){return(s0=(0,ue.Z)(function*(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const s=Sc(t);t.fu.add(3),yield Tc(t),s&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield mg(t)})).apply(this,arguments)}function ld(n,e){return o0.apply(this,arguments)}function o0(){return(o0=(0,ue.Z)(function*(n,e){const t=Ne(n);e?(t.fu.delete(2),yield mg(t)):e||(t.fu.add(2),yield Tc(t),t.wu.set("Unknown"))})).apply(this,arguments)}function yf(n){return n.gu||(n.gu=function(e,t,s){const a=Ne(e);return a.eu(),new Oy(t,a.bo,a.authCredentials,a.appCheckCredentials,a.M,s)}(n.datastore,n.asyncQueue,{Hr:Jx.bind(null,n),Yr:ri.bind(null,n),Qo:NS.bind(null,n)}),n.du.push(function(){var e=(0,ue.Z)(function*(t){t?(n.gu.ko(),YE(n)?ZE(n):n.wu.set("Unknown")):(yield n.gu.stop(),RS(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function hu(n){return n.yu||(n.yu=function(e,t,s){const a=Ne(e);return a.eu(),new nD(t,a.bo,a.authCredentials,a.appCheckCredentials,a.M,s)}(n.datastore,n.asyncQueue,{Hr:lD.bind(null,n),Yr:kS.bind(null,n),Xo:PS.bind(null,n),Yo:OS.bind(null,n)}),n.du.push(function(){var e=(0,ue.Z)(function*(t){t?(n.yu.ko(),yield mf(n)):(yield n.yu.stop(),n.hu.length>0&&(be("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class dd{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,m=new dd(e,t,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),_c(n))return new ge(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class hd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Se.comparator(t.key,s.key):(t,s)=>Se.comparator(t.key,s.key),this.keyedMap=DE(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new hd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new hd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class fD{constructor(){this.pu=new qn(Se.comparator)}track(e){const t=e.doc.key,s=this.pu.get(t);s?0!==e.type&&3===s.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==s.type?this.pu=this.pu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.pu=this.pu.remove(t):1===e.type&&2===s.type?this.pu=this.pu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):$e():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,s)=>{e.push(s)}),e}}class _f{constructor(e,t,s,a,c,f,m,I){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=I}static fromInitialDocuments(e,t,s,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new _f(e,t,hd.emptySet(t),c,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class FS{constructor(){this.Tu=void 0,this.listeners=[]}}class LS{constructor(){this.queries=new yc(e=>Qp(e),Gh),this.onlineState="Unknown",this.Eu=new Set}}function a0(n,e){return Ly.apply(this,arguments)}function Ly(){return(Ly=(0,ue.Z)(function*(n,e){const t=Ne(n),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new FS),a)try{c.Tu=yield t.onListen(s)}catch(f){const m=Eg(f,`Initialization of query '${hE(e.query)}' failed`);return void e.onError(m)}t.queries.set(s,c),c.listeners.push(e),e.Au(t.onlineState),c.Tu&&e.Ru(c.Tu)&&pD(t)})).apply(this,arguments)}function u0(n,e){return c0.apply(this,arguments)}function c0(){return(c0=(0,ue.Z)(function*(n,e){const t=Ne(n),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function Xx(n,e){const t=Ne(n);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const m of f.listeners)m.Ru(a)&&(s=!0);f.Tu=a}}s&&pD(t)}function eR(n,e,t){const s=Ne(n),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function pD(n){n.Eu.forEach(e=>{e.next()})}class wg{constructor(e,t,s){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=s||{}}Ru(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new _f(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=_f.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class VS{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class gD{constructor(e){this.M=e}fi(e){return _o(this.M,e)}di(e){return e.metadata.exists?hb(this.M,e.document,!1):gn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return br(e)}}class US{constructor(e,t,s){this.Nu=e,this.localStore=t,this.M=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mD(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=Ut.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,s=new gD(this.M);for(const a of e)if(a.metadata.queries){const c=s.fi(a.metadata.name);for(const f of a.metadata.queries){const m=(t.get(f)||Zt()).add(c);t.set(f,m)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function(n,e,t,s){return qt.apply(this,arguments)}(e.localStore,new gD(e.M),e.documents,e.Nu.id),s=e.Mu(e.documents);for(const a of e.queries)yield wc(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function mD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yD{constructor(e){this.key=e}}class _D{constructor(e){this.key=e}}class l0{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Zt(),this.mutatedKeys=Zt(),this.Uu=ay(e),this.qu=new hd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const s=t?t.Qu:new fD,a=t?t.qu:this.qu;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,m=!1;const I=iy(this.query)&&a.size===this.query.limit?a.last():null,C=sy(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((R,M)=>{const j=a.get(R),W=oy(this.query,M)?M:null,te=!!j&&this.mutatedKeys.has(j.key),we=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Re=!1;j&&W?j.data.isEqual(W.data)?te!==we&&(s.track({type:3,doc:W}),Re=!0):this.ju(j,W)||(s.track({type:2,doc:W}),Re=!0,(I&&this.Uu(W,I)>0||C&&this.Uu(W,C)<0)&&(m=!0)):!j&&W?(s.track({type:0,doc:W}),Re=!0):j&&!W&&(s.track({type:1,doc:j}),Re=!0,(I||C)&&(m=!0)),Re&&(W?(f=f.add(W),c=we?c.add(R):c.delete(R)):(f=f.delete(R),c=c.delete(R)))}),iy(this.query)||sy(this.query))for(;f.size>this.query.limit;){const R=iy(this.query)?f.last():f.first();f=f.delete(R.key),c=c.delete(R.key),s.track({type:1,doc:R})}return{qu:f,Qu:s,ni:m,mutatedKeys:c}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const c=e.Qu.Iu();c.sort((C,R)=>function(M,j){const W=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e()}};return W(M)-W(j)}(C.type,R.type)||this.Uu(C.doc,R.doc)),this.Wu(s);const f=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,I=m!==this.Bu;return this.Bu=m,0!==c.length||I?{snapshot:new _f(this.query,e.qu,a,c,e.mutatedKeys,0===m,I,!1),Hu:f}:{Hu:f}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new fD,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Zt(),this.qu.forEach(s=>{this.Ju(s.key)&&(this.Lu=this.Lu.add(s.key))});const t=[];return e.forEach(s=>{this.Lu.has(s)||t.push(new _D(s))}),this.Lu.forEach(s=>{e.has(s)||t.push(new yD(s))}),t}Yu(e){this.$u=e.li,this.Lu=Zt();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return _f.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class d0{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class BS{constructor(e){this.key=e,this.Zu=!1}}class vf{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.ta={},this.ea=new yc(m=>Qp(m),Gh),this.na=new Map,this.sa=new Set,this.ia=new qn(Se.comparator),this.ra=new Map,this.oa=new ut,this.ua={},this.aa=new Map,this.ca=vc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function ii(n,e){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,ue.Z)(function*(n,e){const t=gd(n);let s,a;const c=t.ea.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.Xu();else{const f=yield cf(t.localStore,Gs(e));t.isPrimaryClient&&KE(t.remoteStore,f);const m=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield gs(t,e,s,"current"===m)}return a})).apply(this,arguments)}function gs(n,e,t,s){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ue.Z)(function*(n,e,t,s){n.la=(R,M,j)=>{return(W=(0,ue.Z)(function*(te,we,Re,wt){let It=we.view.Gu(Re);It.ni&&(It=yield lg(te.localStore,we.query,!1).then(({documents:Tt})=>we.view.Gu(Tt,It)));const ft=wt&&wt.targetChanges.get(we.targetId),nt=we.view.applyChanges(It,te.isPrimaryClient,ft);return bg(te,we.targetId,nt.Hu),nt.snapshot}),function(te,we,Re,wt){return W.apply(this,arguments)})(n,R,M,j);var W};const a=yield lg(n.localStore,e,!0),c=new l0(e,a.li),f=c.Gu(a.documents),m=fy.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),I=c.applyChanges(f,n.isPrimaryClient,m);bg(n,t,I.Hu);const C=new d0(e,t,c);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),I.snapshot})).apply(this,arguments)}function jS(n,e){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,ue.Z)(function*(n,e){const t=Ne(n),s=t.ea.get(e),a=t.na.get(s.targetId);if(a.length>1)return t.na.set(s.targetId,a.filter(c=>!Gh(c,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ud(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),et(t.remoteStore,s.targetId),fd(t,s.targetId)}).catch(ca))):(fd(t,s.targetId),yield ud(t.localStore,s.targetId,!0))})).apply(this,arguments)}function By(){return(By=(0,ue.Z)(function*(n,e,t){const s=md(n);try{const a=yield function(c,f){const m=Ne(c),I=Un.now(),C=f.reduce((M,j)=>M.add(j.key),Zt());let R;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>m.ci.Ks(M,C).next(j=>{R=j;const W=[];for(const te of f){const we=GT(te,R.get(te.key));null!=we&&W.push(new gc(te.key,we,aE(we.value.mapValue),tr.exists(!0)))}return m.Bs.addMutationBatch(M,I,W,f)})).then(M=>(M.applyToLocalDocumentSet(R),{batchId:M.batchId,changes:R}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,m){let I=c.ua[c.currentUser.toKey()];I||(I=new qn(Et)),I=I.insert(f,m),c.ua[c.currentUser.toKey()]=I}(s,a.batchId,t),yield fu(s,a.changes),yield mf(s.remoteStore)}catch(a){const c=Eg(a,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function ED(n,e){return h0.apply(this,arguments)}function h0(){return(h0=(0,ue.Z)(function*(n,e){const t=Ne(n);try{const s=yield Yb(t.localStore,e);e.targetChanges.forEach((a,c)=>{const f=t.ra.get(c);f&&(at(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.Zu=!0:a.modifiedDocuments.size>0?at(f.Zu):a.removedDocuments.size>0&&(at(f.Zu),f.Zu=!1))}),yield fu(t,s,e)}catch(s){yield ca(s)}})).apply(this,arguments)}function wD(n,e,t){const s=Ne(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.ea.forEach((c,f)=>{const m=f.view.Au(e);m.snapshot&&a.push(m.snapshot)}),function(c,f){const m=Ne(c);m.onlineState=f;let I=!1;m.queries.forEach((C,R)=>{for(const M of R.listeners)M.Au(f)&&(I=!0)}),I&&pD(m)}(s.eventManager,e),a.length&&s.ta.Qo(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function ID(n,e,t){return f0.apply(this,arguments)}function f0(){return(f0=(0,ue.Z)(function*(n,e,t){const s=Ne(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.ra.get(e),c=a&&a.key;if(c){let f=new qn(Se.comparator);f=f.insert(c,gn.newNoDocument(c,Xe.min()));const m=Zt().add(c),I=new mn(Xe.min(),new Map,new on(Et),f,m);yield ED(s,I),s.ia=s.ia.remove(c),s.ra.delete(e),m0(s)}else yield ud(s.localStore,e,!1).then(()=>fd(s,e,t)).catch(ca)})).apply(this,arguments)}function tR(n,e){return p0.apply(this,arguments)}function p0(){return(p0=(0,ue.Z)(function*(n,e){const t=Ne(n),s=e.batch.batchId;try{const a=yield Zb(t.localStore,e);bD(t,s,null),g0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield fu(t,a)}catch(a){yield ca(a)}})).apply(this,arguments)}function $S(n,e,t){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,ue.Z)(function*(n,e,t){const s=Ne(n);try{const a=yield function(c,f){const m=Ne(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let C;return m.Bs.lookupMutationBatch(I,f).next(R=>(at(null!==R),C=R.keys(),m.Bs.removeMutationBatch(I,R))).next(()=>m.Bs.performConsistencyCheck(I)).next(()=>m.ci.Ks(I,C))})}(s.localStore,e);bD(s,e,t),g0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield fu(s,a)}catch(a){yield ca(a)}})).apply(this,arguments)}function jy(){return(jy=(0,ue.Z)(function*(n,e){const t=Ne(n);Sc(t.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const f=Ne(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>f.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===s)return void e.resolve();const a=t.aa.get(s)||[];a.push(e),t.aa.set(s,a)}catch(s){const a=Eg(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function g0(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function bD(n,e,t){const s=Ne(n);let a=s.ua[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.ua[s.currentUser.toKey()]=a}}function fd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.na.get(e))n.ea.delete(s),t&&n.ta.fa(s,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(s=>{n.oa.containsKey(s)||DD(n,s)})}function DD(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(et(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),m0(n))}function bg(n,e,t){for(const s of t)s instanceof yD?(n.oa.addReference(s.key,e),HS(n,s)):s instanceof _D?(be("SyncEngine","Document no longer in limbo: "+s.key),n.oa.removeReference(s.key,e),n.oa.containsKey(s.key)||DD(n,s.key)):$e()}function HS(n,e){const t=e.key,s=t.path.canonicalString();n.ia.get(t)||n.sa.has(s)||(be("SyncEngine","New document in limbo: "+t),n.sa.add(s),m0(n))}function m0(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Se(Ut.fromString(e)),s=n.ca.next();n.ra.set(s,new BS(t)),n.ia=n.ia.insert(t,s),KE(n.remoteStore,new lu(Gs(Hh(t.path)),s,2,fs.A))}}function fu(n,e,t){return y0.apply(this,arguments)}function y0(){return(y0=(0,ue.Z)(function*(n,e,t){const s=Ne(n),a=[],c=[],f=[];var m;s.ea.isEmpty()||(s.ea.forEach((m,I)=>{f.push(s.la(I,e,t).then(C=>{if(C){s.isPrimaryClient&&s.sharedClientState.updateQueryState(I.targetId,C.fromCache?"not-current":"current"),a.push(C);const R=Wb.Ys(I.targetId,C);c.push(R)}}))}),yield Promise.all(f),s.ta.Qo(a),yield(m=(0,ue.Z)(function*(I,C){const R=Ne(I);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ae.forEach(C,j=>ae.forEach(j.Hs,W=>R.persistence.referenceDelegate.addReference(M,j.targetId,W)).next(()=>ae.forEach(j.Js,W=>R.persistence.referenceDelegate.removeReference(M,j.targetId,W)))))}catch(M){if(!_c(M))throw M;be("LocalStore","Failed to update sequence numbers: "+M)}for(const M of C){const j=M.targetId;if(!M.fromCache){const W=R.ii.get(j),we=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);R.ii=R.ii.insert(j,we)}}}),function(I,C){return m.apply(this,arguments)})(s.localStore,c))})).apply(this,arguments)}function GS(n,e){return _0.apply(this,arguments)}function _0(){return(_0=(0,ue.Z)(function*(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const s=yield Kb(t.localStore,e);t.currentUser=e,(a=t).aa.forEach(f=>{f.forEach(m=>{m.reject(new ge(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.aa.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield fu(t,s.hi)}var a})).apply(this,arguments)}function WS(n,e){const t=Ne(n),s=t.ra.get(e);if(s&&s.Zu)return Zt().add(s.key);{let a=Zt();const c=t.na.get(e);if(!c)return a;for(const f of c){const m=t.ea.get(f);a=a.unionWith(m.view.Ku)}return a}}function qS(n,e){return v0.apply(this,arguments)}function v0(){return(v0=(0,ue.Z)(function*(n,e){const t=Ne(n),s=yield lg(t.localStore,e.query,!0),a=e.view.Yu(s);return t.isPrimaryClient&&bg(t,e.targetId,a.Hu),a})).apply(this,arguments)}function zS(n,e){return pd.apply(this,arguments)}function pd(){return(pd=(0,ue.Z)(function*(n,e){const t=Ne(n);return hg(t.localStore,e).then(s=>fu(t,s))})).apply(this,arguments)}function CD(n,e,t,s){return $y.apply(this,arguments)}function $y(){return($y=(0,ue.Z)(function*(n,e,t,s){const a=Ne(n),c=yield function(f,m){const I=Ne(f),C=Ne(I.Bs);return I.persistence.runTransaction("Lookup mutation documents","readonly",R=>C.fn(R,m).next(M=>M?I.ci.Ks(R,M):ae.resolve(null)))}(a.localStore,e);var m;null!==c?("pending"===t?yield mf(a.remoteStore):"acknowledged"===t||"rejected"===t?(bD(a,e,s||null),g0(a,e),m=e,Ne(Ne(a.localStore).Bs)._n(m)):$e(),yield fu(a,c)):be("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Hy(){return(Hy=(0,ue.Z)(function*(n,e){const t=Ne(n);if(gd(t),md(t),!0===e&&!0!==t.ha){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield E0(t,s.toArray());t.ha=!0,yield ld(t.remoteStore,!0);for(const c of a)KE(t.remoteStore,c)}else if(!1===e&&!1!==t.ha){const s=[];let a=Promise.resolve();t.na.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(fd(t,f),ud(t.localStore,f,!0))),et(t.remoteStore,f)}),yield a,yield E0(t,s),function(c){const f=Ne(c);f.ra.forEach((m,I)=>{et(f.remoteStore,I)}),f.oa.bi(),f.ra=new Map,f.ia=new qn(Se.comparator)}(t),t.ha=!1,yield ld(t.remoteStore,!1)}})).apply(this,arguments)}function E0(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,ue.Z)(function*(n,e,t){const s=Ne(n),a=[],c=[];for(const f of e){let m;const I=s.na.get(f);if(I&&0!==I.length){m=yield cf(s.localStore,Gs(I[0]));for(const C of I){const R=s.ea.get(C),M=yield qS(s,R);M.snapshot&&c.push(M.snapshot)}}else{const C=yield dg(s.localStore,f);m=yield cf(s.localStore,C),yield gs(s,SD(C),f,!1)}a.push(m)}return s.ta.Qo(c),a})).apply(this,arguments)}function SD(n){return YI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KS(n){const e=Ne(n);return Ne(Ne(e.localStore).persistence).Fs()}function ZS(n,e,t,s){return I0.apply(this,arguments)}function I0(){return(I0=(0,ue.Z)(function*(n,e,t,s){const a=Ne(n);if(a.ha)return void be("SyncEngine","Ignoring unexpected query state notification.");const c=a.na.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const f=yield hg(a.localStore,fE(c[0])),m=mn.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fu(a,f,m);break}case"rejected":yield ud(a.localStore,e,!0),fd(a,e,s);break;default:$e()}})).apply(this,arguments)}function YS(n,e,t){return b0.apply(this,arguments)}function b0(){return(b0=(0,ue.Z)(function*(n,e,t){const s=gd(n);if(s.ha){for(const a of e){if(s.na.has(a)){be("SyncEngine","Adding an already active target "+a);continue}const c=yield dg(s.localStore,a),f=yield cf(s.localStore,c);yield gs(s,SD(c),f.targetId,!1),KE(s.remoteStore,f)}for(const a of t)s.na.has(a)&&(yield ud(s.localStore,a,!1).then(()=>{et(s.remoteStore,a),fd(s,a)}).catch(ca))}})).apply(this,arguments)}function gd(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ED.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ID.bind(null,e),e.ta.Qo=Xx.bind(null,e.eventManager),e.ta.fa=eR.bind(null,e.eventManager),e}function md(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$S.bind(null,e),e}class Gy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.M=pf(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return zb(this.persistence,new qb,e.initialUser,this.M)}wa(e){return new Jb(qE.zi,this.M)}_a(e){return new df}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Io extends Gy{constructor(e,t,s){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e),yield s.ya.initialize(s,e),yield md(s.ya.syncEngine),yield mf(s.ya.remoteStore),yield s.persistence.Ts(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}ga(e){return zb(this.persistence,new qb,e.initialUser,this.M)}ma(e){return new Kx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Hi.withCacheSize(this.cacheSizeBytes):Hi.DEFAULT;return new $E(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,hf(),ff(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new df}}class JS extends Io{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e);const a=s.ya.syncEngine;s.sharedClientState instanceof bc&&(s.sharedClientState.syncEngine={Mr:CD.bind(null,a),Or:ZS.bind(null,a),Fr:YS.bind(null,a),Fs:KS.bind(null,a),kr:zS.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ts(function(){var c=(0,ue.Z)(function*(f){yield function(n,e){return Hy.apply(this,arguments)}(s.ya.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):f||s.gcScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}_a(e){const t=hf();if(!bc.vt(t))throw new ge(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bc(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ef{initialize(e,t){var s=this;return(0,ue.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>wD(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=GS.bind(null,s.syncEngine),yield ld(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LS}createDatastore(e){const t=pf(e.databaseInfo.databaseId),s=new zE(e.databaseInfo);return new rD(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=m=>wD(this.syncEngine,m,0),f=Dc.vt()?new Dc:new AS,new ky(t,s,a,c,f);var t,s,a,c,f}createSyncEngine(e,t){return function(s,a,c,f,m,I,C){const R=new vf(s,a,c,f,m,I);return C&&(R.ha=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const s=Ne(t);be("RemoteStore","RemoteStore shutting down."),s.fu.add(5),yield Tc(s),s._u.shutdown(),s.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function AD(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rR{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new er,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(s=>{s&&s.xu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const s=e.Ea.decode(t),a=Number(s);isNaN(a)&&e.Pa(`length string (${s}) is not valid number`);const c=yield e.ba(a);return new VS(JSON.parse(c),t.length+a)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ue.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ba(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const s=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class D0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ge(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,ue.Z)(function*(c,f){const m=Ne(c),I=uu(m.M)+"/documents",C={documents:f.map(W=>Zh(m.M,W))},R=yield m.ho("BatchGetDocuments",I,C),M=new Map;R.forEach(W=>{const te=function(n,e){return"found"in e?function(t,s){at(!!s.found);const a=_o(t,s.found.name),c=br(s.found.updateTime),f=new $r({mapValue:{fields:s.found.fields}});return gn.newFoundDocument(a,c,f)}(n,e):"missing"in e?function(t,s){at(!!s.missing),at(!!s.readTime);const a=_o(t,s.missing),c=br(s.readTime);return gn.newNoDocument(a,c)}(n,e):$e()}(m.M,W);M.set(te.key.toString(),te)});const j=[];return f.forEach(W=>{const te=M.get(W.toString());at(!!te),j.push(te)}),j}),function(c,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=Se.fromPath(a);e.mutations.push(new ly(c,e.precondition(c)))}),yield(s=(0,ue.Z)(function*(a,c){const f=Ne(a),m=uu(f.M)+"/documents",I={writes:c.map(C=>Qh(f.M,C))};yield f.oo("Commit",m,I)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $e();t=Xe.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ge(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xe.min()))throw new ge(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class C0{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.Sa=5,this.Do=new Cc(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ue.Z)(function*(){const t=new D0(e.datastore),s=e.Ca(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.xa(c)}))}).catch(a=>{e.xa(a)})}))}Ca(e){try{const t=this.updateFunction(e);return!ru(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bE(t)}return!1}}class xD{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=jr.UNAUTHENTICATED,this.clientId=OI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var f=(0,ue.Z)(function*(m){be("FirestoreClient","Received user=",m.uid),yield c.authCredentialListener(m),c.user=m});return function(m){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(s,f=>(be("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Eg(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function qy(n,e){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ue.Z)(function*(c){s.isEqual(c)||(yield Kb(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function RD(n,e){return T0.apply(this,arguments)}function T0(){return(T0=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield S0(n);be("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>hD(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>hD(e.remoteStore,c)),n.onlineComponents=e})).apply(this,arguments)}function S0(n){return A0.apply(this,arguments)}function A0(){return(A0=(0,ue.Z)(function*(n){return n.offlineComponents||(be("FirestoreClient","Using default OfflineComponentProvider"),yield qy(n,new Gy)),n.offlineComponents})).apply(this,arguments)}function Cg(n){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,ue.Z)(function*(n){return n.onlineComponents||(be("FirestoreClient","Using default OnlineComponentProvider"),yield RD(n,new Ef)),n.onlineComponents})).apply(this,arguments)}function x0(n){return S0(n).then(e=>e.persistence)}function R0(n){return S0(n).then(e=>e.localStore)}function N0(n){return Cg(n).then(e=>e.remoteStore)}function zy(n){return Cg(n).then(e=>e.syncEngine)}function wf(n){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,ue.Z)(function*(n){const e=yield Cg(n),t=e.eventManager;return t.onListen=ii.bind(null,e.syncEngine),t.onUnlisten=jS.bind(null,e.syncEngine),t})).apply(this,arguments)}function PD(n,e,t={}){const s=new er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(a,c,f,m,I){const C=new Wy({next:M=>{c.enqueueAndForget(()=>u0(a,R));const j=M.docs.has(f);!j&&M.fromCache?I.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&M.fromCache&&m&&"server"===m.source?I.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(M)},error:M=>I.reject(M)}),R=new wg(Hh(f.path),C,{includeMetadataChanges:!0,Cu:!0});return a0(a,R)}(yield wf(n),n.asyncQueue,e,t,s)})),s.promise}function si(n,e,t={}){const s=new er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(a,c,f,m,I){const C=new Wy({next:M=>{c.enqueueAndForget(()=>u0(a,R)),M.fromCache&&"server"===m.source?I.reject(new ge(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(M)},error:M=>I.reject(M)}),R=new wg(f,C,{includeMetadataChanges:!0,Cu:!0});return a0(a,R)}(yield wf(n),n.asyncQueue,e,t,s)})),s.promise}const bf=new Map;function M0(n,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Zy(n,e,t,s){if(!0===e&&!0===s)throw new ge(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OD(n){if(!Se.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function P0(n){if(Se.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$e()}function Bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yy(n);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qy(n,e){if(e<=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class O0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O0({}),this._settingsFrozen=!1,e instanceof go?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(a.options.projectId)}(e))}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $x;switch(t.type){case"gapi":const s=t.client;return at(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new MI(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bf.get(e);t&&(be("ComponentProvider","Removing Datastore"),bf.delete(e),t.terminate())}(this),Promise.resolve()}}class an{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Ci{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class bo extends Ci{constructor(e,t,s){super(e,t,Hh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Se(e))}withConverter(e){return new bo(this.firestore,e,this._path)}}function kD(n,e,...t){if(n=(0,dt.m9)(n),M0("collection","path",e),n instanceof Df){const s=Ut.fromString(e,...t);return P0(s),new bo(n,null,s)}{if(!(n instanceof an||n instanceof bo))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ut.fromString(e,...t));return P0(s),new bo(n.firestore,null,s)}}function yd(n,e,...t){if(n=(0,dt.m9)(n),1===arguments.length&&(e=OI.R()),M0("doc","path",e),n instanceof Df){const s=Ut.fromString(e,...t);return OD(s),new an(n,null,new Se(s))}{if(!(n instanceof an||n instanceof bo))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ut.fromString(e,...t));return OD(s),new an(n.firestore,n instanceof bo?n.converter:null,new Se(s))}}function k0(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),(n instanceof an||n instanceof bo)&&(e instanceof an||e instanceof bo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LD(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),n instanceof Ci&&e instanceof Ci&&n.firestore===e.firestore&&Gh(n._query,e._query)&&n.converter===e.converter}class F0{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Cc(this,"async_queue_retry"),this.qa=()=>{const t=ff();t&&be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=ff();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=ff();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new er;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ue.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!_c(t))throw t;be("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(s=>{throw this.$a=s,this.Ba=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(s)),s}).then(s=>(this.Ba=!1,s))));return this.ka=t,t}enqueueAfterDelay(e,t,s){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const a=dd.createAndSchedule(this,e,t,s,c=>this.ja(c));return this.Fa.push(a),a}Ka(){this.$a&&$e()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Sg(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class nA{constructor(){this._progressObserver={},this._taskCompletionResolver=new er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends Df{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new F0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||L0(this),this._firestoreClient.terminate()}}function nr(n){return n._firestoreClient||L0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function L0(n){var e;const t=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new FT(n._databaseId,c,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var c,m;n._firestoreClient=new xD(n._authCredentials,n._appCheckCredentials,n._queue,s)}function UD(n,e,t){const s=new er;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield qy(n,t),yield RD(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===ie.FAILED_PRECONDITION||c.code===ie.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var c})).then(()=>s.promise)}function GD(n){if(n._initialized||n._terminated)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gu(Ir.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gu(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cf{constructor(e){this._methodName=e}}class V0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const oR=/^__.*__$/;class aR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new qh(e,this.data,t,this.fieldTransforms)}}class dA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e()}}class U0{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.M=s,this.ignoreUndefinedProperties=a,void 0===c&&this.Ya(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new U0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Za({path:s,ec:!1});return a.nc(e),a}sc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Za({path:s,ec:!1});return a.Ya(),a}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return q0(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(hA(this.Xa)&&oR.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class uR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=s||pf(e)}ac(e,t,s,a=!1){return new U0({Xa:e,methodName:t,uc:s,path:fr.emptyPath(),ec:!1,oc:a},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Tf(n){const e=n._freezeSettings(),t=pf(n._databaseId);return new uR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function B0(n,e,t,s,a,c={}){const f=n.ac(c.merge||c.mergeFields?2:0,e,t,a);H0("Data must be an object, but it was:",f,s);const m=pA(s,f);let I,C;if(c.merge)I=new jl(f.fieldMask),C=f.fieldTransforms;else if(c.mergeFields){const R=[];for(const M of c.mergeFields){const j=G0(e,M,t);if(!f.contains(j))throw new ge(ie.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);yA(R,j)||R.push(j)}I=new jl(R),C=f.fieldTransforms.filter(M=>I.covers(M.field))}else I=null,C=f.fieldTransforms;return new aR(new $r(m),I,C)}class Xy extends Cf{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xy}}function fA(n,e,t){return new U0({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class WD extends Cf{_toFieldTransform(e){return new Xp(e.path,new Yl)}isEqual(e){return e instanceof WD}}class cR extends Cf{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=fA(this,e,!0),s=this.cc.map(c=>Sf(c,t)),a=new Ql(s);return new Xp(e.path,a)}isEqual(e){return this===e}}class lR extends Cf{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=fA(this,e,!0),s=this.cc.map(c=>Sf(c,t)),a=new Jl(s);return new Xp(e.path,a)}isEqual(e){return this===e}}class dR extends Cf{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Wh(e.M,yE(e.M,this.hc));return new Xp(e.path,t)}isEqual(e){return this===e}}function j0(n,e,t,s){const a=n.ac(1,e,t);H0("Data must be an object, but it was:",a,s);const c=[],f=$r.empty();Bl(s,(I,C)=>{const R=W0(e,I,t);C=(0,dt.m9)(C);const M=a.sc(R);if(C instanceof Xy)c.push(R);else{const j=Sf(C,M);null!=j&&(c.push(R),f.set(R,j))}});const m=new jl(c);return new dA(f,m,a.fieldTransforms)}function $0(n,e,t,s,a,c){const f=n.ac(1,e,t),m=[G0(e,s,t)],I=[a];if(c.length%2!=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<c.length;j+=2)m.push(G0(e,c[j])),I.push(c[j+1]);const C=[],R=$r.empty();for(let j=m.length-1;j>=0;--j)if(!yA(C,m[j])){const W=m[j];let te=I[j];te=(0,dt.m9)(te);const we=f.sc(W);if(te instanceof Xy)C.push(W);else{const Re=Sf(te,we);null!=Re&&(C.push(W),R.set(W,Re))}}const M=new jl(C);return new dA(R,M,f.fieldTransforms)}function qD(n,e,t,s=!1){return Sf(t,n.ac(s?4:3,e))}function Sf(n,e){if(gA(n=(0,dt.m9)(n)))return H0("Unsupported field value:",e,n),pA(n,e);if(n instanceof Cf)return function(t,s){if(!hA(s.Xa))throw s.rc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.rc(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const f of t){let m=Sf(f,s.ic(c));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,dt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yE(s.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Un.fromDate(t);return{timestampValue:au(s.M,a)}}if(t instanceof Un){const a=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:au(s.M,a)}}if(t instanceof V0)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gu)return{bytesValue:cb(s.M,t._byteString)};if(t instanceof an){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s.rc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Kh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.rc(`Unsupported field value: ${Yy(t)}`)}(n,e)}function pA(n,e){const t={};return LI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(n,(s,a)=>{const c=Sf(a,e.tc(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function gA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof V0||n instanceof gu||n instanceof an||n instanceof Cf)}function H0(n,e,t){if(!gA(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Yy(t);throw e.rc("an object"===s?n+" a custom object":n+" "+s)}var s}function G0(n,e,t){if((e=(0,dt.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return W0(n,e);throw q0("Field path arguments must be of type string or ",n,!1,void 0,t)}const mA=new RegExp("[~\\*/\\[\\]]");function W0(n,e,t){if(e.search(mA)>=0)throw q0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch(s){throw q0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function q0(n,e,t,s,a){const c=s&&!s.isEmpty(),f=void 0!==a;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let I="";return(c||f)&&(I+=" (found",c&&(I+=` in field ${s}`),f&&(I+=` in document ${a}`),I+=")"),new ge(ie.INVALID_ARGUMENT,m+n+I)}function yA(n,e){return n.some(t=>t.isEqual(e))}class e_{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(z0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _A extends e_{data(){return super.data()}}function z0(n,e){return"string"==typeof e?W0(n,e):e instanceof pu?e._internalPath:e._delegate._internalPath}class _d{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Do extends e_{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(z0("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class da extends Do{data(e={}){return super.data(e)}}class mu{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new _d(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new da(this._firestore,this._userDataWriter,s.key,s,new _d(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new da(s._firestore,s._userDataWriter,f.doc.key,f.doc,new _d(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const m=new da(s._firestore,s._userDataWriter,f.doc.key,f.doc,new _d(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let I=-1,C=-1;return 0!==f.type&&(I=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),C=c.indexOf(f.doc.key)),{type:vA(f.type),doc:m,oldIndex:I,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e()}}function zD(n,e){return n instanceof Do&&e instanceof Do?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mu&&e instanceof mu&&n._firestore===e._firestore&&LD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function t_(n){if(sy(n)&&0===n.explicitOrderBy.length)throw new ge(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Af{}function yu(n,...e){for(const t of e)n=t._apply(n);return n}class KD extends Af{constructor(e,t,s){super(),this.lc=e,this.fc=t,this.dc=s,this.type="where"}_apply(e){const t=Tf(e.firestore),s=function(a,c,f,m,I,C,R){let M;if(I.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){YD(R,C);const W=[];for(const te of R)W.push(r_(m,a,te));M={arrayValue:{values:W}}}else M=r_(m,a,R)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||YD(R,C),M=qD(f,"where",R,"in"===C||"not-in"===C);const j=Hr.create(I,C,M);return function(W,te){if(te.S()){const Re=Kl(W);if(null!==Re&&!Re.isEqual(te.field))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${te.field.toString()}'`);const wt=Yp(W);null!==wt&&DA(0,te.field,wt)}const we=function(Re,wt){for(const It of Re.filters)if(wt.indexOf(It.op)>=0)return It.op;return null}(W,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==we)throw new ge(ie.INVALID_ARGUMENT,we===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${we.toString()}' filters.`)}(a,j),j}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ci(e.firestore,e.converter,function(a,c){const f=a.filters.concat([c]);return new oa(a.path,a.collectionGroup,a.explicitOrderBy.slice(),f,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class ZD extends Af{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new bi(a,c);return function(m,I){if(null===Yp(m)){const C=Kl(m);null!==C&&DA(0,C,I.field)}}(s,f),f}(e._query,this.lc,this._c);return new Ci(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new oa(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class K0 extends Af{constructor(e,t,s){super(),this.type=e,this.wc=t,this.mc=s}_apply(e){return new Ci(e.firestore,e.converter,dE(e._query,this.wc,this.mc))}}class EA extends Af{constructor(e,t,s){super(),this.type=e,this.gc=t,this.yc=s}_apply(e){const t=bA(e,this.type,this.gc,this.yc);return new Ci(e.firestore,e.converter,(a=t,new oa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Ag extends Af{constructor(e,t,s){super(),this.type=e,this.gc=t,this.yc=s}_apply(e){const t=bA(e,this.type,this.gc,this.yc);return new Ci(e.firestore,e.converter,(a=t,new oa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function bA(n,e,t,s){if(t[0]=(0,dt.m9)(t[0]),t[0]instanceof e_)return function(a,c,f,m,I){if(!m)throw new ge(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const C=[];for(const R of Zl(a))if(R.field.isKeyField())C.push(Wl(c,m.key));else{const M=m.data.field(R.field);if(eE(M))throw new ge(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const j=R.field.canonicalString();throw new ge(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}C.push(M)}return new pc(C,I)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Tf(n.firestore);return function(c,f,m,I,C,R){const M=c.explicitOrderBy;if(C.length>M.length)throw new ge(ie.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let W=0;W<C.length;W++){const te=C[W];if(M[W].field.isKeyField()){if("string"!=typeof te)throw new ge(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof te}`);if(!lE(c)&&-1!==te.indexOf("/"))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${te}' contains a slash.`);const we=c.path.child(Ut.fromString(te));if(!Se.isDocumentKey(we))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Re=new Se(we);j.push(Wl(f,Re))}else{const we=qD(m,I,te);j.push(we)}}return new pc(j,R)}(n._query,n.firestore._databaseId,a,e,t,s)}}function r_(n,e,t){if("string"==typeof(t=(0,dt.m9)(t))){if(""===t)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lE(e)&&-1!==t.indexOf("/"))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ut.fromString(t));if(!Se.isDocumentKey(s))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wl(n,new Se(s))}if(t instanceof an)return Wl(n,t._key);throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yy(t)}.`)}function YD(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DA(n,e,t){if(!t.isEqual(e))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QD{convertValue(e,t="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $e()}}convertObject(e,t){const s={};return Bl(e.fields,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new V0(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Qm(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const t=dc(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ut.fromString(e);at(Eb(s));const a=new go(s.get(1),s.get(3)),c=new Se(s.popFirst(5));return a.isEqual(t)||Hn(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function i_(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class yR extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}class Z0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tf(e)}set(e,t,s){this._verifyNotCommitted();const a=xc(e,this._firestore),c=i_(a.converter,t,s),f=B0(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,tr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=xc(e,this._firestore);let f;return f="string"==typeof(t=(0,dt.m9)(t))||t instanceof pu?$0(this._dataReader,"WriteBatch.update",c._key,t,s,a):j0(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xc(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xc(n,e){if((n=(0,dt.m9)(n)).firestore!==e)throw new ge(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xf extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function s_(n,e,t){n=Bt(n,an);const s=Bt(n.firestore,In),a=i_(n.converter,e,t);return Rf(s,[B0(Tf(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,tr.none())])}function JD(n,e,t,...s){n=Bt(n,an);const a=Bt(n.firestore,In),c=Tf(a);let f;return f="string"==typeof(e=(0,dt.m9)(e))||e instanceof pu?$0(c,"updateDoc",n._key,e,t,s):j0(c,"updateDoc",n._key,e),Rf(a,[f.toMutation(n._key,tr.exists(!0))])}function o_(n,...e){var t,s,a;n=(0,dt.m9)(n);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||Sg(e[f])||(c=e[f],f++);const m={includeMetadataChanges:c.includeMetadataChanges};if(Sg(e[f])){const M=e[f];e[f]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[f+1]=null===(s=M.error)||void 0===s?void 0:s.bind(M),e[f+2]=null===(a=M.complete)||void 0===a?void 0:a.bind(M)}let I,C,R;if(n instanceof an)C=Bt(n.firestore,In),R=Hh(n._key.path),I={next:M=>{e[f]&&e[f](Rg(C,n,M))},error:e[f+1],complete:e[f+2]};else{const M=Bt(n,Ci);C=Bt(M.firestore,In),R=M._query;const j=new xf(C);I={next:W=>{e[f]&&e[f](new mu(C,j,M,W))},error:e[f+1],complete:e[f+2]},t_(n._query)}return function(M,j,W,te){const we=new Wy(te),Re=new wg(j,we,W);return M.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return a0(yield wf(M),Re)})),()=>{we.Ia(),M.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return u0(yield wf(M),Re)}))}}(nr(C),R,m,I)}function Rf(n,e){return function(t,s){const a=new er;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(n,e,t){return By.apply(this,arguments)}(yield zy(t),s,a)})),a.promise}(nr(n),e)}function Rg(n,e,t){const s=t.docs.get(e._key),a=new xf(n);return new Do(n,a,e._key,s,new _d(t.hasPendingWrites,t.fromCache),e.converter)}class XD extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tf(e)}get(e){const t=xc(e,this._firestore),s=new yR(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return $e();const c=a[0];if(c.isFoundDocument())return new e_(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new e_(this._firestore,s,t._key,null,t.converter);throw $e()})}set(e,t,s){const a=xc(e,this._firestore),c=i_(a.converter,t,s),f=B0(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const c=xc(e,this._firestore);let f;return f="string"==typeof(t=(0,dt.m9)(t))||t instanceof pu?$0(this._dataReader,"Transaction.update",c._key,t,s,a):j0(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=xc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xc(e,this._firestore),s=new xf(this._firestore);return super.get(e).then(a=>new Do(this._firestore,s,t._key,a._document,new _d(!1,!1),t.converter))}}function ys(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function iC(){if("undefined"==typeof Uint8Array)throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function FA(){if("undefined"==typeof atob)throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ul=rc.SDK_VERSION,(0,rc._registerComponent)(new bm.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),c=new In(a,new Gx(t.getProvider("auth-internal")),new OT(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC")),(0,rc.registerVersion)(Yv,"3.4.8",n),(0,rc.registerVersion)(Yv,"3.4.8","esm2017")}();class Ng{constructor(e){this._delegate=e}static fromBase64String(e){return FA(),new Ng(gu.fromBase64String(e))}static fromUint8Array(e){return iC(),new Ng(gu.fromUint8Array(e))}toBase64(){return FA(),this._delegate.toBase64()}toUint8Array(){return iC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sC(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class VA{enableIndexedDbPersistence(e,t){return function(n,e){GD(n=Bt(n,In));const t=nr(n),s=n._freezeSettings(),a=new Ef;return UD(t,a,new Io(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){GD(n=Bt(n,In));const e=nr(n),t=n._freezeSettings(),s=new Ef;return UD(e,s,new JS(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ge(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(s){if(!vo.vt())return Promise.resolve();const a=s+"main";yield vo.delete(a)}),function(s){return t.apply(this,arguments)})(Ay(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oC{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof go||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ym("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const c=(n=Bt(n,Df))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Ym("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let f,m;if("string"==typeof s.mockUserToken)f=s.mockUserToken,m=jr.MOCK_USER;else{f=(0,dt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new jr(I)}n._authCredentials=new Hx(new NI(f,m))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield x0(n),t=yield N0(n);return e.setNetworkEnabled(!0),function(s){const a=Ne(s);return a.fu.delete(0),mg(a)}(t)}))}(nr(n=Bt(n,In)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield x0(n),t=yield N0(n);return e.setNetworkEnabled(!1),(s=(0,ue.Z)(function*(a){const c=Ne(a);c.fu.add(0),yield Tc(c),c.wu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(nr(n=Bt(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Zy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new er;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(n,e){return jy.apply(this,arguments)}(yield zy(e),t)})),t.promise}(nr(n=Bt(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Wy(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield wf(n),a=t,Ne(s).Eu.add(a),void a.next();var s,a})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield wf(n),a=t,void Ne(s).Eu.delete(a);var s,a}))}}(nr(n=Bt(n,In)),Sg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rc(this,kD(this._delegate,e))}catch(t){throw Ti(t,"collection()","Firestore.collection()")}}doc(e){try{return new _s(this,yd(this._delegate,e))}catch(t){throw Ti(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Si(this,function(n,e){if(n=Bt(n,Df),M0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ci(n,null,(t=e,new oa(Ut.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ti(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const s=yield(a=n,Cg(a).then(c=>c.datastore));var a;new C0(n.asyncQueue,s,e,t).run()})),t.promise}(nr(n=Bt(n,In)),t=>e(new XD(n,t)))}(this._delegate,t=>e(new X0(this,t)))}batch(){return nr(this._delegate),new aC(new Z0(this._delegate,e=>Rf(this._delegate,e)))}loadBundle(e){return function(n,e){const t=nr(n=Bt(n,In)),s=new nA;return function(n,e,t,s){const a=function(c,f){let m;return m="string"==typeof c?(new TextEncoder).encode(c):c,I=function(I,C){if(I instanceof Uint8Array)return AD(I,C);if(I instanceof ArrayBuffer)return AD(new Uint8Array(I),C);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new rR(I,f);var I}(t,pf(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function(n,e,t){const s=Ne(n);var a;(a=(0,ue.Z)(function*(c,f,m){try{const I=yield f.getMetadata();if(yield function(j,W){const te=Ne(j),we=br(W.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Re=>te._s.getBundleMetadata(Re,W.id)).then(Re=>!!Re&&Re.createTime.compareTo(we)>=0)}(c.localStore,I))return yield f.close(),m._completeWith({taskState:"Success",documentsLoaded:(j=I).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);m._updateProgress(mD(I));const C=new US(I,c.localStore,f.M);let R=yield f.da();for(;R;){const j=yield C.ku(R);j&&m._updateProgress(j),R=yield f.da()}const M=yield C.complete();return yield fu(c,M.Fu,void 0),yield function(j,W){const te=Ne(j);return te.persistence.runTransaction("Save bundle","readwrite",we=>te._s.saveBundleMetadata(we,W))}(c.localStore,I),m._completeWith(M.progress),Promise.resolve(M.Ou)}catch(I){return Ym("SyncEngine",`Loading bundle failed with ${I}`),m._failWith(I),Promise.resolve(new Set)}var j}),function(c,f,m){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield zy(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,s){const a=Ne(t);return a.persistence.runTransaction("Get named query","readonly",c=>a._s.getNamedQuery(c,s))}(yield R0(n),e)}))}(nr(n=Bt(n,In)),e).then(t=>t?new Ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Si(this,t):null)}}class J0 extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ng(new gu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _s.forKey(t,this.firestore,null)}}class X0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new J0(e)}get(e){const t=Nc(e);return this._delegate.get(t).then(s=>new Nf(this._firestore,new Do(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Nc(e);return s?(ys("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=Nc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=Nc(e);return this._delegate.delete(t),this}}class aC{constructor(e){this._delegate=e}set(e,t,s){const a=Nc(e);return s?(ys("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=Nc(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=Nc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vd{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new da(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mg(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=vd.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let c=a.get(t);return c||(c=new vd(e,new J0(e),t),a.set(t,c)),c}}vd.INSTANCES=new WeakMap;class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new J0(e)}static forPath(e,t,s){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _s(t,new an(t._delegate,s,new Se(e)))}static forKey(e,t,s){return new _s(t,new an(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rc(this.firestore,kD(this._delegate,e))}catch(t){throw Ti(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dt.m9)(e))instanceof an&&k0(this._delegate,e)}set(e,t){t=ys("DocumentReference.set",t);try{return t?s_(this._delegate,e,t):s_(this._delegate,e)}catch(s){throw Ti(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?JD(this._delegate,e):JD(this._delegate,e,t,...s)}catch(a){throw Ti(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Rf(Bt(n.firestore,In),[new zh(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=BA(e),s=ew(e,a=>new Nf(this.firestore,new Do(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return o_(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Bt(n,an);const e=Bt(n.firestore,In),t=nr(e),s=new xf(e);return function(n,e){const t=new er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(a,c,f){try{const m=yield function(I,C){const R=Ne(I);return R.persistence.runTransaction("read document","readonly",M=>R.ci.Ls(M,C))}(a,c);m.isFoundDocument()?f.resolve(m):m.isNoDocument()?f.resolve(null):f.reject(new ge(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const I=Eg(m,`Failed to get document '${c} from cache`);f.reject(I)}}),function(a,c,f){return s.apply(this,arguments)})(yield R0(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Do(e,s,n._key,a,new _d(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Bt(n,an);const e=Bt(n.firestore,In);return PD(nr(e),n._key,{source:"server"}).then(t=>Rg(e,n,t))}(this._delegate):function(n){n=Bt(n,an);const e=Bt(n.firestore,In);return PD(nr(e),n._key).then(t=>Rg(e,n,t))}(this._delegate),t.then(s=>new Nf(this.firestore,new Do(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function Ti(n,e,t){return n.message=n.message.replace(e,t),n}function BA(n){for(const e of n)if("object"==typeof e&&!sC(e))return e;return{}}function ew(n,e){var t,s;let a;return a=sC(n[0])?n[0]:sC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Nf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _s(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zD(this._delegate,e._delegate)}}class Mg extends Nf{data(e){const t=this._delegate.data(e);return function(n,e){n||$e()}(void 0!==t),t}}class Si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new J0(e)}where(e,t,s){try{return new Si(this.firestore,yu(this._delegate,function(n,e,t){const s=e,a=z0("where",n);return new KD(a,s,t)}(e,t,s)))}catch(a){throw Ti(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Si(this.firestore,yu(this._delegate,function(n,e="asc"){const t=e,s=z0("orderBy",n);return new ZD(s,t)}(e,t)))}catch(s){throw Ti(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Si(this.firestore,yu(this._delegate,function(n){return Qy("limit",n),new K0("limit",n,"F")}(e)))}catch(t){throw Ti(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Si(this.firestore,yu(this._delegate,function(n){return Qy("limitToLast",n),new K0("limitToLast",n,"L")}(e)))}catch(t){throw Ti(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Si(this.firestore,yu(this._delegate,function(...n){return new EA("startAt",n,!0)}(...e)))}catch(t){throw Ti(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Si(this.firestore,yu(this._delegate,function(...n){return new EA("startAfter",n,!1)}(...e)))}catch(t){throw Ti(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Si(this.firestore,yu(this._delegate,function(...n){return new Ag("endBefore",n,!1)}(...e)))}catch(t){throw Ti(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Si(this.firestore,yu(this._delegate,function(...n){return new Ag("endAt",n,!0)}(...e)))}catch(t){throw Ti(t,"endAt()","Query.endAt()")}}isEqual(e){return LD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Bt(n,Ci);const e=Bt(n.firestore,In),t=nr(e),s=new xf(e);return function(n,e){const t=new er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(a,c,f){try{const m=yield lg(a,c,!0),I=new l0(c,m.li),C=I.Gu(m.documents),R=I.applyChanges(C,!1);f.resolve(R.snapshot)}catch(m){const I=Eg(m,`Failed to execute query '${c} against cache`);f.reject(I)}}),function(a,c,f){return s.apply(this,arguments)})(yield R0(n),e,t);var s})),t.promise}(t,n._query).then(a=>new mu(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Bt(n,Ci);const e=Bt(n.firestore,In),t=nr(e),s=new xf(e);return si(t,n._query,{source:"server"}).then(a=>new mu(e,s,n,a))}(this._delegate):function(n){n=Bt(n,Ci);const e=Bt(n.firestore,In),t=nr(e),s=new xf(e);return t_(n._query),si(t,n._query).then(a=>new mu(e,s,n,a))}(this._delegate),t.then(s=>new Ed(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=BA(e),s=ew(e,a=>new Ed(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return o_(this._delegate,t,s)}withConverter(e){return new Si(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}class uC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ed{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Mg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uC(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Mg(this._firestore,s))})}isEqual(e){return zD(this._delegate,e._delegate)}}class Rc extends Si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _s(this.firestore,e):null}doc(e){try{return new _s(this.firestore,void 0===e?yd(this._delegate):yd(this._delegate,e))}catch(t){throw Ti(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Bt(n.firestore,In),s=yd(n),a=i_(n.converter,e);return Rf(t,[B0(Tf(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,tr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new _s(this.firestore,t))}isEqual(e){return k0(this._delegate,e._delegate)}withConverter(e){return new Rc(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function Nc(n){return Bt(n,an)}class tw{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new tw(fr.keyField().canonicalString())}isEqual(e){return(e=(0,dt.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class wd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new WD("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new wd(e)}static delete(){const e=new Xy("deleteField");return e._methodName="FieldValue.delete",new wd(e)}static arrayUnion(...e){const t=function(...n){return new cR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wd(t)}static arrayRemove(...e){const t=function(...n){return new lR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wd(t)}static increment(e){const t=function(n){return new dR("increment",n)}(e);return t._methodName="FieldValue.increment",new wd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vR={Firestore:oC,GeoPoint:V0,Timestamp:Un,Blob:Ng,Transaction:X0,WriteBatch:aC,DocumentReference:_s,DocumentSnapshot:Nf,Query:Si,QueryDocumentSnapshot:Mg,QuerySnapshot:Ed,CollectionReference:Rc,FieldPath:tw,FieldValue:wd,setLogLevel:function(n){!function(n){lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new bm.wA("firestore-compat",t=>((e,t)=>new oC(e,t,new VA))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},vR)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Im.Z);var cC=k(6682),Mf=k(309),jA=k(7771),$A=k(8858);class HA extends ss.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new GA(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=s.length;let f;if(this.closed)throw new os.N;if(this.isStopped||this.hasError?f=Kg.w.EMPTY:(this.observers.push(e),f=new $A.W(this,e)),a&&e.add(e=new Mf.ht(e,a)),t)for(let m=0;m<c&&!e.closed;m++)e.next(s[m]);else for(let m=0;m<c&&!e.closed;m++)e.next(s[m].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),f}_getNow(){return(this.scheduler||jA.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,c=a.length;let f=0;for(;f<c&&!(e-a[f].time<s);)f++;return c>t&&(f=Math.max(f,c-t)),f>0&&a.splice(0,f),a}}class GA{constructor(e,t){this.time=e,this.value=t}}function nw(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,f,c=0,m=!1,I=!1;return function(R){let M;c++,!a||m?(m=!1,a=new HA(n,e,s),M=a.subscribe(this),f=R.subscribe({next(j){a.next(j)},error(j){m=!0,a.error(j)},complete(){I=!0,f=void 0,a.complete()}}),I&&(f=void 0)):M=a.subscribe(this),this.add(()=>{c--,M.unsubscribe(),M=void 0,f&&!I&&t&&0===c&&(f.unsubscribe(),f=void 0,a=void 0)})}}(s))}function WA(n,e){return e?Vn(()=>n,e):Vn(()=>n)}var rw=k(3101);k(2329);const aw=new Map,Cr={activated:!1,tokenObservers:[]},SR={initialized:!1,enabled:!1};function Tr(n){return aw.get(n)||Cr}function Co(n,e){aw.set(n,e)}function uw(){return SR}class JA{constructor(e,t,s,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ue.Z)(function*(){t.stop();try{t.pending=new dt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new dt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ai=new dt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gC(n){if(!Tr(n).activated)throw Ai.create("use-before-activation",{appName:n.name})}function mC(n,e){return hw.apply(this,arguments)}function hw(){return(hw=(0,ue.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const M=yield a.getHeartbeatsHeader();M&&(s["X-Firebase-Client"]=M)}const c={method:"POST",body:JSON.stringify(e),headers:s};let f,m;try{f=yield fetch(n,c)}catch(M){throw Ai.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==f.status)throw Ai.create("fetch-status-error",{httpStatus:f.status});try{m=yield f.json()}catch(M){throw Ai.create("fetch-parse-error",{originalErrorMessage:M.message})}const I=m.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(I[1]),R=Date.now();return{token:m.token,expireTimeMillis:R+C,issuedAtTimeMillis:R}})).apply(this,arguments)}function ix(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Pg="firebase-app-check-store";let u_=null;function _C(){return u_||(u_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(Ai.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Pg,{keyPath:"compositeKey"})}}}catch(t){e(Ai.create("storage-open",{originalErrorMessage:t.message}))}}),u_)}function c_(){return(c_=(0,ue.Z)(function*(n,e){const s=(yield _C()).transaction(Pg,"readwrite"),c=s.objectStore(Pg).put({compositeKey:n,value:e});return new Promise((f,m)=>{c.onsuccess=I=>{f()},s.onerror=I=>{var C;m(Ai.create("storage-set",{originalErrorMessage:null===(C=I.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const l_=new Xo.Yd("@firebase/app-check");function vC(n,e){return(0,dt.hl)()?function(n,e){return function(n,e){return c_.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{l_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hx(){return uw().enabled}function EC(){return gw.apply(this,arguments)}function gw(){return(gw=(0,ue.Z)(function*(){const n=uw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const So={error:"UNKNOWN_ERROR"};function MR(n){return dt.US.encodeString(JSON.stringify(n),!1)}function kg(n){return mw.apply(this,arguments)}function mw(){return(mw=(0,ue.Z)(function*(n,e=!1){const t=n.app;gC(t);const s=Tr(t);let c,a=s.token;if(!a){const I=yield s.cachedTokenPromise;I&&Ff(I)&&(a=I)}if(!e&&a&&Ff(a))return{token:a.token};let m,f=!1;if(hx()){s.exchangeTokenPromise||(s.exchangeTokenPromise=mC(ix(t,yield EC()),n.heartbeatServiceProvider).then(C=>(s.exchangeTokenPromise=void 0,C)),f=!0);const I=yield s.exchangeTokenPromise;return yield vC(t,I),Co(t,Object.assign(Object.assign({},s),{token:I})),{token:I.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(I=>(s.exchangeTokenPromise=void 0,I)),f=!0),a=yield s.exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?l_.warn(I.message):l_.error(I),c=I}return a?(m={token:a.token},Co(t,Object.assign(Object.assign({},s),{token:a})),yield vC(t,a)):m=p_(c),f&&f_(t,m),m})).apply(this,arguments)}function h_(n,e){const t=Tr(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Co(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function yw(n){const{app:e}=n,t=Tr(e);let s=t.tokenRefresher;s||(s=function(n){const{app:e}=n;return new JA((0,ue.Z)(function*(){let s;if(s=Tr(e).token?yield kg(n,!0):yield kg(n),s.error)throw s.error}),()=>!0,()=>{const t=Tr(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),Co(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function f_(n,e){const t=Tr(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function Ff(n){return n.expireTimeMillis-Date.now()>0}function p_(n){return{token:MR(So),error:n}}class g_{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)h_(this.app,t.next);return Promise.resolve()}}const Vf="app-check-internal";(0,rc._registerComponent)(new bm.wA("app-check",n=>function(n,e){return new g_(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Vf).initialize()})),(0,rc._registerComponent)(new bm.wA(Vf,n=>function(n){return{getToken:e=>kg(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,c=Tr(a),f={next:t,error:s,type:e};if(Co(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]})),c.token&&Ff(c.token)){const m=c.token;Promise.resolve().then(()=>{t({token:m.token}),yw(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>yw(n))}(n,"INTERNAL",e),removeTokenListener:e=>h_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rc.registerVersion)("@firebase/app-check","0.5.7");class bw{constructor(){return(0,Er.vb)("app-check")}}"undefined"!=typeof window&&window;var Tw=k(7841);const Sw=new E.OlP("angularfire2.auth.use-emulator"),Aw=new E.OlP("angularfire2.auth.settings"),E_=new E.OlP("angularfire2.auth.tenant-id"),MC=new E.OlP("angularfire2.auth.langugage-code"),PC=new E.OlP("angularfire2.auth.use-device-language"),xw=new E.OlP("angularfire.auth.persistence"),Oc=(n,e,t,s,a,c,f,m)=>(0,Us.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),s&&(I.tenantId=s),I.languageCode=a,c&&I.useDeviceLanguage(),f)for(const[C,R]of Object.entries(f))I.settings[C]=R;return m&&I.setPersistence(m),I},[t,s,a,c,f,m]);let Vg=(()=>{class n{constructor(t,s,a,c,f,m,I,C,R,M,j,W){const te=new ss.xQ,we=(0,ze.of)(void 0).pipe((0,Mf.QV)(f.outsideAngular),Vn(()=>c.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,3259)))),(0,gt.U)(()=>(0,Us.on)(t,c,s)),(0,gt.U)(Re=>Oc(Re,c,m,C,R,M,I,j)),nw({bufferSize:1,refCount:!1}));if(ma(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ze.of)(null);else{we.pipe(ki()).subscribe();const wt=we.pipe(Vn(nt=>nt.getRedirectResult().then(Tt=>Tt,()=>null)),Er.iC,nw({bufferSize:1,refCount:!1})),It=we.pipe(Vn(nt=>new ur.y(Tt=>({unsubscribe:c.runOutsideAngular(()=>nt.onAuthStateChanged(Xt=>Tt.next(Xt),Xt=>Tt.error(Xt),()=>Tt.complete()))})))),ft=we.pipe(Vn(nt=>new ur.y(Tt=>({unsubscribe:c.runOutsideAngular(()=>nt.onIdTokenChanged(Xt=>Tt.next(Xt),Xt=>Tt.error(Xt),()=>Tt.complete()))}))));this.authState=wt.pipe(WA(It),(0,rw.R)(f.outsideAngular),(0,Mf.QV)(f.insideAngular)),this.user=wt.pipe(WA(ft),(0,rw.R)(f.outsideAngular),(0,Mf.QV)(f.insideAngular)),this.idToken=this.user.pipe(Vn(nt=>nt?(0,Ot.D)(nt.getIdToken()):(0,ze.of)(null))),this.idTokenResult=this.user.pipe(Vn(nt=>nt?(0,Ot.D)(nt.getIdTokenResult()):(0,ze.of)(null))),this.credential=(0,cC.T)(wt,te,this.authState.pipe(Zr(nt=>!nt))).pipe((0,gt.U)(nt=>(null==nt?void 0:nt.user)?nt:null),(0,rw.R)(f.outsideAngular),(0,Mf.QV)(f.insideAngular))}return(0,Us.pX)(this,we,c,{spy:{apply:(Re,wt,It)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&It.then(ft=>te.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Us.Dh),E.LFG(Us.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Er.HU),E.LFG(Sw,8),E.LFG(Aw,8),E.LFG(E_,8),E.LFG(MC,8),E.LFG(PC,8),E.LFG(xw,8),E.LFG(bw,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Dx=(()=>{class n{constructor(){Tw.Z.registerVersion("angularfire",Er.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[Vg]}),n})();function Tx(n,e){return function(n,e=zC.z){return new ur.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function OC(n,e){return Tx(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function Rw(n,e){return OC(n,e).pipe(us(void 0),ev(),(0,gt.U)(([t,s])=>{const a=s.payload.docChanges(),c=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,m)=>{const I=a.find(R=>R.doc.ref.isEqual(f.ref)),C=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(f.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(f.metadata)||!I&&C&&JSON.stringify(C.metadata)===JSON.stringify(f.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:f}})}),c}))}function kC(n,e,t){return Rw(n,t).pipe(Ho((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FC(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(c=>c.payload),e),[]),t=>t.lift(new YC(void 0,void 0)),(0,gt.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function FC(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Ax(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class xx{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Rw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(us(void 0),ev(),Zr(([s,a])=>a.length>0||!s),(0,gt.U)(([s,a])=>a),Er.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ax(e);return kC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return OC(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Er.iC)}get(e){return(0,Ot.D)(this.query.get(e)).pipe(Er.iC)}add(e){return this.ref.add(e)}doc(e){return new LC(this.ref.doc(e),this.afs)}}class LC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:c}=i(s,t);return new xx(a,c,this.afs)}snapshotChanges(){return function(n,e){return Tx(n,e).pipe(us(void 0),ev(),(0,gt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ot.D)(this.ref.get(e)).pipe(Er.iC)}}class $R{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Rw(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),Zr(t=>t.length>0),Er.iC):Rw(this.query,this.afs.schedulers.outsideAngular).pipe(Er.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Ax(e);return kC(this.query,t,this.afs.schedulers.outsideAngular).pipe(Er.iC)}valueChanges(e={}){return OC(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Er.iC)}get(e){return(0,Ot.D)(this.query.get(e)).pipe(Er.iC)}}const Rx=new E.OlP("angularfire2.enableFirestorePersistence"),Nx=new E.OlP("angularfire2.firestore.persistenceSettings"),HR=new E.OlP("angularfire2.firestore.settings"),r=new E.OlP("angularfire2.firestore.use-emulator");function i(n,e=(t=>t)){return{query:e(n),ref:n}}let o=(()=>{class n{constructor(t,s,a,c,f,m,I,C,R,M,j,W,te,we,Re,wt,It){this.schedulers=I;const ft=(0,Us.on)(t,m,s),nt=R;M&&Oc(ft,m,j,te,we,Re,W,wt),[this.firestore,this.persistenceEnabled$]=(0,Us.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Tt=m.runOutsideAngular(()=>ft.firestore());if(c&&Tt.settings(c),nt&&Tt.useEmulator(...nt),a&&!ma(f)){const Xt=()=>{try{return(0,Ot.D)(Tt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Wi){return"undefined"!=typeof console&&console.warn(Wi),(0,ze.of)(!1)}};return[Tt,m.runOutsideAngular(Xt)]}return[Tt,(0,ze.of)(!1)]},[c,nt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:f}=i(a,s),m=this.schedulers.ngZone.run(()=>c);return new xx(m,f,this)}collectionGroup(t,s){const a=s||(f=>f),c=this.firestore.collectionGroup(t);return new $R(a(c),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new LC(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(Us.Dh),E.LFG(Us.xv,8),E.LFG(Rx,8),E.LFG(HR,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Er.HU),E.LFG(Nx,8),E.LFG(r,8),E.LFG(Vg,8),E.LFG(Sw,8),E.LFG(Aw,8),E.LFG(E_,8),E.LFG(MC,8),E.LFG(PC,8),E.LFG(xw,8),E.LFG(bw,8))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u=(()=>{class n{constructor(){Tw.Z.registerVersion("angularfire",Er.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Rx,useValue:!0},{provide:Nx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n}),n.\u0275inj=E.cJS({providers:[o]}),n})(),l=(()=>{class n{constructor(t){this.angularFirestore=t}getIdGenerated(){return this.angularFirestore.collection("participantes").snapshotChanges()}getIdGeneratedById(t){return this.angularFirestore.collection("participantes").doc(t).valueChanges()}createIdGenerated(t){return new Promise((s,a)=>{this.angularFirestore.collection("participantes").add(t).then(c=>{console.log("Creado")},c=>{a(c)})})}updateIdGenerated(t,s){return this.angularFirestore.collection("participantes").doc(s).update({id_generado:t.id_generado})}deleteIdGenerated(t){return this.angularFirestore.collection("participantes").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(E.LFG(o))},n.\u0275prov=E.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function d(n,e){if(1&n&&(E.TgZ(0,"h3",12),E._uU(1,"Tu ID es: "),E.TgZ(2,"span"),E._uU(3),E.qZA(),E.qZA()),2&n){const t=E.oxw();E.xp6(3),E.Oqu(t.newId)}}function g(n,e){1&n&&(E.TgZ(0,"h5"),E._uU(1,"El ID generado ya existe, genera otro ID"),E.qZA())}let _=(()=>{class n{constructor(t){this.idGeneratorService=t,this.lista_id_generados=[],this.newId=0,this.status=!0}ngOnInit(){this.idGeneratorService.getIdGenerated().subscribe(t=>{this.Participantes=t.map(s=>Object.assign({},s.payload.doc.data()))})}getRandomArbitrary(t,s){this.newId=Math.trunc(Math.random()*(s-t)+t),this.Participantes.some(a=>a.id_generado===this.newId)?(console.log("El ID ya existe"),this.status=!1):(this.newParticipante={id_generado:this.newId},this.idGeneratorService.createIdGenerated(this.newParticipante),this.status=!0)}}return n.\u0275fac=function(t){return new(t||n)(E.Y36(l))},n.\u0275cmp=E.Xpm({type:n,selectors:[["app-root"]],decls:15,vars:2,consts:[[1,"container"],[1,"header","row","align-items-center"],[1,"col-5","m-0"],[1,"col-4","m-0"],[1,"row","navBar"],[1,"row"],[1,"col-12","text-center"],[1,"mt-3","mb-4"],[1,"border-0","rounded","generateButton","px-4",3,"click"],["class","my-3",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"my-3"]],template:function(t,s){1&t&&(E.TgZ(0,"div",0),E.TgZ(1,"div",1),E._UZ(2,"div",2),E.TgZ(3,"div",3),E._UZ(4,"div",4),E.qZA(),E.qZA(),E.TgZ(5,"div",5),E.TgZ(6,"div",6),E.TgZ(7,"h2",7),E._uU(8,"Generador de ID"),E.qZA(),E.TgZ(9,"button",8),E.NdJ("click",function(){return s.getRandomArbitrary(1,1e3)}),E._uU(10,"Generar"),E.qZA(),E.YNc(11,d,4,1,"h3",9),E.YNc(12,g,2,0,"h5",10),E.qZA(),E.qZA(),E.TgZ(13,"div",5),E._UZ(14,"div",11),E.qZA(),E.qZA()),2&t&&(E.xp6(11),E.Q6J("ngIf",0!==s.newId),E.xp6(1),E.Q6J("ngIf",!1===s.status))},directives:[zr],styles:[""]}),n})();const w_firebaseConfig={apiKey:"AIzaSyCWFMTkZseQ7RBh761WZiu8iJInUa42Ge8",authDomain:"generador-id.firebaseapp.com",projectId:"generador-id",storageBucket:"generador-id.appspot.com",messagingSenderId:"1009981028362",appId:"1:1009981028362:web:96ecd6e4556c3b4e2b87f3"};let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=E.oAB({type:n,bootstrap:[_]}),n.\u0275inj=E.cJS({providers:[],imports:[[Ta,qC,Us.hO.initializeApp(w_firebaseConfig),Dx,u]]}),n})();(0,E.G48)(),Bo().bootstrapModule(D).catch(n=>console.error(n))},3394:(We,de,k)=>{"use strict";k.d(de,{Z:()=>pe});var E=k(3854),K=k(3910),P=k(8026),ee=k(5422);class Y{constructor(se,ve){this._delegate=se,this.firebase=ve,(0,P._addComponent)(se,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this._delegate.automaticDataCollectionEnabled=se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(se=>{this._delegate.checkDestroyed(),se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(se,ve=P._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const me=this._delegate.container.getProvider(se);return!me.isInitialized()&&"EXPLICIT"===(null===(De=me.getComponent())||void 0===De?void 0:De.instantiationMode)&&me.initialize(),me.getImmediate({identifier:ve})}_removeServiceInstance(se,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(se).clearInstance(ve)}_addComponent(se){(0,P._addComponent)(this._delegate,se)}_addOrOverwriteComponent(se){(0,P._addOrOverwriteComponent)(this._delegate,se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),O=function Q(){const ce=function(ce){const se={},ve={__esModule:!0,initializeApp:function(yt,un={}){const _t=P.initializeApp(yt,un);if((0,E.r3)(se,_t.name))return se[_t.name];const Dt=new ce(_t,ve);return se[_t.name]=Dt,Dt},app:me,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function(yt){const un=yt.name,_t=un.replace("-compat","");if(P._registerComponent(yt)&&"PUBLIC"===yt.type){const Dt=(rt=me())=>{if("function"!=typeof rt[_t])throw le.create("invalid-app-argument",{appName:un});return rt[_t]()};void 0!==yt.serviceProps&&(0,E.ZB)(Dt,yt.serviceProps),ve[_t]=Dt,ce.prototype[_t]=function(...rt){return this._getService.bind(this,un).apply(this,yt.multipleInstances?rt:[])}}return"PUBLIC"===yt.type?ve[_t]:null},removeApp:function(yt){delete se[yt]},useAsService:function(yt,un){return"serverAuth"===un?null:un},modularAPIs:P}};function me(yt){if(!(0,E.r3)(se,yt=yt||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:yt});return se[yt]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function(){return Object.keys(se).map(yt=>se[yt])}}),me.App=ce,ve}(Y);return ce.INTERNAL=Object.assign(Object.assign({},ce.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function(ve){(0,E.ZB)(ce,ve)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),ce}(),L=new ee.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ce=self.firebase.SDK_VERSION;ce&&ce.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const pe=O;(0,P.registerVersion)("@firebase/app-compat","0.1.23",undefined)},8026:(We,de,k)=>{"use strict";k.r(de),k.d(de,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Dn,_DEFAULT_ENTRY_NAME:()=>Sr,_addComponent:()=>vs,_addOrOverwriteComponent:()=>ha,_apps:()=>qi,_clearComponents:()=>Ar,_components:()=>cn,_getProvider:()=>bn,_registerComponent:()=>zi,_removeServiceInstance:()=>Nt,deleteApp:()=>Ee,getApp:()=>en,getApps:()=>ai,initializeApp:()=>xi,onLog:()=>yn,registerVersion:()=>Cn,setLogLevel:()=>nn});var E=k(8239),K=k(3910),P=k(5422),ee=k(3854);class Y{constructor(fe){this.container=fe}getPlatformInfoString(){return this.container.getProviders().map(Be=>{if(function(Oe){const fe=Oe.getComponent();return"VERSION"===(null==fe?void 0:fe.type)}(Be)){const Te=Be.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(Be=>Be).join(" ")}}const le="@firebase/app",Q=new P.Yd("@firebase/app"),Sr="[DEFAULT]",_u={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qi=new Map,cn=new Map;function vs(Oe,fe){try{Oe.container.addComponent(fe)}catch(Be){Q.debug(`Component ${fe.name} failed to register with FirebaseApp ${Oe.name}`,Be)}}function ha(Oe,fe){Oe.container.addOrOverwriteComponent(fe)}function zi(Oe){const fe=Oe.name;if(cn.has(fe))return Q.debug(`There were multiple attempts to register component ${fe}.`),!1;cn.set(fe,Oe);for(const Be of qi.values())vs(Be,Oe);return!0}function bn(Oe,fe){const Be=Oe.container.getProvider("heartbeat").getImmediate({optional:!0});return Be&&Be.triggerHeartbeat(),Oe.container.getProvider(fe)}function Nt(Oe,fe,Be=Sr){bn(Oe,fe).clearInstance(Be)}function Ar(){cn.clear()}const Rr=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vt{constructor(fe,Be,Te){this._isDeleted=!1,this._options=Object.assign({},fe),this._config=Object.assign({},Be),this._name=Be.name,this._automaticDataCollectionEnabled=Be.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(fe){this._isDeleted=fe}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const Dn="9.7.0";function xi(Oe,fe={}){"object"!=typeof fe&&(fe={name:fe});const Be=Object.assign({name:Sr,automaticDataCollectionEnabled:!1},fe),Te=Be.name;if("string"!=typeof Te||!Te)throw Rr.create("bad-app-name",{appName:String(Te)});const At=qi.get(Te);if(At){if((0,ee.vZ)(Oe,At.options)&&(0,ee.vZ)(Be,At.config))return At;throw Rr.create("duplicate-app",{appName:Te})}const Mt=new K.H0(Te);for(const V of cn.values())Mt.addComponent(V);const B=new vt(Oe,Be,Mt);return qi.set(Te,B),B}function en(Oe=Sr){const fe=qi.get(Oe);if(!fe)throw Rr.create("no-app",{appName:Oe});return fe}function ai(){return Array.from(qi.values())}function Ee(Oe){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,E.Z)(function*(Oe){const fe=Oe.name;qi.has(fe)&&(qi.delete(fe),yield Promise.all(Oe.container.getProviders().map(Be=>Be.delete())),Oe.isDeleted=!0)})).apply(this,arguments)}function Cn(Oe,fe,Be){var Te;let At=null!==(Te=_u[Oe])&&void 0!==Te?Te:Oe;Be&&(At+=`-${Be}`);const Mt=At.match(/\s|\//),B=fe.match(/\s|\//);if(Mt||B){const V=[`Unable to register library "${At}" with version "${fe}":`];return Mt&&V.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Mt&&B&&V.push("and"),B&&V.push(`version name "${fe}" contains illegal characters (whitespace or "/")`),void Q.warn(V.join(" "))}zi(new K.wA(`${At}-version`,()=>({library:At,version:fe}),"VERSION"))}function yn(Oe,fe){if(null!==Oe&&"function"!=typeof Oe)throw Rr.create("invalid-log-argument");(0,P.Am)(Oe,fe)}function nn(Oe){(0,P.Ub)(Oe)}const Pe="firebase-heartbeat-store";let Wr=null;function Ri(){return Wr||(Wr=(0,ee.X3)("firebase-heartbeat-database",1,(Oe,fe)=>{switch(fe){case 0:Oe.createObjectStore(Pe)}}).catch(Oe=>{throw Rr.create("storage-open",{originalErrorMessage:Oe.message})})),Wr}function Yt(){return(Yt=(0,E.Z)(function*(Oe){try{return(yield Ri()).transaction(Pe).objectStore(Pe).get(Tn(Oe))}catch(fe){throw Rr.create("storage-get",{originalErrorMessage:fe.message})}})).apply(this,arguments)}function He(Oe,fe){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,E.Z)(function*(Oe,fe){try{const Te=(yield Ri()).transaction(Pe,"readwrite");return yield Te.objectStore(Pe).put(fe,Tn(Oe)),Te.complete}catch(Be){throw Rr.create("storage-set",{originalErrorMessage:Be.message})}})).apply(this,arguments)}function Tn(Oe){return`${Oe.name}!${Oe.options.appId}`}class st{constructor(fe){this.container=fe,this._heartbeatsCache=null;const Be=this.container.getProvider("app").getImmediate();this._storage=new Qt(Be),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var fe=this;return(0,E.Z)(function*(){const Te=fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Pt();if(null===fe._heartbeatsCache&&(fe._heartbeatsCache=yield fe._heartbeatsCachePromise),fe._heartbeatsCache.lastSentHeartbeatDate!==At&&!fe._heartbeatsCache.heartbeats.some(Mt=>Mt.date===At))return fe._heartbeatsCache.heartbeats.push({date:At,agent:Te}),fe._heartbeatsCache.heartbeats=fe._heartbeatsCache.heartbeats.filter(Mt=>{const B=new Date(Mt.date).valueOf();return Date.now()-B<=2592e6}),fe._storage.overwrite(fe._heartbeatsCache)})()}getHeartbeatsHeader(){var fe=this;return(0,E.Z)(function*(){if(null===fe._heartbeatsCache&&(yield fe._heartbeatsCachePromise),null===fe._heartbeatsCache||0===fe._heartbeatsCache.heartbeats.length)return"";const Be=Pt(),{heartbeatsToSend:Te,unsentEntries:At}=function(Oe,fe=1024){const Be=[];let Te=Oe.slice();for(const At of Oe){const Mt=Be.find(B=>B.agent===At.agent);if(Mt){if(Mt.dates.push(At.date),Mr(Be)>fe){Mt.dates.pop();break}}else if(Be.push({agent:At.agent,dates:[At.date]}),Mr(Be)>fe){Be.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:Be,unsentEntries:Te}}(fe._heartbeatsCache.heartbeats),Mt=(0,ee.L)(JSON.stringify({version:2,heartbeats:Te}));return fe._heartbeatsCache.lastSentHeartbeatDate=Be,At.length>0?(fe._heartbeatsCache.heartbeats=At,yield fe._storage.overwrite(fe._heartbeatsCache)):(fe._heartbeatsCache.heartbeats=[],fe._storage.overwrite(fe._heartbeatsCache)),Mt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(fe){this.app=fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var fe=this;return(0,E.Z)(function*(){return(yield fe._canUseIndexedDBPromise)&&(yield function(Oe){return Yt.apply(this,arguments)}(fe.app))||{heartbeats:[]}})()}overwrite(fe){var Be=this;return(0,E.Z)(function*(){var Te;if(yield Be._canUseIndexedDBPromise){const Mt=yield Be.read();return He(Be.app,{lastSentHeartbeatDate:null!==(Te=fe.lastSentHeartbeatDate)&&void 0!==Te?Te:Mt.lastSentHeartbeatDate,heartbeats:fe.heartbeats})}})()}add(fe){var Be=this;return(0,E.Z)(function*(){var Te;if(yield Be._canUseIndexedDBPromise){const Mt=yield Be.read();return He(Be.app,{lastSentHeartbeatDate:null!==(Te=fe.lastSentHeartbeatDate)&&void 0!==Te?Te:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...fe.heartbeats]})}})()}}function Mr(Oe){return(0,ee.L)(JSON.stringify({version:2,heartbeats:Oe})).length}zi(new K.wA("platform-logger",fe=>new Y(fe),"PRIVATE")),zi(new K.wA("heartbeat",fe=>new st(fe),"PRIVATE")),Cn(le,"0.7.22",""),Cn(le,"0.7.22","esm2017"),Cn("fire-js","")},3910:(We,de,k)=>{"use strict";k.d(de,{wA:()=>P,H0:()=>oe});var E=k(8239),K=k(3854);class P{constructor(O,L,q){this.name=O,this.instanceFactory=L,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(O){return this.instantiationMode=O,this}setMultipleInstances(O){return this.multipleInstances=O,this}setServiceProps(O){return this.serviceProps=O,this}setInstanceCreatedCallback(O){return this.onInstanceCreated=O,this}}const ee="[DEFAULT]";class Y{constructor(O,L){this.name=O,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(O){const L=this.normalizeInstanceIdentifier(O);if(!this.instancesDeferred.has(L)){const q=new K.BH;if(this.instancesDeferred.set(L,q),this.isInitialized(L)||this.shouldAutoInitialize())try{const G=this.getOrInitializeService({instanceIdentifier:L});G&&q.resolve(G)}catch(G){}}return this.instancesDeferred.get(L).promise}getImmediate(O){var L;const q=this.normalizeInstanceIdentifier(null==O?void 0:O.identifier),G=null!==(L=null==O?void 0:O.optional)&&void 0!==L&&L;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(G)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(ne){if(G)return null;throw ne}}getComponent(){return this.component}setComponent(O){if(O.name!==this.name)throw Error(`Mismatching Component ${O.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=O,this.shouldAutoInitialize()){if("EAGER"===O.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ee})}catch(L){}for(const[L,q]of this.instancesDeferred.entries()){const G=this.normalizeInstanceIdentifier(L);try{const ne=this.getOrInitializeService({instanceIdentifier:G});q.resolve(ne)}catch(ne){}}}}clearInstance(O=ee){this.instancesDeferred.delete(O),this.instancesOptions.delete(O),this.instances.delete(O)}delete(){var O=this;return(0,E.Z)(function*(){const L=Array.from(O.instances.values());yield Promise.all([...L.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...L.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(O=ee){return this.instances.has(O)}getOptions(O=ee){return this.instancesOptions.get(O)||{}}initialize(O={}){const{options:L={}}=O,q=this.normalizeInstanceIdentifier(O.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const G=this.getOrInitializeService({instanceIdentifier:q,options:L});for(const[ne,pe]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(ne)&&pe.resolve(G);return G}onInit(O,L){var q;const G=this.normalizeInstanceIdentifier(L),ne=null!==(q=this.onInitCallbacks.get(G))&&void 0!==q?q:new Set;ne.add(O),this.onInitCallbacks.set(G,ne);const pe=this.instances.get(G);return pe&&O(pe,G),()=>{ne.delete(O)}}invokeOnInitCallbacks(O,L){const q=this.onInitCallbacks.get(L);if(q)for(const G of q)try{G(O,L)}catch(ne){}}getOrInitializeService({instanceIdentifier:O,options:L={}}){let q=this.instances.get(O);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(Q=O,Q===ee?void 0:Q),options:L}),this.instances.set(O,q),this.instancesOptions.set(O,L),this.invokeOnInitCallbacks(q,O),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,O,q)}catch(G){}var Q;return q||null}normalizeInstanceIdentifier(O=ee){return this.component?this.component.multipleInstances?O:ee:O}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(O){this.name=O,this.providers=new Map}addComponent(O){const L=this.getProvider(O.name);if(L.isComponentSet())throw new Error(`Component ${O.name} has already been registered with ${this.name}`);L.setComponent(O)}addOrOverwriteComponent(O){this.getProvider(O.name).isComponentSet()&&this.providers.delete(O.name),this.addComponent(O)}getProvider(O){if(this.providers.has(O))return this.providers.get(O);const L=new Y(O,this);return this.providers.set(O,L),L}getProviders(){return Array.from(this.providers.values())}}},5422:(We,de,k)=>{"use strict";k.d(de,{in:()=>K,Yd:()=>le,Ub:()=>oe,Am:()=>Q});const E=[];var K=(()=>{return(O=K||(K={}))[O.DEBUG=0]="DEBUG",O[O.VERBOSE=1]="VERBOSE",O[O.INFO=2]="INFO",O[O.WARN=3]="WARN",O[O.ERROR=4]="ERROR",O[O.SILENT=5]="SILENT",K;var O})();const P={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},ee=K.INFO,Y={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},X=(O,L,...q)=>{if(L<O.logLevel)return;const G=(new Date).toISOString(),ne=Y[L];if(!ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[ne](`[${G}]  ${O.name}:`,...q)};class le{constructor(L){this.name=L,this._logLevel=ee,this._logHandler=X,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in K))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?P[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...L),this._logHandler(this,K.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...L),this._logHandler(this,K.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,K.INFO,...L),this._logHandler(this,K.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,K.WARN,...L),this._logHandler(this,K.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...L),this._logHandler(this,K.ERROR,...L)}}function oe(O){E.forEach(L=>{L.setLogLevel(O)})}function Q(O,L){for(const q of E){let G=null;L&&L.level&&(G=P[L.level]),q.userLogHandler=null===O?null:(ne,pe,...ce)=>{const se=ce.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(De){return null}}).filter(ve=>ve).join(" ");pe>=(null!=G?G:ne.logLevel)&&O({level:K[pe].toLowerCase(),message:se,args:ce,type:ne.name})}}}},8239:(We,de,k)=>{"use strict";function E(P,ee,Y,X,le,oe,Q){try{var O=P[oe](Q),L=O.value}catch(q){return void Y(q)}O.done?ee(L):Promise.resolve(L).then(X,le)}function K(P){return function(){var ee=this,Y=arguments;return new Promise(function(X,le){var oe=P.apply(ee,Y);function Q(L){E(oe,X,le,Q,O,"next",L)}function O(L){E(oe,X,le,Q,O,"throw",L)}Q(void 0)})}}k.d(de,{Z:()=>K})}},We=>{We(We.s=7831)}]);